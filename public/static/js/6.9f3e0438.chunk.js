(this["webpackJsonperp-dashboard"]=this["webpackJsonperp-dashboard"]||[]).push([[6],{318:function(e,t,r){"use strict";var n=r(0),a=n.createContext({});t.a=a},355:function(e,t,r){"use strict";var n=r(25),a=r(1);t.a=Object(n.a)(Object(a.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder")},356:function(e,t,r){"use strict";var n=r(25),a=r(1);t.a=Object(n.a)(Object(a.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate")},361:function(e,t,r){"use strict";var n=r(5),a=r(2),o=r(65),c=r(8),i=r(0),s=r(6),l=r(10),u=r(48),d=r(51);function p(e){return Object(u.a)("MuiImageList",e)}Object(d.a)("MuiImageList",["root","masonry","quilted","standard","woven"]);var b=r(318),j=r(1),f=["children","className","cols","component","rowHeight","gap","style","variant"],m=Object(s.a)("ul",{name:"MuiImageList",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant]]}})((function(e){var t=e.ownerState;return Object(a.a)({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},"masonry"===t.variant&&{display:"block"})})),h=i.forwardRef((function(e,t){var r=Object(l.a)({props:e,name:"MuiImageList"}),s=r.children,u=r.className,d=r.cols,h=void 0===d?2:d,g=r.component,O=void 0===g?"ul":g,v=r.rowHeight,x=void 0===v?"auto":v,w=r.gap,y=void 0===w?4:w,I=r.style,P=r.variant,k=void 0===P?"standard":P,C=Object(n.a)(r,f),S=i.useMemo((function(){return{rowHeight:x,gap:y,variant:k}}),[x,y,k]);i.useEffect((function(){0}),[]);var _="masonry"===k?Object(a.a)({columnCount:h,columnGap:y},I):Object(a.a)({gridTemplateColumns:"repeat(".concat(h,", 1fr)"),gap:y},I),F=Object(a.a)({},r,{component:O,gap:y,rowHeight:x,variant:k}),R=function(e){var t=e.classes,r={root:["root",e.variant]};return Object(o.a)(r,p,t)}(F);return Object(j.jsx)(m,Object(a.a)({as:O,className:Object(c.a)(R.root,R[k],u),ref:t,style:_,ownerState:F},C,{children:Object(j.jsx)(b.a.Provider,{value:S,children:s})}))}));t.a=h},362:function(e,t,r){"use strict";var n=r(3),a=r(5),o=r(2),c=r(65),i=r(8),s=r(0),l=(r(106),r(318)),u=r(6),d=r(10),p=r(67),b=r(48),j=r(51);function f(e){return Object(b.a)("MuiImageListItem",e)}var m=Object(j.a)("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),h=r(1),g=["children","className","cols","component","rows","style"],O=Object(u.a)("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[Object(n.a)({},"& .".concat(m.img),t.img),t.root,t[r.variant]]}})((function(e){var t=e.ownerState;return Object(o.a)({display:"inline-block",position:"relative",lineHeight:0},"standard"===t.variant&&{display:"flex",flexDirection:"column"},"woven"===t.variant&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},Object(n.a)({},"& .".concat(m.img),Object(o.a)({objectFit:"cover",width:"100%",height:"100%"},"standard"===t.variant&&{height:"auto",flexGrow:1})))})),v=s.forwardRef((function(e,t){var r=Object(d.a)({props:e,name:"MuiImageListItem"}),n=r.children,u=r.className,b=r.cols,j=void 0===b?1:b,m=r.component,v=void 0===m?"li":m,x=r.rows,w=void 0===x?1:x,y=r.style,I=Object(a.a)(r,g),P=s.useContext(l.a),k=P.rowHeight,C=void 0===k?"auto":k,S=P.gap,_=P.variant,F="auto";"woven"===_?F=void 0:"auto"!==C&&(F=C*w+S*(w-1));var R=Object(o.a)({},r,{cols:j,component:v,gap:S,rowHeight:C,rows:w,variant:_}),z=function(e){var t=e.classes,r={root:["root",e.variant],img:["img"]};return Object(c.a)(r,f,t)}(R);return Object(h.jsx)(O,Object(o.a)({as:v,className:Object(i.a)(z.root,z[_],u),ref:t,style:Object(o.a)({height:F,gridColumnEnd:"masonry"!==_?"span ".concat(j):void 0,gridRowEnd:"masonry"!==_?"span ".concat(w):void 0,marginBottom:"masonry"===_?S:void 0},y),ownerState:R},I,{children:s.Children.map(n,(function(e){return s.isValidElement(e)?"img"===e.type||Object(p.a)(e,["Image"])?s.cloneElement(e,{className:Object(i.a)(z.img,e.props.className)}):e:null}))}))}));t.a=v},363:function(e,t,r){"use strict";var n=r(5),a=r(2),o=r(65),c=r(8),i=r(0),s=r(6),l=r(10),u=r(7),d=r(48),p=r(51);function b(e){return Object(d.a)("MuiImageListItemBar",e)}Object(p.a)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);var j=r(1),f=["actionIcon","actionPosition","className","subtitle","title","position"],m=Object(s.a)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["position".concat(Object(u.a)(r.position))]]}})((function(e){var t=e.theme,r=e.ownerState;return Object(a.a)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},"bottom"===r.position&&{bottom:0},"top"===r.position&&{top:0},"below"===r.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),h=Object(s.a)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:function(e,t){var r=e.ownerState;return[t.titleWrap,t["titleWrap".concat(Object(u.a)(r.position))],r.actionIcon&&t["titleWrapActionPos".concat(Object(u.a)(r.actionPosition))]]}})((function(e){var t=e.theme,r=e.ownerState;return Object(a.a)({flexGrow:1,padding:"12px 16px",color:t.palette.common.white,overflow:"hidden"},"below"===r.position&&{padding:"6px 0 12px",color:"inherit"},r.actionIcon&&"left"===r.actionPosition&&{paddingLeft:0},r.actionIcon&&"right"===r.actionPosition&&{paddingRight:0})})),g=Object(s.a)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:function(e,t){return t.title}})((function(e){return{fontSize:e.theme.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),O=Object(s.a)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:function(e,t){return t.subtitle}})((function(e){return{fontSize:e.theme.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),v=Object(s.a)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:function(e,t){var r=e.ownerState;return[t.actionIcon,t["actionIconActionPos".concat(Object(u.a)(r.actionPosition))]]}})((function(e){var t=e.ownerState;return Object(a.a)({},"left"===t.actionPosition&&{order:-1})})),x=i.forwardRef((function(e,t){var r=Object(l.a)({props:e,name:"MuiImageListItemBar"}),i=r.actionIcon,s=r.actionPosition,d=void 0===s?"right":s,p=r.className,x=r.subtitle,w=r.title,y=r.position,I=void 0===y?"bottom":y,P=Object(n.a)(r,f),k=Object(a.a)({},r,{position:I,actionPosition:d}),C=function(e){var t=e.classes,r=e.position,n=e.actionIcon,a=e.actionPosition,c={root:["root","position".concat(Object(u.a)(r))],titleWrap:["titleWrap","titleWrap".concat(Object(u.a)(r)),n&&"titleWrapActionPos".concat(Object(u.a)(a))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat(Object(u.a)(a))]};return Object(o.a)(c,b,t)}(k);return Object(j.jsxs)(m,Object(a.a)({ownerState:k,className:Object(c.a)(C.root,p),ref:t},P,{children:[Object(j.jsxs)(h,{ownerState:k,className:C.titleWrap,children:[Object(j.jsx)(g,{className:C.title,children:w}),x?Object(j.jsx)(O,{className:C.subtitle,children:x}):null]}),i?Object(j.jsx)(v,{ownerState:k,className:C.actionIcon,children:i}):null]}))}));t.a=x},400:function(e,t,r){"use strict";r.r(t);var n=r(35),a=r.n(n),o=r(9),c=r(53),i=r(13),s=r(0),l=r(16),u=r(23),d=r(265),p=r(22),b=r(86),j={enUS:{folder:{currentFolder:"please select",needFolderName:"please input name for new folder",addNewFolder:"add new folder",folderNull:"folder not found",dataNull:"data not found"},action:{uploadSuccess:"upload success"},table:{tableHeader:"photo",id:"photo id",group_id:"group id",group_name:"folder name",file_name:"file name",file_size:"file size",gmt_modified:"date modified",owner_member_display_name:"owner",reference_count:"reference count",url:"link"},tableToolbar:{menuHide:"hide menu",menuShow:"show menu",photoUpload:"upload",photoDownload:"download"},common:{yes:"OK",no:"Cancel",netFail:"request failed"}},zhCN:{folder:{currentFolder:"\u8bf7\u9009\u62e9",needFolderName:"\u8bf7\u586b\u5199\u6587\u4ef6\u5939\u540d",addNewFolder:"\u65b0\u5efa\u6587\u4ef6\u5939",folderNull:"\u6587\u4ef6\u5939\u4e0d\u5b58\u5728",dataNull:"\u6570\u636e\u4e0d\u5b58\u5728"},action:{uploadSuccess:"\u4e0a\u4f20\u6210\u529f"},table:{tableHeader:"\u56fe\u7247",id:"\u56fe\u7247 id",group_id:"\u5206\u7ec4 id",group_name:"\u6587\u4ef6\u5939",file_name:"\u6587\u4ef6\u540d",file_size:"\u6587\u4ef6\u5927\u5c0f",gmt_modified:"\u4fee\u6539\u65e5\u671f",owner_member_display_name:"\u7528\u6237\u540d",reference_count:"\u5f15\u7528\u6b21\u6570",url:"\u94fe\u63a5"},tableToolbar:{menuHide:"\u9690\u85cf\u83dc\u5355",menuShow:"\u663e\u793a\u83dc\u5355",photoUpload:"\u4e0a\u4f20",photoDownload:"\u4e0b\u8f7d"},common:{yes:"\u786e\u5b9a",no:"\u53d6\u6d88",netFail:"\u8bf7\u6c42\u5931\u8d25"}}},f=r(108),m=r(85),h=r(406),g=r(274),O=r(409),v=r(360),x=r(290),w=r(266),y=r(5),I=r(2),P=r(8),k=r(65),C=r(6),S=r(10),_=r(48),F=r(51);function R(e){return Object(_.a)("MuiFormGroup",e)}Object(F.a)("MuiFormGroup",["root","row","error"]);var z=r(31),N=r(38),M=r(1),H=["className","row"],L=Object(C.a)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.row&&t.row]}})((function(e){var t=e.ownerState;return Object(I.a)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),T=s.forwardRef((function(e,t){var r=Object(S.a)({props:e,name:"MuiFormGroup"}),n=r.className,a=r.row,o=void 0!==a&&a,c=Object(y.a)(r,H),i=Object(z.a)(),s=Object(N.a)({props:r,muiFormControl:i,states:["error"]}),l=Object(I.a)({},r,{row:o,error:s.error}),u=function(e){var t=e.classes,r={root:["root",e.row&&"row",e.error&&"error"]};return Object(k.a)(r,R,t)}(l);return Object(M.jsx)(L,Object(I.a)({className:Object(P.a)(u.root,n),ownerState:l,ref:t},c))})),W=r(411),A=r(385),B=r(386),D=r(387),q=r(388),V=r(389),E=r(25),G=Object(E.a)(Object(M.jsx)("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc"),U=Object(E.a)(Object(M.jsx)("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4 2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"Collections"),Q=r(348),J=r(349),K=r(356),Y=[];var X=function(e){var t=e.folderArr,r=e.currentFolder,n=e.setCurrentFolder,o=e.manageFolder,l=e.uploadPhotos,u=e.setPage,d=e.displayMode,p=e.setDisplayMode,b=e.langPack,j=Object(s.useState)(!1),y=Object(i.a)(j,2),I=y[0],P=y[1],k=Object(s.useState)(!1),C=Object(i.a)(k,2),S=C[0],_=C[1];function F(){P(""),_(!1)}function R(){return(R=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("add",{group_name:I});case 2:return e.sent&&(n(""),F()),e.abrupt("return");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("rename",{group_id:r,group_name:I});case 2:return t=e.sent,console.log(t),t&&F(),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o("delete",{group_id:r}),n(""),F(),e.abrupt("return");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(f.a)(Y),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=r.value,e.next=7,l(n);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:Y=[];case 18:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}return t&&t.length?Object(M.jsx)("span",{style:{marginTop:"20px"},children:S?Object(M.jsx)(M.Fragment,{children:"add"===S?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(w.a,{sx:{height:"30px",marginRight:"10px"},variant:"outlined",color:"secondary",type:"text",placeholder:b.folder.addNewFolder,onChange:function(e){return P(e.target.value.trim())}}),Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(Q.a,{}),onClick:function(){return R.apply(this,arguments)},children:b.common.yes}),Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(J.a,{}),onClick:function(){return _(!1)},children:b.common.no})]}):"edit"===S?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(w.a,{sx:{height:"30px",marginRight:"10px"},variant:"outlined",color:"primary",type:"text",defaultValue:t.find((function(e){return e.id===r})).name,onChange:function(e){return P(e.target.value.trim())}}),Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(Q.a,{}),onClick:function(){return z.apply(this,arguments)},children:b.common.yes}),Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(J.a,{}),onClick:function(){return _(!1)},children:b.common.no})]}):"delete"===S?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(Q.a,{}),onClick:function(){return N.apply(this,arguments)},children:b.common.yes}),Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(J.a,{}),onClick:function(){return _(!1)},children:b.common.no})]}):"upload"===S?Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(T,{children:[Object(M.jsx)(W.a,{sx:{border:"1px dotted",height:"200px",margin:"20px",justifyContent:"center"},labelPlacement:"top",control:Object(M.jsx)(w.a,{type:"file",inputProps:{multiple:!0}}),label:Object(M.jsx)(K.a,{fontSize:"large"}),onChange:function(e){var t=e.target.files;Y=t.length?t:[]}}),Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(Q.a,{}),onClick:function(){return H.apply(this,arguments)},children:b.common.yes}),Object(M.jsx)(x.a,{startIcon:Object(M.jsx)(J.a,{}),onClick:function(){return _(!1)},children:b.common.no})]})}):""}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(h.a,{"aria-label":"breadcrumb",sx:{display:"inline-block",marginRight:"5px"},children:[Object(M.jsx)(A.a,{}),Object(M.jsxs)(g.a,{sx:{height:"30px",minWidth:"100px"},autoWidth:!0,value:r,onChange:function(e){var t=e.target.value;t&&t!==b.folder.currentFolder&&(u(0),n(t))},children:[Object(M.jsx)(O.a,{value:b.folder.currentFolder,disabled:!0,children:b.folder.currentFolder}),t.map((function(e,t){return Object(M.jsx)(O.a,{value:e.id,children:e.name},t)}))]})]}),Object(M.jsxs)(v.a,{variant:"",children:[Object(M.jsx)(x.a,{onClick:function(){return _("add")},children:Object(M.jsx)(B.a,{})}),Object(M.jsx)(x.a,{onClick:function(){if(r&&r!==b.folder.currentFolder){_("edit");var e=t.find((function(e){return e.id===r}));e&&P(e.name)}},disabled:!r||r===b.folder.currentFolder,children:Object(M.jsx)(D.a,{})}),Object(M.jsx)(x.a,{onClick:function(){return _("delete")},disabled:!r||r===b.folder.currentFolder,children:Object(M.jsx)(q.a,{})}),Object(M.jsx)(x.a,{onClick:function(){return _("upload")},disabled:!r||r===b.folder.currentFolder,children:Object(M.jsx)(V.a,{})}),Object(M.jsx)(x.a,{onClick:function(){return p("gallery"===d?"table":"gallery")},disabled:!r||r===b.folder.currentFolder,children:"gallery"===d?Object(M.jsx)(G,{}):Object(M.jsx)(U,{})})]})]})}):Object(M.jsx)(m.a,{variant:"body2",children:b.folder.folderNull})},Z=r(399);var $=function(e){var t=e.page,r=e.page_size,n=e.handleChangePage,a=e.handleChangeRowsPerPage;return Object(M.jsx)(Z.a,{component:"div",labelDisplayedRows:function(e){var t=e.from,r=e.to;return"".concat(t,"\u2013").concat(r)},sx:{"& .MuiTablePagination-toolbar":{height:"29px",padding:"1px"}},page:t,count:-1,onPageChange:function(e,t){return n(t)},rowsPerPage:r,onRowsPerPageChange:function(e){return a(parseInt(e.target.value))}})},ee=r(361),te=r(362),re=r(363),ne=r(285),ae=r(355);var oe=function(e){var t=e.photoArr,r=e.photoSizing,n=e.photoCols,a=e.rowHeight,c=e.currentFolder,i=e.langPack,s=r.width,l=r.height;return t&&t.length?Object(M.jsx)(ee.a,{cols:n,rowHeight:a,sx:{marginTop:"1px",marginBottom:"60px"},variant:"standard",gap:2,children:t.map((function(e){return Object(M.jsxs)(te.a,{cols:1,rows:1,children:[Object(M.jsx)("img",Object(o.a)(Object(o.a)({},srcset(e.url,s,l,1,1)),{},{alt:e.file_name,loading:"lazy"})),Object(M.jsx)(re.a,{sx:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},title:e.file_name,position:"top",actionIcon:Object(M.jsx)(ne.a,{sx:{color:e.reference_count?"yellow":"white"},"aria-label":"star ".concat(e.file_name),children:Object(M.jsx)(ae.a,{})}),actionPosition:"left"})]},e.url)}))}):Object(M.jsx)(m.a,{variant:"body2",sx:{margin:"10px"},children:c===i.folder.currentFolder?i.folder.currentFolder:i.folder.dataNull})},ce=r(398),ie=r(414),se=r(390),le=r(391),ue=r(392),de=r(393),pe=r(415),be=[];var je=function(e){var t=e.tableRows,r=e.tableColumns,n=e.page_size,a=e.page,o=e.localization,c=e.handleChangePage,i=e.handleChangeRowsPerPage,s=e.onRowClick,l=e.langPack,u=window.innerHeight>520?window.innerHeight-320:600;return Object(M.jsx)("div",{style:{height:u,width:"100%"},children:Object(M.jsx)(ce.a,{checkboxSelection:!0,localeText:"zhCN"===o.locale?ie.a.components.MuiDataGrid.defaultProps.localeText:{},components:{Toolbar:function(){return Object(M.jsxs)(se.a,{children:[Object(M.jsx)(le.a,{}),Object(M.jsx)(ue.a,{}),Object(M.jsx)(de.a,{}),Object(M.jsx)(pe.a,{csvOptions:{utf8WithBom:!0,fileName:l.table.tableHeader+"_"+new Date((new Date).valueOf()-60*(new Date).getTimezoneOffset()*1e3).toISOString().replace(/T.*/,"")}})]})}},onRowClick:s,onStateChange:function(e){var r=e.selection;r.length!==be.length&&(be=r.map((function(e){return t.find((function(t){return t.id===e}))})),console.log(be.length+" selected"))},page:a,pageSize:n,rowCount:9999,columns:r,getRowHeight:function(){return 88},rows:t,rowsPerPageOptions:[10,25,100],disableSelectionOnClick:!0,paginationMode:"server",onPageChange:c,onPageSizeChange:i})})};t.default=function(){console.log("photo app running");var e,t=Object(u.c)((function(e){return e.localization})),r=Object(s.useState)(j[t.locale]),n=Object(i.a)(r,2),f=n[0],m=n[1],h=Object(u.c)((function(e){return e.globalization})),g=Object(s.useState)(h.baseData.loginData),O=Object(i.a)(g,1)[0],v=Object(l.f)(),x=Object(s.useState)([]),w=Object(i.a)(x,2),y=w[0],I=w[1],P=Object(s.useState)(f.folder.currentFolder),k=Object(i.a)(P,2),C=k[0],S=k[1],_=Object(s.useState)([]),F=Object(i.a)(_,2),R=F[0],z=F[1],N=Object(s.useState)(0),H=Object(i.a)(N,2),L=H[0],T=H[1],W=Object(s.useState)(10),A=Object(i.a)(W,2),B=A[0],D=A[1],q=Object(s.useState)("gallery"),V=Object(i.a)(q,2),E=V[0],G=V[1],U=Object(s.useState)([]),Q=Object(i.a)(U,2),J=Q[0],K=Q[1],Y=0,Z=Object(p.a)(),ee=Object(d.a)(Z.breakpoints.down("md"))?3:10;function te(){return(te=Object(c.a)(a.a.mark((function e(t,r){var n,o,c,i,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma.photoFolderManageQuery({operation:t,groupObj:r}),e.next=3,fetchAPI(n);case 3:if((o=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,o.response.result));case 6:return c=ma.photoFolderManageCheck(o),i=c.response,s=i.status,l=i.result,queryResult(s,"ok"),s&&setTimeout(re,1234),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(c.a)(a.a.mark((function e(t){var r,n,c,i,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.photoFolderQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,n.response.result));case 6:if(c=ma.photoFolderCheck(n),i=c.response,s=i.status,l=i.result,s){e.next=10;break}return e.abrupt("return",queryResult(!1,l));case 10:return clearTimeout(Y),Y=setTimeout((function(){var e=l.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{id:String(e.id)})}));I(e)}),1234),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(c.a)(a.a.mark((function e(t){var r,n,o,c,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t={}),r=ma.photoQuery(t),e.next=4,fetchAPI(r);case 4:if((n=e.sent).response.status){e.next=7;break}return e.abrupt("return",queryResult(!1,n.response.result));case 7:if(o=ma.photoCheck(n),c=o.response,i=c.status,s=c.result,i){e.next=11;break}return e.abrupt("return",queryResult(!1,s));case 11:return z(s),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(c.a)(a.a.mark((function t(r){var n,o,c,i,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ma.photoUploadQuery({file_name:r.name,image_bytes:r,group_id:C}),t.next=3,fetchAPI(n);case 3:if((o=t.sent).response.status){t.next=6;break}return t.abrupt("return",queryResult(!1,o.response.result));case 6:if(c=ma.photoUploadCheck(o),i=c.response,s=i.status,l=i.result,s){t.next=10;break}return t.abrupt("return",queryResult(s,l));case 10:return queryResult(s,f.action.uploadSuccess),void 0!==e&&clearTimeout(e),e=setTimeout((function(){ae({group_id:C})}),2e3),t.abrupt("return",l);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(s.useEffect)((function(){console.log("display mode changed: ",E)}),[E]),Object(s.useEffect)((function(){m(j[t.locale])}),[t.locale]),Object(s.useEffect)((function(){console.log("current folder:",C),C&&C!==f.folder.currentFolder&&ae({group_id:C,current_page:L+1,page_size:B})}),[C]),Object(s.useEffect)((function(){return console.log("I want pics"),O?(re(),function(e){var t=[{field:"imgWithURL",headerName:f.table.tableHeader,minWidth:50,valueGetter:function(e){return e.row},valueFormatter:function(e){return e.value.url},renderCell:function(e){var t=e.value;return Object(M.jsx)("a",{href:t.url,target:"_blank",children:Object(M.jsx)("img",Object(o.a)(Object(o.a)({},srcset(t.url.split(",")[0],100,100,1,1)),{},{alt:"mainPic"}))})}},{field:"file_name",minWidth:300,headerName:f.table.file_name},{field:"reference_count",flex:1,headerName:f.table.reference_count},{field:"gmt_modified",flex:1,headerName:f.table.gmt_modified}];if(e){e.score&&t.splice(5,0,{field:"final_score",headerName:f.table.score,flex:.5,sortable:!0},{field:"tag",headerName:f.table.tag,flex:.5,sortable:!0})}K(t)}(),function(){console.log("I leave pics")}):v("/")}),[O]);var se=function(e){T(e);var t={current_page:e+1,page_size:B};C&&C!==f.folder.currentFolder&&(t.group_id=C),ae(t)},le=function(e){D(e);var t={current_page:L+1,page_size:e};C&&C!==f.folder.currentFolder&&(t.group_id=C),ae(t)};return Object(M.jsxs)(b.a,{title:"Photos --\u56fe\u5e93",children:[Object(M.jsx)(X,{folderArr:y,currentFolder:C,setCurrentFolder:S,manageFolder:function(e,t){return te.apply(this,arguments)},uploadPhotos:function(e){return ie.apply(this,arguments)},setPage:T,displayMode:E,setDisplayMode:G,langPack:f}),Object(M.jsx)($,{page:L,page_size:B,handleChangePage:se,handleChangeRowsPerPage:le,langPack:f}),"table"===E?Object(M.jsx)(je,{tableRows:R,tableColumns:J,page:L,page_size:B,localization:t,handleChangePage:se,handleChangeRowsPerPage:le,onRowClick:function(e,t){},langPack:f}):Object(M.jsx)(oe,{photoArr:R,rowHeight:150,photoCols:ee,photoSizing:{width:100,height:100},currentFolder:C,langPack:f})]})}}}]);
//# sourceMappingURL=6.9f3e0438.chunk.js.map