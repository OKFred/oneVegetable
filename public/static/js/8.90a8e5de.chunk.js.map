{"version":3,"sources":["views/product/Languages.js","views/product/component/EditStep.js","views/product/component/ProductCategory.js","views/product/component/PhotoGallery.js","views/product/component/ProductAttribute.js","assets/images/editorBtn.png","views/product/component/ProductDetail.js","views/product/component/Confirmation.js","views/product/ProductEdit.js"],"names":["Languages","enUS","folder","currentFolder","needFolderName","addNewFolder","folderNull","dataNull","table","tableHeader","categoryName","productId","subject","status","display","attributes","keywords","price","payment_methods","min_order_quantity","unit_type","gmt_create","gmt_modified","score","tag","tableToolbar","menuHide","menuShow","productScore","productDisplayOn","productDisplayOff","productUpdate","productEdit","form","KeyInformation","ProductAttributes","category","attributeMissing","attributeDuplicated","pieces","steps","first","second","finally","previous","next","complete","editPrice","choosePhotos","uploadPhotos","removePhotos","photoUploadTip","productDescriptionTip","mainPhotoRequired","descriptionOverflow","addAttributes","removeAttributes","modificationNull","modificationDone","uploadSuccess","productScoreError","common","yes","no","netFail","zhCN","EditStep","langPack","activeStep","setActiveStep","useState","Stepper","map","label","Step","StepLabel","ButtonGroup","variant","color","disableElevation","sx","flexDirection","pt","paddingBottom","Button","disabled","onClick","prevActiveStep","mr","Box","flex","length","BreadChip","styled","Chip","backgroundColor","grey","height","emphasize","boxShadow","ProductCategory","localization","categories","menuRef","menuState","showMenu","closeMenu","menuArr","anchorEl","Breadcrumbs","paddingTop","obj","index","menuLevel","component","href","locale","name","cn_name","icon","Home","undefined","deleteIcon","ExpandMore","onDelete","category_id","ref","Menu","open","Boolean","onClose","MenuItem","PhotoGallery","finalImageArr","imageSizing","photoCols","rowHeight","uploaderRef","onDoubleClickImageBtn","onPhotoSelected","width","ImageList","cols","marginTop","marginBottom","gap","url","ImageListItem","rows","srcset","alt","loading","ImageListItemBar","background","title","position","actionIcon","Tooltip","IconButton","onDoubleClick","StarBorder","actionPosition","FormControlLabel","control","Input","type","inputProps","multiple","AddPhotoAlternate","onChange","startIcon","current","click","sourcing_trade","finalAttributeArr","allAttributeArr","onAttributeAdd","onAttributeModified","onAttributeClear","addAttribute","setAddAttribute","attributeSelected","setAttributeSelected","attributeOptionArr","setAttributeOptionArr","style","Typography","Divider","TextField","margin","fullWidth","id","defaultValue","e","target","value","String","string","InputProps","startAdornment","InputAdornment","fob_currency","fob_max_price","fob_min_price","v","trim","replace","splitter","test","prices","split","Number","fob_unit_type","endAdornment","min_order_unit_type","queryResult","select","minWidth","padding","attr_id","attributeObj","find","console","log","optionArr","attribute_values","attribute_value","option","en_name","attr_value","attr_value_id","optionObj","prev","Object","assign","Check","Cancel","Add","attribute_name","value_name","onBlur","attribute_id","editorBtn","ProductDetail","finalDescription","setFinalDescription","editor","useRef","config","language","enter","defaultActionOnPaste","toolbarAdaptive","buttons","iconURL","tooltip","exec","textNearby","html","htmlCodes","line","join","events","paste","items","clipboardData","beforePasteInsert","text","tabIndex","newContent","Confirmation","modificationSubmission","navigate","useNavigate","align","productModified","App","useSelector","state","globalization","setLangPack","baseData","loginData","product_id","location","pathname","productInfo","setProductInfo","setFinalAttributeArr","setFinalImageArr","finalCatId","setFinalCatId","setCategories","categoryArr","menuValue","setMenuState","useMediaQuery","useTheme","breakpoints","down","setAllAttributeArr","photoFile","a","paramObj","ma","photoUploadQuery","file_name","image_bytes","group_id","fetchAPI","msg","response","res","photoUploadCheck","result","newArr","photobank_url","main_image","images","toString","productFieldUpdateQuery","productFieldUpdateCheck","productDetailQuery","productDetailCheck","product_attribute","attributeArr","sort","b","description","getAllCategories","getCategoryInfo","productCategoryQuery","productCategoryCheck","productCategoryAttributeQuery","productCategoryAttributeCheck","category_level","cat_id","categoryResult","level","parent_ids","Array","number","child_ids","newCategories","push","useEffect","getCategoryAttributeInfo","getProductInfo","latestCategories","childIdsArr","indexOf","files","file","ModificationConfirmation","modifiedKeys","keys","List","key","ListItem","MainCard","filter","imageUrl","ProductAttribute","input_type","value_id","newData","oldArr","searchKey","oldIndex","findIndex","arrayDataReplacer","str","JSON","parse","stringify","deliver_periods","isArray","dataObj","product_type","entries","k","updateProductInfo"],"mappings":"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","file":"static/js/8.90a8e5de.chunk.js","sourcesContent":["let Languages = {\r\n    enUS: {\r\n        folder: {\r\n            currentFolder: 'please select',\r\n            needFolderName: 'please input name for new folder',\r\n            addNewFolder: 'add new folder',\r\n            folderNull: 'folder not found',\r\n            dataNull: 'data not found'\r\n        },\r\n        table: {\r\n            tableHeader: 'Products',\r\n            categoryName: 'category name',\r\n            productId: 'product id',\r\n            subject: 'subject',\r\n            status: 'status',\r\n            display: 'display',\r\n            attributes: 'attributes',\r\n            keywords: 'keywords',\r\n            price: 'price (range)',\r\n            payment_methods: 'payment methods',\r\n            min_order_quantity: 'min order quantity(MOQ)',\r\n            unit_type: 'unit type',\r\n            gmt_create: 'date create',\r\n            gmt_modified: 'date modified',\r\n            score: 'score',\r\n            tag: 'tag'\r\n        },\r\n        tableToolbar: {\r\n            menuHide: 'hide menu',\r\n            menuShow: 'show menu',\r\n            productScore: 'scores',\r\n            productDisplayOn: 'in-stock',\r\n            productDisplayOff: 'out-stock',\r\n            productUpdate: 'update',\r\n            productEdit: 'edit'\r\n        },\r\n        form: {\r\n            KeyInformation: 'key information',\r\n            ProductAttributes: 'product attributes',\r\n            subject: '128 letters max.',\r\n            category: 'click to change category',\r\n            keywords: '3 keywords max. Comma(,) separated',\r\n            price: 'set price (range)',\r\n            payment_methods: 'payment methods such as T/T, L/C, etc.',\r\n            min_order_quantity: 'optional',\r\n            attributes: 'add or delete',\r\n            attributeMissing: 'attribute missing',\r\n            attributeDuplicated: 'attribute duplicated',\r\n            pieces: 'pieces'\r\n        },\r\n        steps: {\r\n            first: 'Edit Attributes',\r\n            second: 'Edit Contents',\r\n            finally: 'Preview & Publish',\r\n            previous: 'Previous',\r\n            next: 'Next',\r\n            complete: 'Complete',\r\n            editPrice: 'Edit Price',\r\n            choosePhotos: 'Choose Photos',\r\n            uploadPhotos: 'Upload Photos',\r\n            removePhotos: 'double click to remove the photo',\r\n            photoUploadTip: 'If it cannot be updated, please remove ALL photos and try again',\r\n            productDescriptionTip:\r\n                'Tips: ① If it cannot be updated, please remove ALL contents and try again. ②Click the red button below 👇 to unlock photo resizing',\r\n            mainPhotoRequired: 'Need at least one photo',\r\n            descriptionOverflow: 'description length shall be smaller than 60k letters',\r\n            addAttributes: 'Add Attributes',\r\n            removeAttributes: 'Remove Attributes',\r\n            modificationNull: 'No modification made',\r\n            modificationDone: 'Will submit the following modifications:',\r\n            uploadSuccess: 'Upload Success',\r\n            productScoreError: 'no score found'\r\n        },\r\n        common: {\r\n            yes: 'OK',\r\n            no: 'Cancel',\r\n            netFail: 'request failed'\r\n        }\r\n    },\r\n    zhCN: {\r\n        folder: {\r\n            currentFolder: '请选择',\r\n            needFolderName: '请填写文件夹名',\r\n            addNewFolder: '新建文件夹',\r\n            folderNull: '文件夹不存在',\r\n            dataNull: '数据不存在'\r\n        },\r\n        table: {\r\n            tableHeader: '产品',\r\n            categoryName: '类目',\r\n            productId: '产品 id',\r\n            subject: '标题',\r\n            status: '审核状态',\r\n            display: '上架状态',\r\n            attributes: '属性',\r\n            keywords: '关键词',\r\n            price: '价格(区间)',\r\n            payment_methods: '支付方式',\r\n            min_order_quantity: '最小起订量(MOQ)',\r\n            unit_type: '单位',\r\n            gmt_create: '创建日期',\r\n            gmt_modified: '修改日期',\r\n            score: '产品分',\r\n            tag: '标签'\r\n        },\r\n        tableToolbar: {\r\n            menuHide: '隐藏菜单',\r\n            menuShow: '显示菜单',\r\n            productScore: '产品分',\r\n            productDisplayOn: '上架',\r\n            productDisplayOff: '下架',\r\n            productUpdate: '更新',\r\n            productEdit: '编辑'\r\n        },\r\n        form: {\r\n            KeyInformation: '基本信息',\r\n            ProductAttributes: '产品属性',\r\n            subject: '128 字符以内',\r\n            category: '点击更换类目',\r\n            keywords: '最多三个关键词，用英文逗号(,)分隔',\r\n            price: '设置价格(区间)',\r\n            payment_methods: '支付方式，例如：T/T，L/C，等',\r\n            min_order_quantity: '选填',\r\n            attributes: '可增可减',\r\n            attributeMissing: '属性缺失',\r\n            attributeDuplicated: '属性重复',\r\n            pieces: '件'\r\n        },\r\n        steps: {\r\n            first: '属性编辑',\r\n            second: '详情编辑',\r\n            finally: '预览&发布',\r\n            previous: '上一步',\r\n            next: '下一步',\r\n            complete: '完成',\r\n            editPrice: '编辑价格',\r\n            choosePhotos: '选择图片',\r\n            uploadPhotos: '上传图片',\r\n            removePhotos: '双击移除图片',\r\n            photoUploadTip: '若无法更新，请清除所有图片后重试',\r\n            productDescriptionTip: '提示: ①若无法更新，请清除所有详情后重试 ②原先是智能编辑的情况下，须点击下方红色按钮解锁图片缩放👇',\r\n            mainPhotoRequired: '需要保留至少一张主图',\r\n            descriptionOverflow: '描述长度不能超过6万字符',\r\n            addAttributes: '添加属性',\r\n            removeAttributes: '移除空白属性',\r\n            modificationNull: '没有任何修改',\r\n            modificationDone: '将提交如下内容:',\r\n            uploadSuccess: '上传成功',\r\n            productScoreError: '产品分未查到'\r\n        },\r\n        common: {\r\n            yes: '确定',\r\n            no: '取消',\r\n            netFail: '请求失败'\r\n        }\r\n    }\r\n};\r\n\r\nexport { Languages };\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Button, Box, Stepper, Step, StepLabel, ButtonGroup } from '@mui/material';\r\n\r\nfunction EditStep({ langPack, activeStep, setActiveStep }) {\r\n    const [steps] = useState([langPack.steps.first, langPack.steps.second, langPack.steps.finally]);\r\n    const handleNext = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Stepper activeStep={activeStep}>\r\n                {steps.map((label) => {\r\n                    return (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                    );\r\n                })}\r\n            </Stepper>\r\n            <ButtonGroup\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                disableElevation\r\n                sx={{ display: 'flex', flexDirection: 'row', pt: 2, paddingBottom: '10px' }}\r\n            >\r\n                <Button disabled={activeStep === 0} onClick={handleBack} sx={{ mr: 1 }}>\r\n                    {langPack.steps.previous}\r\n                </Button>\r\n                <Box sx={{ flex: '1 1 auto' }} />\r\n                <Button disabled={activeStep === 2} onClick={handleNext}>\r\n                    {activeStep === steps.length - 1 ? langPack.steps.complete : langPack.steps.next}\r\n                </Button>\r\n            </ButtonGroup>\r\n        </>\r\n    );\r\n}\r\n\r\nEditStep.propTypes = {\r\n    langPack: PropTypes.object,\r\n    activeStep: PropTypes.number,\r\n    setActiveStep: PropTypes.func\r\n};\r\n\r\nexport default EditStep;\r\n","import PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Menu, MenuItem, Breadcrumbs, Chip } from '@mui/material';\r\nimport { Home as HomeIcon, ExpandMore as ExpandMoreIcon } from '@mui/icons-material';\r\nimport { emphasize, styled } from '@mui/material/styles';\r\nimport { grey } from '@material-ui/core/colors';\r\n\r\n//styled components\r\nconst BreadChip = styled(Chip)(() => {\r\n    const backgroundColor = grey[100];\r\n    return {\r\n        backgroundColor,\r\n        height: 40,\r\n        '&:hover, &:focus': {\r\n            backgroundColor: emphasize(backgroundColor, 0.06)\r\n        },\r\n        '&:active': {\r\n            boxShadow: 10,\r\n            backgroundColor: emphasize(backgroundColor, 0.12)\r\n        }\r\n    };\r\n});\r\n\r\nfunction ProductCategory({ localization, categories, menuRef, menuState, showMenu, closeMenu }) {\r\n    //console.log('loading product category...');\r\n    let { menuArr, anchorEl } = menuState;\r\n    return (\r\n        <>\r\n            <Breadcrumbs sx={{ display: 'inline-flex', paddingTop: '10px' }}>\r\n                {categories.map((obj, index) => {\r\n                    if (index > 0)\r\n                        return (\r\n                            <BreadChip\r\n                                sx={menuState.menuLevel === index ? { display: 'none' } : {}}\r\n                                component=\"a\"\r\n                                href=\"#\"\r\n                                key={obj.category_id}\r\n                                label={localization.locale !== 'zhCN' ? obj.name : obj.cn_name}\r\n                                icon={index === 1 ? <HomeIcon /> : undefined}\r\n                                deleteIcon={<ExpandMoreIcon />}\r\n                                onDelete={() => showMenu(index)}\r\n                            />\r\n                        );\r\n                })}\r\n            </Breadcrumbs>\r\n            <span ref={menuRef}></span>\r\n            <div>\r\n                <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={() => closeMenu()}>\r\n                    {menuArr.map((obj) => (\r\n                        <MenuItem key={obj.category_id} onClick={() => closeMenu(obj.category_id)}>\r\n                            {localization.locale !== 'zhCN' ? obj.name : obj.cn_name}\r\n                        </MenuItem>\r\n                    ))}\r\n                </Menu>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nProductCategory.propTypes = {\r\n    localization: PropTypes.object,\r\n    finalImageArr: PropTypes.array,\r\n    menuRef: PropTypes.object,\r\n    categories: PropTypes.array,\r\n    menuState: PropTypes.object,\r\n    showMenu: PropTypes.func,\r\n    closeMenu: PropTypes.func\r\n};\r\n\r\nexport default ProductCategory;\r\n","import PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Button, FormControlLabel, ImageList, ImageListItem, ImageListItemBar, Input, IconButton, Tooltip } from '@mui/material';\r\nimport { StarBorder as StarBorderIcon, FileUpload as UploadIcon, AddPhotoAlternate as AddPhotoAlternateIcon } from '@mui/icons-material';\r\n\r\nfunction PhotoGallery({ finalImageArr, imageSizing, photoCols, rowHeight, uploaderRef, onDoubleClickImageBtn, onPhotoSelected, langPack }) {\r\n    //console.log('loading photo gallery...');\r\n    let { width, height } = imageSizing;\r\n    return (\r\n        <ImageList cols={photoCols} rowHeight={rowHeight} sx={{ marginTop: '10px', marginBottom: '10px' }} variant=\"quilted\" gap={2}>\r\n            {finalImageArr.map((url, index) => {\r\n                return (\r\n                    <ImageListItem key={index} cols={1} rows={1}>\r\n                        <img {...srcset(url, width, height, 1, 1)} alt={index + 1} loading=\"lazy\" />\r\n                        <ImageListItemBar\r\n                            sx={{\r\n                                background: 'linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, ' + 'rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)'\r\n                            }}\r\n                            title={index + 1}\r\n                            position=\"top\"\r\n                            actionIcon={\r\n                                <Tooltip title={langPack.steps.removePhotos}>\r\n                                    <IconButton\r\n                                        sx={{ color: index ? 'yellow' : 'white' }}\r\n                                        aria-label={`star ${index + 1}`}\r\n                                        onDoubleClick={() => onDoubleClickImageBtn(url)}\r\n                                    >\r\n                                        <StarBorderIcon />\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                            }\r\n                            actionPosition=\"left\"\r\n                        />\r\n                    </ImageListItem>\r\n                );\r\n            })}\r\n            {finalImageArr.length < 6 ? (\r\n                <>\r\n                    <FormControlLabel\r\n                        sx={{ display: 'none' }}\r\n                        ref={uploaderRef}\r\n                        control={<Input type=\"file\" inputProps={{ multiple: true }} />}\r\n                        label={<AddPhotoAlternateIcon />}\r\n                        onChange={onPhotoSelected}\r\n                    />\r\n                    <Tooltip title={langPack.steps.photoUploadTip}>\r\n                        <Button startIcon={<UploadIcon />} onClick={() => uploaderRef.current.click()} key=\"uploader\"></Button>\r\n                    </Tooltip>\r\n                </>\r\n            ) : null}\r\n        </ImageList>\r\n    );\r\n}\r\n\r\nPhotoGallery.propTypes = {\r\n    finalImageArr: PropTypes.array,\r\n    imageSizing: PropTypes.object,\r\n    photoCols: PropTypes.number,\r\n    cols: PropTypes.number,\r\n    rowHeight: PropTypes.number,\r\n    uploaderRef: PropTypes.object,\r\n    onDoubleClickImageBtn: PropTypes.func,\r\n    onPhotoSelected: PropTypes.func,\r\n    onClickImageBtn: PropTypes.func,\r\n    langPack: PropTypes.object\r\n};\r\n\r\nexport default PhotoGallery;\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Typography, Button, InputAdornment, MenuItem, TextField, Divider, Tooltip } from '@mui/material';\r\nimport { Add as AddIcon, Check as CheckIcon, Cancel as CancelIcon, DeleteOutline as DeleteIcon } from '@mui/icons-material';\r\n\r\nfunction ProductAttributes({\r\n    langPack,\r\n    sourcing_trade,\r\n    subject,\r\n    keywords,\r\n    finalAttributeArr, //使用中的属性\r\n    allAttributeArr, //所有可选属性\r\n    onAttributeAdd,\r\n    onAttributeModified,\r\n    onAttributeClear\r\n}) {\r\n    let [addAttribute, setAddAttribute] = useState(false); //需要添加属性吗\r\n    let [attributeSelected, setAttributeSelected] = useState(''); //当前选择的属性\r\n    let [attributeOptionArr, setAttributeOptionArr] = useState([]); //属性值列表（若有）\r\n\r\n    const onAttributeSelection = (e) => {\r\n        let attributeObj = allAttributeArr.find((obj) => obj.attr_id === e.target.value);\r\n        if (!attributeObj) return console.log('属性不属于该类目？');\r\n        setAttributeSelected(attributeObj);\r\n        let optionArr = attributeObj.attribute_values.attribute_value;\r\n        if (optionArr) setAttributeOptionArr(optionArr);\r\n        else setAttributeOptionArr([]);\r\n    }; //选择属性\r\n\r\n    const onAttributeOptionSelection = (e) => {\r\n        let optionObj = attributeOptionArr.find((obj) => obj.attr_value_id === e.target.value);\r\n        if (!optionObj) return console.log('选项不是该属性的选项？');\r\n        setAttributeSelected((prev) => {\r\n            return Object.assign({}, prev, { attr_value: optionObj });\r\n        });\r\n    }; //选择属性的可选项，若有，然后暂存\r\n    return (\r\n        <>\r\n            <div style={{ paddingTop: '10px', paddingBottom: '20px' }}>\r\n                <Typography variant=\"h2\" sx={{ color: 'orangered', display: 'inline' }}>\r\n                    {langPack.form.KeyInformation}\r\n                </Typography>\r\n            </div>\r\n            <Divider />\r\n            <br />\r\n            <Tooltip title={langPack.form.subject}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    fullWidth\r\n                    key={subject}\r\n                    id=\"subject\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{langPack.table.subject}</Typography>}\r\n                    defaultValue={subject}\r\n                    onChange={(e) => onAttributeModified('subject', e.target.value)}\r\n                />\r\n            </Tooltip>\r\n            <Tooltip title={langPack.form.keywords}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    fullWidth\r\n                    key={keywords}\r\n                    id=\"keywords\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{langPack.table.keywords}</Typography>}\r\n                    defaultValue={keywords ? String(keywords.string) : ''}\r\n                    onChange={(e) => onAttributeModified('keywords', e.target.value)}\r\n                />\r\n            </Tooltip>\r\n            <Tooltip title={langPack.form.price}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    key={sourcing_trade}\r\n                    id=\"price\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{langPack.table.price}</Typography>}\r\n                    InputProps={{\r\n                        startAdornment: (\r\n                            <InputAdornment position=\"start\">{sourcing_trade ? sourcing_trade.fob_currency : 'USD'}</InputAdornment>\r\n                        )\r\n                    }}\r\n                    defaultValue={\r\n                        sourcing_trade\r\n                            ? sourcing_trade.fob_max_price === sourcing_trade.fob_min_price\r\n                                ? sourcing_trade.fob_min_price\r\n                                : `${sourcing_trade.fob_min_price} ~ ${sourcing_trade.fob_max_price}`\r\n                            : ''\r\n                    }\r\n                    onChange={(e) => {\r\n                        let v = e.target.value;\r\n                        if (v.trim() === '')\r\n                            return onAttributeModified('sourcing_trade', {\r\n                                fob_min_price: ''\r\n                            });\r\n                        v = v.trim().replace(/\\s/g, '');\r\n                        let splitter = /~|-/g.test(v) ? '~' : '-';\r\n                        let prices = v.split(splitter);\r\n                        let fob_min_price = prices[0];\r\n                        let fob_max_price = prices[1];\r\n                        if (Number(fob_min_price) >= Number(fob_max_price)) fob_max_price = '';\r\n                        let { fob_currency, fob_unit_type } = sourcing_trade;\r\n                        onAttributeModified('sourcing_trade', { fob_min_price, fob_max_price, fob_currency, fob_unit_type });\r\n                    }}\r\n                />\r\n            </Tooltip>\r\n            <Tooltip title={langPack.form.min_order_quantity}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    key={sourcing_trade}\r\n                    id=\"min_order_quantity\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{langPack.table.min_order_quantity}</Typography>}\r\n                    defaultValue={sourcing_trade && sourcing_trade.min_order_quantity ? sourcing_trade.min_order_quantity : ''}\r\n                    InputProps={{\r\n                        endAdornment: (\r\n                            <InputAdornment position=\"end\">\r\n                                {sourcing_trade ? sourcing_trade.min_order_unit_type : langPack.form.pieces}\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                    onChange={(e) => {\r\n                        let { min_order_unit_type } = sourcing_trade;\r\n                        let min_order_quantity = e.target.value || '1';\r\n                        onAttributeModified('sourcing_trade', { min_order_quantity, min_order_unit_type });\r\n                    }}\r\n                />\r\n            </Tooltip>\r\n            <Tooltip title={langPack.form.payment_methods}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    key={sourcing_trade}\r\n                    id=\"payment_methods\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{langPack.table.payment_methods}</Typography>}\r\n                    defaultValue={sourcing_trade && sourcing_trade.payment_methods ? String(sourcing_trade.payment_methods.string) : ''}\r\n                    onChange={(e) => {\r\n                        let payment_methods = e.target.value;\r\n                        if (payment_methods.trim() === '') return queryResult(false, langPack.form.attributeMissing);\r\n                        payment_methods = payment_methods.split(',');\r\n                        onAttributeModified('sourcing_trade', { payment_methods });\r\n                    }}\r\n                />\r\n            </Tooltip>\r\n            <br />\r\n            <br />\r\n            <div style={{ paddingTop: '10px', paddingBottom: '20px' }}>\r\n                <Typography variant=\"h2\" sx={{ color: 'darkorange', display: 'inline' }}>\r\n                    {langPack.form.ProductAttributes}\r\n                </Typography>\r\n                {addAttribute ? (\r\n                    <>\r\n                        {allAttributeArr.length ? (\r\n                            <>\r\n                                <TextField\r\n                                    id=\"add-attribute\"\r\n                                    select\r\n                                    sx={{\r\n                                        minWidth: '120px',\r\n                                        padding: '5px',\r\n                                        '& .MuiOutlinedInput-root': { height: '29px', padding: '1px' }\r\n                                    }}\r\n                                    value={attributeSelected && attributeSelected.attr_id ? attributeSelected.attr_id : ''}\r\n                                    onChange={onAttributeSelection}\r\n                                >\r\n                                    <MenuItem key=\"\" value=\"\" disabled />\r\n                                    {allAttributeArr.map((option) => (\r\n                                        <MenuItem key={option.attr_id} value={option.attr_id}>\r\n                                            {option.en_name}\r\n                                        </MenuItem>\r\n                                    ))}\r\n                                </TextField>\r\n                                {attributeOptionArr.length ? (\r\n                                    <TextField\r\n                                        id=\"add-attribute-if-single-select\"\r\n                                        select\r\n                                        value={\r\n                                            attributeSelected.attr_value && attributeSelected.attr_value.attr_value_id\r\n                                                ? attributeSelected.attr_value.attr_value_id\r\n                                                : ''\r\n                                        }\r\n                                        onChange={onAttributeOptionSelection}\r\n                                        variant=\"standard\"\r\n                                    >\r\n                                        {attributeOptionArr.map((option) => (\r\n                                            <MenuItem key={String(option.attr_value_id)} value={option.attr_value_id}>\r\n                                                {option.en_name}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                    </TextField>\r\n                                ) : (\r\n                                    <></>\r\n                                )}\r\n                                <Button startIcon={<CheckIcon />} onClick={() => onAttributeAdd(attributeSelected)}>\r\n                                    {langPack.common.yes}\r\n                                </Button>\r\n                                <Button startIcon={<CancelIcon />} onClick={() => setAddAttribute((prev) => !prev)}>\r\n                                    {langPack.common.no}\r\n                                </Button>\r\n                            </>\r\n                        ) : (\r\n                            <Typography variant=\"body1\">{langPack.form.attributeMissing}</Typography>\r\n                        )}\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <Tooltip title={langPack.steps.addAttributes}>\r\n                            <Button variant=\"standard\" onClick={() => setAddAttribute((prev) => !prev)}>\r\n                                <AddIcon />\r\n                            </Button>\r\n                        </Tooltip>\r\n                        <Tooltip title={langPack.steps.removeAttributes}>\r\n                            <Button variant=\"standard\" onClick={onAttributeClear}>\r\n                                <DeleteIcon />\r\n                            </Button>\r\n                        </Tooltip>\r\n                    </>\r\n                )}\r\n            </div>\r\n            <Divider />\r\n            <br />\r\n            {finalAttributeArr.length &&\r\n                finalAttributeArr.map((obj) => (\r\n                    <Tooltip title={langPack.form.attributes} key={obj.value_name + obj.attribute_id}>\r\n                        <TextField\r\n                            margin=\"normal\"\r\n                            id={String(obj.attribute_name + obj.value_name)}\r\n                            variant=\"outlined\"\r\n                            label={<Typography variant=\"h3\">{obj.attribute_name}</Typography>}\r\n                            defaultValue={obj.value_name}\r\n                            onBlur={(e) => {\r\n                                if (e.target.value === obj.value_name) return;\r\n                                onAttributeModified('attributes', {\r\n                                    attribute_id: obj.attribute_id,\r\n                                    attribute_name: obj.attribute_name,\r\n                                    //value_id: obj.value_id,\r\n                                    value_name: e.target.value\r\n                                });\r\n                            }}\r\n                        />\r\n                    </Tooltip>\r\n                ))}\r\n        </>\r\n    );\r\n}\r\n\r\nProductAttributes.propTypes = {\r\n    langPack: PropTypes.object,\r\n    sourcing_trade: PropTypes.object,\r\n    subject: PropTypes.string,\r\n    keywords: PropTypes.object,\r\n    finalAttributeArr: PropTypes.array,\r\n    allAttributeArr: PropTypes.array,\r\n    onAttributeAdd: PropTypes.func,\r\n    onAttributeModified: PropTypes.func,\r\n    onAttributeClear: PropTypes.func\r\n};\r\n\r\nexport default ProductAttributes;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAK/SURBVHhe7ZvhTcMwEIXZAEZgA9gANigbwAaMABuUDegGjAAbMAIjMIK5JxIp5OyzL02I3bxPej9aXdLzp8RO0/QsEBcU5oTCnFCYEwpzQmFOKMzJ/wj7+Kgnn59dU9NYTtjhEMLlpXyCfESNubsL4f29a7Yc2XIBHh50g7Xm9bVrugzZYmaennRTtcdxpEn1jHx/62ZayG7XDSCPVM8IDu9YQy2kkPLKElKn49VVCDc3deT8PN5j4eoplTOSEjZhNVoMSDuiR6mcEQpzQmFOKMzJ5oV9fYXw/KyTujrevDDsJLZzfGgMCqOwMVJpQGEKqTSgMIVUGlCYQioNKEwhlQYUppBKAwpTSKUBhSmk0oDCFFJpQGEKqTSgMIVUGlCYQioNaheGuyleNisMsi4uQtjvuzcK2aQw/P55fT1t/yclDI8YQEaO8aMIONJKT8+TEfb4+FsLGRY4Bcf7R3DElXASwt7e/tanboGn+umTkw2aF9ZP3sN6vB7/Eh2riyX3NE7zwoaT9zB4v5/PxpN8LtbP/k0L6+etVPpTbDzJ54IjMbV4NCtsPG+lgicFY+/nkloEmhRWOh8dm9gi0KQwz3x0bMaLQHPCMABs/58Zzmd4nevRQCoNlhC2NhTmpAlhLy/xPxmskdT8uYqw1Pe8FlKIXekVhivsWH3twUPLhUi1gVcYSM0RNSf3/XOAVBtMEYaL0tSj3TXm/r5rvAzZwmCKMABpLRxpWKScyFYGU4X1YE7DQoDGagpOwZI7uxFk9AbHCjtBZPQGFKaQ0RtQmEJGb0BhChm9AYUpZPQGqSt33Py7va07jotRDzL6DDFhLQSXDwsge86Av/fGGqo9qwlLzWO1ZzVhAPNBrKmas6owgCOtpdNzdWFDsHpCYM3BDYAFmCZsw1CYEwpzQmFOKMwJhTmhMCcU5oTCXITwA9i8QLpYTlc4AAAAAElFTkSuQmCC\"","/* eslint-disable jsx-a11y/tabindex-no-positive */\r\nimport { useRef } from 'react';\r\nimport JoditEditor from 'jodit-react';\r\nimport PropTypes from 'prop-types';\r\nimport editorBtn from 'assets/images/editorBtn.png';\r\nconsole.log(editorBtn);\r\n// material-ui\r\nimport { Typography } from '@mui/material';\r\nfunction ProductDetail({ localization, finalDescription, setFinalDescription, langPack }) {\r\n    const editor = useRef(null);\r\n    const config = {\r\n        //全局变量\r\n        language: localization.locale === 'zhCN' ? 'zh_cn' : 'en_us',\r\n        enter: 'DIV',\r\n        defaultActionOnPaste: 'insert_clear_html',\r\n        toolbarAdaptive: false,\r\n        buttons: [\r\n            'source',\r\n            'bold',\r\n            'italic',\r\n            'underline',\r\n            'eraser',\r\n            'ul',\r\n            'ol',\r\n            'left',\r\n            'font',\r\n            'fontsize',\r\n            'brush',\r\n            'image',\r\n            'copyformat',\r\n            'copy',\r\n            'paste',\r\n            'table',\r\n            'link',\r\n            {\r\n                iconURL: editorBtn,\r\n                tooltip: 'Clear Image style',\r\n                exec: function (editor, textNearby, obj) {\r\n                    let html = editor.value;\r\n                    html = html.replace(/\\n/gi, ''); //inline\r\n                    html = html.replace(/>/gi, '>\\n'); //按照tag 换行\r\n                    let htmlCodes = html.split('\\n');\r\n                    htmlCodes = htmlCodes.map((line) => {\r\n                        if (!/<img src/gi.test(line)) return line;\r\n                        line = / class=\"magic-(\\d{1,3})x000\"/gi.test(line)\r\n                            ? line.replace(/x000/gi, '')\r\n                            : line.replace(/ class=\"magic-(\\d{1,3})\"/gi, ` class=\"magic-$1` + `x000\"`);\r\n                        return line;\r\n                    }); //去除smart editing 对图片的限制\r\n                    html = htmlCodes.join('');\r\n                    editor.value = html;\r\n                }\r\n            } /* ,\r\n            {\r\n                iconURL:\r\n                    'data:image/png;base64,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',\r\n                tooltip: '插入模板变量',\r\n                exec: function (editor, textNearby, obj) {\r\n                    let varSelected = obj.control.text || '客户姓名';\r\n                    let varObj = {\r\n                        贵司: '${company_name}',\r\n                        客户姓名: '${contacts}',\r\n                        客户邮箱: '${email}',\r\n                        销售姓名: '${salesManager}'\r\n                    };\r\n                    let myVar = varObj[varSelected];\r\n                    editor.selection.removeMarkers();\r\n                    const text = editor.createInside.element('span');\r\n                    text.innerHTML = myVar;\r\n                    editor.selection.insertNode(text);\r\n                    editor.setEditorValue(); // for syncronize value between source textarea and editor\r\n                },\r\n                list: {\r\n                    '${company_name}': '贵司',\r\n                    '${contacts}': '客户姓名',\r\n                    '${email}': '客户邮箱',\r\n                    '${salesManager}': '销售姓名'\r\n                }\r\n            } */\r\n        ],\r\n        events: {\r\n            paste: (e) => {\r\n                //粘贴动作发生时\r\n                console.log('粘贴...', e); //本地图片\r\n                let items = e.clipboardData && e.clipboardData.items;\r\n                if (!items || !items.length) return;\r\n                return console.log(items);\r\n                for (let i = 0; i < items.length; i++) {\r\n                    let item = items[i];\r\n                    if (item == null || item.type.match('image') == null) continue;\r\n                    let file = item.getAsFile();\r\n                    console.log(file);\r\n                    if (file == null) return console.log('无法获取图片');\r\n                    if (file.size > 10 * 1000 * 1000) return boots.queryResult(false, '图片文件大小不能超过10M');\r\n                    let fileObj = {\r\n                        name: file.name,\r\n                        size: file.size,\r\n                        url: URL.createObjectURL(file) //本地 blob url\r\n                    };\r\n                    thisInstance.uploadPic(fileObj); //'this' is not referred\r\n                } // 此时file就是剪切板中的图片文件\r\n            },\r\n            beforePasteInsert: (text) => {\r\n                console.log('粘贴内容植入前...'); //网络图片\r\n                return;\r\n                setTimeout(() => {\r\n                    editor.value = thisInstance.emailAddFilter(editor.value);\r\n                    console.log('过滤 & 替换');\r\n                    let imgs = document.images;\r\n                    for (let i = 0; i < imgs.length; i++) {\r\n                        let src = imgs[i].src;\r\n                        if (src.match(/^https:\\/\\/mail.ali/i) == null) continue;\r\n                        console.log(src);\r\n                        let fileObj = {\r\n                            name: 'image.png',\r\n                            size: '',\r\n                            url: src\r\n                        };\r\n                        thisInstance.uploadPic(fileObj);\r\n                    }\r\n                }, 200);\r\n            } //粘贴到文本框时\r\n        }\r\n    };\r\n    return (\r\n        <>\r\n            <Typography variant=\"h4\" sx={{ paddingTop: '6px', paddingBottom: '6px', color: 'orangered' }}>\r\n                {langPack.steps.productDescriptionTip}\r\n            </Typography>\r\n            <JoditEditor\r\n                ref={editor}\r\n                value={finalDescription}\r\n                config={config}\r\n                tabIndex={1} // tabIndex of textarea\r\n                onBlur={(newContent) => setFinalDescription(newContent)} // preferred to use only this option to update the content for performance reasons\r\n                onChange={(newContent) => {}}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nProductDetail.propTypes = {\r\n    localization: PropTypes.object,\r\n    finalDescription: PropTypes.string,\r\n    setFinalDescription: PropTypes.func,\r\n    langPack: PropTypes.object\r\n};\r\n\r\nexport default ProductDetail;\r\n","import { useNavigate } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Button, Divider } from '@mui/material';\r\nimport { Check as CheckIcon, Cancel as CancelIcon } from '@mui/icons-material';\r\n\r\nfunction Confirmation({ langPack, modificationSubmission }) {\r\n    let navigate = useNavigate(); //react-router-dom\r\n    return (\r\n        <>\r\n            <br />\r\n            <Divider />\r\n            <div align=\"right\">\r\n                <Button startIcon={<CheckIcon />} onClick={modificationSubmission}>\r\n                    {langPack.common.yes}\r\n                </Button>\r\n                <Button startIcon={<CancelIcon />} onClick={() => navigate(`/product`)}>\r\n                    {langPack.common.no}\r\n                </Button>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nConfirmation.propTypes = {\r\n    langPack: PropTypes.object,\r\n    modificationSubmission: PropTypes.func\r\n};\r\n\r\nexport default Confirmation;\r\n","/* eslint-disable jsx-a11y/tabindex-no-positive */\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// material-ui\r\nimport { Typography, List, ListItem, useMediaQuery } from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport { Languages } from './Languages';\r\nimport EditStep from './component/EditStep';\r\nimport ProductCategory from './component/ProductCategory';\r\nimport PhotoGallery from './component/PhotoGallery';\r\nimport ProductAttribute from './component/ProductAttribute';\r\nimport ProductDetail from './component/ProductDetail';\r\nimport Confirmation from './component/Confirmation';\r\n\r\n// ==============================|| SINGLE PAGE APPLICATION ||============================== //\r\nlet productModified = {};\r\n\r\nconst App = () => {\r\n    //全局数据\r\n    console.log('productEdit app running');\r\n    let localization = useSelector((state) => state.localization); //多语言相关\r\n    let globalization = useSelector((state) => state.globalization); //全局数据\r\n    let [langPack, setLangPack] = useState(Languages[localization.locale]); //currentLanguage\r\n    let [loginData] = useState(globalization.baseData.loginData);\r\n    let navigate = useNavigate(); //react-router-dom\r\n    //编辑步骤提示\r\n    let [activeStep, setActiveStep] = useState(0);\r\n    //产品信息汇总\r\n    let product_id = location.pathname.replace('/product/', ''); //产品id\r\n    let [productInfo, setProductInfo] = useState({}); //产品信息\r\n    let [finalAttributeArr, setFinalAttributeArr] = useState([]); //在用的属性列表\r\n    let [finalImageArr, setFinalImageArr] = useState([]); //在用的图片列表\r\n    let [finalDescription, setFinalDescription] = useState(''); //在用的产品详情\r\n    let [finalCatId, setFinalCatId] = useState(0); //当前产品类目id\r\n    let [categories, setCategories] = useState([]); //当前产品类目\r\n    let categoryArr = []; //当前产品类目(暂存)\r\n    let menuRef = useRef(null);\r\n    let [menuState, setMenuState] = useState({\r\n        menuLevel: undefined,\r\n        menuValue: undefined,\r\n        menuArr: [],\r\n        anchorEl: null\r\n    });\r\n    //产品主图相关\r\n    let photoCols = useMediaQuery(useTheme().breakpoints.down('md')) ? 3 : 6;\r\n    let uploaderRef = useRef(null); //上传表单\r\n    //产品属性相关\r\n    let [allAttributeArr, setAllAttributeArr] = useState([]); //当前类目下的所有可用属性列表\r\n\r\n    useEffect(() => {\r\n        if (!categories.length) return;\r\n        let categoryResult = categories[categories.length - 1];\r\n        let cat_id = categoryResult.category_id;\r\n        setFinalCatId(cat_id);\r\n        if (cat_id) getCategoryAttributeInfo({ cat_id });\r\n        //console.log(categories, categoryResult.category_id);\r\n        return; //类目调整 返回最新的类目id\r\n    }, [categories]);\r\n\r\n    useEffect(() => {\r\n        console.log('description changed ');\r\n        if (finalDescription) {\r\n            if (!productInfo.description) return; //待初始化\r\n            if (finalDescription.length > 60000) return queryResult(false, langPack.form.descriptionOverflow);\r\n            if (finalDescription === productInfo.description) return; //未修改\r\n            productModified.description = finalDescription;\r\n        }\r\n        return; //编辑器内容改变时\r\n    }, [finalDescription]);\r\n\r\n    useEffect(() => {\r\n        setLangPack(Languages[localization.locale]);\r\n        return; //语言切换\r\n    }, [localization.locale]);\r\n\r\n    useEffect(() => {\r\n        console.log('I want product editing');\r\n        if (!loginData) return navigate('/');\r\n        getProductInfo({ product_id });\r\n        return () => {\r\n            console.log('I leave product edit');\r\n            productModified = {};\r\n        }; //载入 & 清理\r\n    }, []);\r\n\r\n    //____________一些函数_______________________________________________\r\n    async function uploadPhotos(photoFile) {\r\n        let currentFolder = -1;\r\n        let paramObj = ma.photoUploadQuery({ file_name: photoFile.name, image_bytes: photoFile, group_id: currentFolder });\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.yes);\r\n        let res = ma.photoUploadCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(false, result);\r\n        queryResult(true, langPack.steps.uploadSuccess);\r\n        return setFinalImageArr((prev) => {\r\n            if (prev.length >= 6) return prev;\r\n            let newArr = [result.photobank_url, ...prev];\r\n            productModified.main_image = { images: newArr.toString() };\r\n            return newArr;\r\n        });\r\n    }\r\n\r\n    async function updateProductInfo(obj) {\r\n        let paramObj = ma.productFieldUpdateQuery(obj);\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productFieldUpdateCheck(msg);\r\n        let { status, result } = res.response;\r\n        queryResult(status, result);\r\n        console.log(result);\r\n        return true;\r\n    } //更新产品信息\r\n\r\n    async function getProductInfo(obj) {\r\n        let paramObj = ma.productDetailQuery(obj);\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productDetailCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        console.log(result);\r\n        if (result.attributes.product_attribute) {\r\n            let attributeArr = [...result.attributes.product_attribute];\r\n            attributeArr.sort((a, b) => a.attribute_id - b.attribute_id);\r\n            setFinalAttributeArr(attributeArr);\r\n        }\r\n        if (result.main_image.images.string) {\r\n            setFinalImageArr(result.main_image.images.string);\r\n        }\r\n        if (result.description) {\r\n            setFinalDescription(result.description);\r\n        }\r\n        setProductInfo(result);\r\n        if (result.category_id) getAllCategories(result.category_id);\r\n    } //获取产品信息\r\n\r\n    async function getCategoryInfo(obj) {\r\n        let paramObj = ma.productCategoryQuery(obj);\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productCategoryCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        return result;\r\n    } //获取类目信息\r\n\r\n    async function getCategoryAttributeInfo(obj) {\r\n        let paramObj = ma.productCategoryAttributeQuery(obj);\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productCategoryAttributeCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        console.log(result);\r\n        return setAllAttributeArr(result);\r\n    } //获取类目属性信息\r\n\r\n    async function getAllCategories(category_id, category_level) {\r\n        if (!category_level) {\r\n            let categoryResult = await getCategoryInfo({ cat_id: category_id });\r\n            if (!categoryResult) return;\r\n            let { level, parent_ids } = categoryResult;\r\n            if (!categoryArr.length) categoryArr = new Array(level); //初始化模式\r\n            categoryArr[level] = categoryResult;\r\n            if (level > 0 && parent_ids && parent_ids.number) {\r\n                let cat_id = parent_ids.number[0];\r\n                getAllCategories(cat_id);\r\n            } else {\r\n                setCategories(categoryArr);\r\n            }\r\n            return;\r\n        }\r\n        let categoryResult = categories[category_level - 1].child_ids.number.find((obj) => obj.category_id === category_id);\r\n        if (!categoryResult) return;\r\n        let { child_ids } = categoryResult;\r\n        let newCategories = [...categories];\r\n        newCategories[category_level] = categoryResult;\r\n        if (category_level + 1 < newCategories.length) newCategories.length = category_level + 1;\r\n        if (child_ids) {\r\n            newCategories.push({ category_id: 0 });\r\n            categoryArr = newCategories;\r\n            showMenu(newCategories.length - 1);\r\n        }\r\n        return setCategories(newCategories); //修改类目模式\r\n    }\r\n\r\n    const showMenu = async (index) => {\r\n        let latestCategories = categoryArr.length ? categoryArr : categories;\r\n        let category_id = latestCategories[index].category_id;\r\n        let childIdsArr = latestCategories[index - 1].child_ids.number;\r\n        for (let cat_id of childIdsArr) {\r\n            if (typeof cat_id === 'object') break;\r\n            let categoryResult = await getCategoryInfo({ cat_id });\r\n            childIdsArr[childIdsArr.indexOf(cat_id)] = categoryResult;\r\n        }\r\n        setMenuState({ menuLevel: index, menuValue: category_id, menuArr: childIdsArr, anchorEl: menuRef.current });\r\n    }; //获取当前的类目id & 通过父级获取子类目选项\r\n    const closeMenu = (category_id) => {\r\n        let { menuLevel } = menuState;\r\n        setMenuState({ menuArr: [], anchorEl: null });\r\n        console.log(category_id);\r\n        if (category_id !== undefined && category_id !== finalCatId) getAllCategories(category_id, menuLevel);\r\n    }; //需要更新类目\r\n\r\n    const onPhotoSelected = async (e) => {\r\n        let files = e.target.files;\r\n        if (!files.length) return;\r\n        for (let file of files) {\r\n            await uploadPhotos(file);\r\n        }\r\n        e.target.files = null;\r\n    };\r\n\r\n    const onDoubleClickImageBtn = (url) => {\r\n        if (finalImageArr.length <= 1) return queryResult(false, langPack.steps.mainPhotoRequired);\r\n        let newArr = finalImageArr.filter((imageUrl) => imageUrl !== url);\r\n        productModified.main_image = { images: newArr.toString() };\r\n        return setFinalImageArr(newArr);\r\n    };\r\n\r\n    const onAttributeClear = () => {\r\n        let attributeArr = [];\r\n        if (!finalAttributeArr.length) return;\r\n        attributeArr = [...finalAttributeArr];\r\n        attributeArr = attributeArr.filter((obj) => obj.value_name);\r\n        productModified.attributes = attributeArr;\r\n        return setFinalAttributeArr(attributeArr);\r\n    }; //最后确认\r\n\r\n    const onAttributeAdd = (attributeSelected) => {\r\n        console.log(attributeSelected);\r\n        let { attr_id, attr_value, en_name, input_type } = attributeSelected;\r\n        if (!attr_id) return console.log('缺少关键id');\r\n        let attributeArr = [];\r\n        if (finalAttributeArr.length) {\r\n            attributeArr = [...finalAttributeArr];\r\n            if (finalAttributeArr.find((obj) => obj.attribute_id === attr_id)) {\r\n                if (/multi/gi.test(input_type)) {\r\n                    if (attr_value && attr_value.attr_value_id) {\r\n                        attributeArr = attributeArr.filter((obj) => obj.value_id !== attr_value.attr_value_id);\r\n                    } //多选模式下排除重复值👆 单选的话排除重复属性👇\r\n                } else {\r\n                    attributeArr = attributeArr.filter((obj) => obj.attribute_id !== attr_id);\r\n                    queryResult(false, langPack.form.attributeDuplicated);\r\n                }\r\n            } //如果有重复的，替换并提醒用户\r\n        }\r\n        let attributeObj = {\r\n            attribute_id: attr_id,\r\n            attribute_name: en_name,\r\n            value_name: ''\r\n        };\r\n        if (attr_value) {\r\n            attributeObj.value_id = attr_value.attr_value_id;\r\n            attributeObj.value_name = attr_value.en_name;\r\n        }\r\n        let newArr = [attributeObj, ...attributeArr];\r\n        productModified.attributes = newArr;\r\n        setFinalAttributeArr(newArr);\r\n        console.log(attributeObj);\r\n    }; //添加新属性\r\n\r\n    const arrayDataReplacer = (newData, oldArr, searchKey) => {\r\n        let newArr = [...oldArr];\r\n        if (newArr.length) {\r\n            let oldIndex = newArr.findIndex((obj) => obj[searchKey] === newData[searchKey]);\r\n            //查找是否有旧的数据，找到匹配项则替换，没有则添加\r\n            if (oldIndex !== -1) newArr[oldIndex] = newData;\r\n            else newArr.push(newData);\r\n        } else newArr.push(newData);\r\n        return newArr;\r\n    };\r\n    const objectCheck = (obj) => {\r\n        return typeof obj === 'object' && obj !== null && !Array.isArray(obj);\r\n    }; //检查是否为[Object object]\r\n\r\n    const onAttributeModified = (key, value) => {\r\n        if (!value) return queryResult(false, langPack.steps.modificationNull);\r\n        //部分数据比较复杂，单独处理\r\n        if (/attributes|bulk_discount_prices/g.test(key)) {\r\n            let oldArr;\r\n            let searchKey;\r\n            if (key === 'attributes') {\r\n                searchKey = 'attribute_id';\r\n                oldArr = finalAttributeArr;\r\n                let newArr = arrayDataReplacer(value, oldArr, searchKey);\r\n                productModified.attributes = newArr;\r\n                return setFinalAttributeArr(newArr);\r\n            } else if (key === 'bulk_discount_prices') {\r\n                searchKey = 'start_quantity';\r\n                //oldArr = [];\r\n                return console.log('待部署'); //待部署\r\n            } //数组类型，需要查找/替换，可考虑提前return，如有必要\r\n        } else if (key === 'keywords') {\r\n            value = value.split(',');\r\n            value = value.map((str) => str.trim());\r\n            if (value.length > 3) value.length = 3;\r\n            productModified.keywords = String(value);\r\n            return productModified;\r\n        } else if (key === 'subject') {\r\n            if (value.length > 128) return queryResult(false, langPack.form.subject);\r\n            productModified.subject = value;\r\n            return productModified;\r\n        } //先初始化数据容器，如果之前没有数据的话\r\n        if (productModified[key] === undefined) {\r\n            productModified[key] = JSON.parse(JSON.stringify(productInfo[key]));\r\n            if (key === 'sourcing_trade') {\r\n                if (productModified[key]['payment_methods']) {\r\n                    let payment_methods = productModified[key]['payment_methods']['string'];\r\n                    productModified[key]['payment_methods'] = payment_methods;\r\n                }\r\n                if (productModified[key]['deliver_periods']) {\r\n                    let deliver_periods = productModified[key]['deliver_periods']['deliver_period'];\r\n                    productModified[key]['deliver_periods'] = deliver_periods;\r\n                }\r\n            }\r\n        }\r\n        productModified[key] = objectCheck(productModified[key]) ? { ...productModified[key], ...value } : value;\r\n        return productModified;\r\n    }; //转换成最终的key/value, 如果是数组，则需要查找&替换\r\n    const modificationSubmission = () => {\r\n        let modifiedKeys = Object.keys(productModified);\r\n        if (!modifiedKeys.length) return queryResult(false, langPack.steps.modificationNull);\r\n        let dataObj = {\r\n            category_id: finalCatId,\r\n            product_id: productInfo.product_id,\r\n            product_type: productInfo.product_type\r\n        }; //默认提交的数据\r\n        for (let [k, v] of Object.entries(productModified)) {\r\n            dataObj[k] = typeof v == 'object' ? JSON.stringify(v) : v;\r\n        } //带上修改的数据\r\n        console.log(dataObj);\r\n        updateProductInfo(dataObj);\r\n    };\r\n\r\n    //____________Functions return JSX_______________________________________________\r\n    function ModificationConfirmation() {\r\n        let modifiedKeys = Object.keys(productModified);\r\n        if (!modifiedKeys.length) return <Typography variant=\"h2\">{langPack.steps.modificationNull}</Typography>;\r\n        return (\r\n            <>\r\n                <Typography variant=\"h2\">{langPack.steps.modificationDone}</Typography>\r\n                <List>\r\n                    {modifiedKeys.map((key) => (\r\n                        <ListItem key={key}>-- {key}</ListItem>\r\n                    ))}\r\n                </List>\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <MainCard title=\"Product Edit --产品编辑\">\r\n            <EditStep langPack={langPack} activeStep={activeStep} setActiveStep={setActiveStep} />\r\n            {activeStep === 0 ? (\r\n                <>\r\n                    <ProductCategory\r\n                        localization={localization}\r\n                        categories={categories}\r\n                        menuRef={menuRef}\r\n                        menuState={menuState}\r\n                        showMenu={showMenu}\r\n                        closeMenu={closeMenu}\r\n                    />\r\n                    <PhotoGallery\r\n                        localization={localization}\r\n                        finalImageArr={finalImageArr}\r\n                        imageSizing={{ width: 30, height: 30 }}\r\n                        photoCols={photoCols}\r\n                        rowHeight={200}\r\n                        uploaderRef={uploaderRef}\r\n                        onDoubleClickImageBtn={onDoubleClickImageBtn}\r\n                        onPhotoSelected={onPhotoSelected}\r\n                        langPack={langPack}\r\n                    />\r\n                    <ProductAttribute\r\n                        {...productInfo}\r\n                        langPack={langPack}\r\n                        finalAttributeArr={finalAttributeArr}\r\n                        allAttributeArr={allAttributeArr}\r\n                        onAttributeAdd={onAttributeAdd}\r\n                        onAttributeClear={onAttributeClear}\r\n                        onAttributeModified={onAttributeModified}\r\n                    />\r\n                </>\r\n            ) : activeStep === 1 ? (\r\n                <>\r\n                    <ProductDetail\r\n                        localization={localization}\r\n                        finalDescription={finalDescription}\r\n                        setFinalDescription={setFinalDescription}\r\n                        langPack={langPack}\r\n                    />\r\n                </>\r\n            ) : activeStep === 2 ? (\r\n                <>\r\n                    <ModificationConfirmation />\r\n                    <Confirmation langPack={langPack} modificationSubmission={modificationSubmission} />\r\n                </>\r\n            ) : (\r\n                <></>\r\n            )}\r\n        </MainCard>\r\n    );\r\n};\r\n\r\nexport default App;\r\n"],"sourceRoot":""}