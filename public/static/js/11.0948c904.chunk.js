(this["webpackJsonperp-dashboard"]=this["webpackJsonperp-dashboard"]||[]).push([[11],{329:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={enUS:{folder:{currentFolder:"please select",needFolderName:"please input name for new folder",addNewFolder:"add new folder",folderNull:"folder not found",dataNull:"data not found"},table:{tableHeader:"Products",categoryName:"category name",productId:"product id",subject:"subject",status:"status",display:"display",id:"id",is_rts:"RTS",is_specific:"specific",owner_member_display_name:"owner",product_type:"type",smart_edit:"smart edit",attributes:"attributes",keywords:"keywords",price:"price (range)",payment_methods:"payment methods",min_order_quantity:"min order quantity(MOQ)",unit_type:"unit type",gmt_create:"date create",gmt_modified:"date modified",score:"score",tag:"tag"},tableToolbar:{menuHide:"hide menu",menuShow:"show menu",productScore:"scores",productDisplayOn:"in-stock",productDisplayOff:"out-stock",productUpdate:"update",productEdit:"edit"},form:{KeyInformation:"key information",ProductAttributes:"product attributes",subject:"128 letters max.",category:"click to change category",keywords:"3 keywords max. Comma(,) separated",price:"set price (range)",payment_methods:"payment methods such as T/T, L/C, etc.",min_order_quantity:"optional",attributes:"add or delete",attributeMissing:"attribute missing",attributeDuplicated:"attribute duplicated",pieces:"pieces"},steps:{first:"Edit Attributes",second:"Edit Contents",finally:"Preview & Publish",previous:"Previous",next:"Next",complete:"Complete",editPrice:"Edit Price",choosePhotos:"Choose Photos",uploadPhotos:"Upload Photos",removePhotos:"double click to remove the photo",photoUploadTip:"If it cannot be updated, please remove ALL photos and try again",productDescriptionTip:"Tips: \u2460 If it cannot be updated, please remove ALL contents and try again. \u2461Click the red button below \ud83d\udc47 to unlock photo resizing",mainPhotoRequired:"Need at least one photo",descriptionOverflow:"description length shall be smaller than 60k letters",panel1:"subject, keywords, price, MOQ...",panel2:"all kinds of attributes...",addAttributes:"Add Attributes",removeAttributes:"Remove Attributes",modificationNull:"No modification made",modificationDone:"Will submit the following modifications:",uploadSuccess:"Upload Success",productScoreError:"no score found"},productScore:{basic:"Basic",potential:"Potential",super:"Super",top:"Top"},common:{yes:"OK",no:"Cancel",netFail:"request failed"}},zhCN:{folder:{currentFolder:"\u8bf7\u9009\u62e9",needFolderName:"\u8bf7\u586b\u5199\u6587\u4ef6\u5939\u540d",addNewFolder:"\u65b0\u5efa\u6587\u4ef6\u5939",folderNull:"\u6587\u4ef6\u5939\u4e0d\u5b58\u5728",dataNull:"\u6570\u636e\u4e0d\u5b58\u5728"},table:{tableHeader:"\u4ea7\u54c1",categoryName:"\u7c7b\u76ee",productId:"\u4ea7\u54c1 id",subject:"\u6807\u9898",status:"\u5ba1\u6838\u72b6\u6001",display:"\u4e0a\u67b6\u72b6\u6001",id:"id",is_rts:"RTS",is_specific:"\u89c4\u683c\u54c1",owner_member_display_name:"\u8d1f\u8d23\u4eba",product_type:"\u5546\u54c1\u7c7b\u578b",smart_edit:"\u667a\u80fd\u7f16\u8f91",attributes:"\u5c5e\u6027",keywords:"\u5173\u952e\u8bcd",price:"\u4ef7\u683c(\u533a\u95f4)",payment_methods:"\u652f\u4ed8\u65b9\u5f0f",min_order_quantity:"\u6700\u5c0f\u8d77\u8ba2\u91cf(MOQ)",unit_type:"\u5355\u4f4d",gmt_create:"\u521b\u5efa\u65e5\u671f",gmt_modified:"\u4fee\u6539\u65e5\u671f",score:"\u4ea7\u54c1\u5206",tag:"\u6807\u7b7e"},tableToolbar:{menuHide:"\u9690\u85cf\u83dc\u5355",menuShow:"\u663e\u793a\u83dc\u5355",productScore:"\u4ea7\u54c1\u5206",productDisplayOn:"\u4e0a\u67b6",productDisplayOff:"\u4e0b\u67b6",productUpdate:"\u66f4\u65b0",productEdit:"\u7f16\u8f91"},form:{KeyInformation:"\u57fa\u672c\u4fe1\u606f",ProductAttributes:"\u4ea7\u54c1\u5c5e\u6027",subject:"128 \u5b57\u7b26\u4ee5\u5185",category:"\u70b9\u51fb\u66f4\u6362\u7c7b\u76ee",keywords:"\u6700\u591a\u4e09\u4e2a\u5173\u952e\u8bcd\uff0c\u7528\u82f1\u6587\u9017\u53f7(,)\u5206\u9694",price:"\u8bbe\u7f6e\u4ef7\u683c(\u533a\u95f4)",payment_methods:"\u652f\u4ed8\u65b9\u5f0f\uff0c\u4f8b\u5982\uff1aT/T\uff0cL/C\uff0c\u7b49",min_order_quantity:"\u9009\u586b",attributes:"\u53ef\u589e\u53ef\u51cf",attributeMissing:"\u5c5e\u6027\u7f3a\u5931",attributeDuplicated:"\u5c5e\u6027\u91cd\u590d",pieces:"\u4ef6"},steps:{first:"\u5c5e\u6027\u7f16\u8f91",second:"\u8be6\u60c5\u7f16\u8f91",finally:"\u9884\u89c8&\u53d1\u5e03",previous:"\u4e0a\u4e00\u6b65",next:"\u4e0b\u4e00\u6b65",complete:"\u5b8c\u6210",editPrice:"\u7f16\u8f91\u4ef7\u683c",choosePhotos:"\u9009\u62e9\u56fe\u7247",uploadPhotos:"\u4e0a\u4f20\u56fe\u7247",removePhotos:"\u53cc\u51fb\u79fb\u9664\u56fe\u7247",photoUploadTip:"\u82e5\u65e0\u6cd5\u66f4\u65b0\uff0c\u8bf7\u6e05\u9664\u6240\u6709\u56fe\u7247\u540e\u91cd\u8bd5",productDescriptionTip:"\u63d0\u793a: \u2460\u82e5\u65e0\u6cd5\u66f4\u65b0\uff0c\u8bf7\u6e05\u9664\u6240\u6709\u8be6\u60c5\u540e\u91cd\u8bd5 \u2461\u539f\u5148\u662f\u667a\u80fd\u7f16\u8f91\u7684\u60c5\u51b5\u4e0b\uff0c\u987b\u70b9\u51fb\u4e0b\u65b9\u7ea2\u8272\u6309\u94ae\u89e3\u9501\u56fe\u7247\u7f29\u653e\ud83d\udc47",mainPhotoRequired:"\u9700\u8981\u4fdd\u7559\u81f3\u5c11\u4e00\u5f20\u4e3b\u56fe",descriptionOverflow:"\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc76\u4e07\u5b57\u7b26",panel1:"\u6807\u9898\uff0c\u5173\u952e\u8bcd\uff0c\u4ef7\u683c\uff0cMOQ...",panel2:"\u5404\u7c7b\u5c5e\u6027...",addAttributes:"\u6dfb\u52a0\u5c5e\u6027",removeAttributes:"\u79fb\u9664\u7a7a\u767d\u5c5e\u6027",modificationNull:"\u6ca1\u6709\u4efb\u4f55\u4fee\u6539",modificationDone:"\u5c06\u63d0\u4ea4\u5982\u4e0b\u5185\u5bb9:",uploadSuccess:"\u4e0a\u4f20\u6210\u529f",productScoreError:"\u4ea7\u54c1\u5206\u672a\u67e5\u5230"},productScore:{basic:"\u4f4e\u8d28\u54c1",potential:"\u666e\u901a\u54c1",super:"\u5b9e\u529b\u4f18\u54c1",top:"\u7cbe\u54c1"},common:{yes:"\u786e\u5b9a",no:"\u53d6\u6d88",netFail:"\u8bf7\u6c42\u5931\u8d25"}}}},436:function(e,t,r){"use strict";r.r(t);var n=r(8),a=r(18),i=r(35),c=r.n(i),o=r(108),s=r(53),u=r(13),l=r(0),d=r(23),p=r(16),b=r(268),j=r(85),f=r(289),m=r(443),h=r(22),g=r(87),O=r(329),x=r(442),_=r(449),v=r(438),y=r(361),A=r(293),k=r(223),w=r(1);var C=function(e){var t=e.langPack,r=e.activeStep,n=e.setActiveStep,a=Object(l.useState)([t.steps.first,t.steps.second,t.steps.finally]),i=Object(u.a)(a,1)[0];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(x.a,{activeStep:r,children:i.map((function(e){return Object(w.jsx)(_.a,{children:Object(w.jsx)(v.a,{children:e})},e)}))}),Object(w.jsxs)(y.a,{variant:"contained",color:"secondary",disableElevation:!0,sx:{display:"flex",flexDirection:"row",pt:2,paddingBottom:"10px"},children:[Object(w.jsx)(A.a,{disabled:0===r,onClick:function(){n((function(e){return e-1}))},sx:{mr:1},children:t.steps.previous}),Object(w.jsx)(k.a,{sx:{flex:"1 1 auto"}}),Object(w.jsx)(A.a,{disabled:2===r,onClick:function(){n((function(e){return e+1}))},children:r===i.length-1?t.steps.complete:t.steps.next})]})]})},S=r(282),P=r(388),D=r(152),I=r(446),E=r(424),F=r(425),N=r(6),R=r(52),T=r(423),q=Object(N.a)(S.a)((function(){var e=T.a[100];return{backgroundColor:e,height:40,"&:hover, &:focus":{backgroundColor:Object(R.c)(e,.06)},"&:active":{boxShadow:10,backgroundColor:Object(R.c)(e,.12)}}}));var M=function(e){var t=e.localization,r=e.categories,n=e.menuRef,a=e.menuState,i=e.showMenu,c=e.closeMenu,o=a.menuArr,s=a.anchorEl;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{sx:{display:"inline-flex",paddingTop:"10px"},children:r.map((function(e,r){if(r>0)return Object(w.jsx)(q,{sx:a.menuLevel===r?{display:"none"}:{},component:"a",href:"#",label:"zhCN"!==t.locale?e.name:e.cn_name,icon:1===r?Object(w.jsx)(E.a,{}):void 0,deleteIcon:Object(w.jsx)(F.a,{}),onDelete:function(){return i(r)}},e.category_id)}))}),Object(w.jsx)("span",{ref:n}),Object(w.jsx)("div",{children:Object(w.jsx)(D.a,{anchorEl:s,open:Boolean(s),onClose:function(){return c()},children:o.map((function(e){return Object(w.jsx)(I.a,{onClick:function(){return c(e.category_id)},children:"zhCN"!==t.locale?e.name:e.cn_name},e.category_id)}))})})]})},Q=r(450),z=r(451),U=r(452),B=r(447),L=r(288),K=r(448),V=r(269),Y=r(426),G=r(427),J=r(378);var X=function(e){var t=e.finalImageArr,r=e.imageSizing,a=e.photoCols,i=e.rowHeight,c=e.uploaderRef,o=e.onDoubleClickImageBtn,s=e.onPhotoSelected,u=e.langPack,l=r.width,d=r.height;return Object(w.jsxs)(Q.a,{cols:a,rowHeight:i,sx:{marginTop:"10px",marginBottom:"10px"},variant:"quilted",gap:2,children:[t.map((function(e,t){return Object(w.jsxs)(z.a,{cols:1,rows:1,children:[Object(w.jsx)("img",Object(n.a)(Object(n.a)({},srcset(e,l,d,1,1)),{},{alt:t+1,loading:"lazy"})),Object(w.jsx)(U.a,{sx:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},title:t+1,position:"top",actionIcon:Object(w.jsx)(B.a,{title:u.steps.removePhotos,children:Object(w.jsx)(L.a,{sx:{color:t?"yellow":"white"},"aria-label":"star ".concat(t+1),onDoubleClick:function(){return o(e)},children:Object(w.jsx)(Y.a,{})})}),actionPosition:"left"})]},t)})),t.length<6?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(K.a,{sx:{display:"none"},ref:c,control:Object(w.jsx)(V.a,{type:"file",inputProps:{multiple:!0}}),label:Object(w.jsx)(G.a,{}),onChange:s}),Object(w.jsx)(B.a,{title:u.steps.photoUploadTip,children:Object(w.jsx)(A.a,{startIcon:Object(w.jsx)(J.a,{}),onClick:function(){return c.current.click()}},"uploader")})]}):null]})},Z=r(3),H=r(445),W=r(453),$=r(454),ee=r(278),te=r(286),re=r(213),ne=r(339),ae=r(340),ie=r(375),ce=r(377);var oe=function(e){var t=e.langPack,r=e.expanded,a=e.setExpanded,i=e.sourcing_trade,c=e.subject,o=e.keywords,s=e.finalAttributeArr,d=e.allAttributeArr,p=e.onAttributeAdd,b=e.onAttributeModified,f=e.onAttributeClear,m=Object(l.useState)(!1),h=Object(u.a)(m,2),g=h[0],O=h[1],x=Object(l.useState)(""),_=Object(u.a)(x,2),v=_[0],y=_[1],k=Object(l.useState)([]),C=Object(u.a)(k,2),S=C[0],P=C[1],D=function(e){return function(t,r){a((function(t){return Object(n.a)(Object(n.a)({},t),{},Object(Z.a)({},e,r))}))}};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)(H.a,{expanded:r.panel1,onChange:D("panel1"),children:[Object(w.jsxs)(W.a,{expandIcon:Object(w.jsx)(F.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:[Object(w.jsx)(j.a,{variant:"h2",sx:{width:"33%",flexShrink:0,color:"orangered",display:"inline"},children:t.form.KeyInformation}),Object(w.jsx)(j.a,{sx:{color:"text.secondary"},children:t.steps.panel1})]}),Object(w.jsxs)($.a,{children:[Object(w.jsx)(B.a,{title:t.form.subject,children:Object(w.jsx)(ee.a,{margin:"normal",fullWidth:!0,id:"subject",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.subject}),defaultValue:c,onChange:function(e){return b("subject",e.target.value)}},c)}),Object(w.jsx)(B.a,{title:t.form.keywords,children:Object(w.jsx)(ee.a,{margin:"normal",fullWidth:!0,id:"keywords",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.keywords}),defaultValue:o?String(o.string):"",onChange:function(e){return b("keywords",e.target.value)}},o)}),Object(w.jsx)(B.a,{title:t.form.price,children:Object(w.jsx)(ee.a,{margin:"normal",id:"price",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.price}),InputProps:{startAdornment:Object(w.jsx)(te.a,{position:"start",children:i?i.fob_currency:"USD"})},defaultValue:i?i.fob_max_price===i.fob_min_price?i.fob_min_price:"".concat(i.fob_min_price," ~ ").concat(i.fob_max_price):"",onChange:function(e){var t=e.target.value;if(""===t.trim())return b("sourcing_trade",{fob_min_price:""});t=t.trim().replace(/\s/g,"");var r=/~|-/g.test(t)?"~":"-",n=t.split(r),a=n[0],c=n[1];Number(a)>=Number(c)&&(c="");var o=i.fob_currency,s=i.fob_unit_type;b("sourcing_trade",{fob_min_price:a,fob_max_price:c,fob_currency:o,fob_unit_type:s})}},i)}),Object(w.jsx)(B.a,{title:t.form.min_order_quantity,children:Object(w.jsx)(ee.a,{margin:"normal",id:"min_order_quantity",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.min_order_quantity}),defaultValue:i&&i.min_order_quantity?i.min_order_quantity:"",InputProps:{endAdornment:Object(w.jsx)(te.a,{position:"end",children:i?i.min_order_unit_type:t.form.pieces})},onChange:function(e){var t=i.min_order_unit_type,r=e.target.value||"1";b("sourcing_trade",{min_order_quantity:r,min_order_unit_type:t})}},i)}),Object(w.jsx)(B.a,{title:t.form.payment_methods,children:Object(w.jsx)(ee.a,{margin:"normal",id:"payment_methods",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.payment_methods}),defaultValue:i&&i.payment_methods?String(i.payment_methods.string):"",onChange:function(e){var r=e.target.value;if(""===r.trim())return queryResult(!1,t.form.attributeMissing);r=r.split(","),b("sourcing_trade",{payment_methods:r})}},i)})]})]}),Object(w.jsxs)(H.a,{expanded:r.panel2,onChange:D("panel2"),children:[Object(w.jsxs)(W.a,{expandIcon:Object(w.jsx)(F.a,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:[Object(w.jsx)(j.a,{variant:"h2",sx:{width:"33%",flexShrink:0,color:"darkorange",display:"inline"},children:t.form.ProductAttributes}),Object(w.jsx)(j.a,{sx:{color:"text.secondary"},children:t.steps.panel2})]}),Object(w.jsx)($.a,{children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{paddingTop:"10px",paddingBottom:"20px"},children:g?Object(w.jsx)(w.Fragment,{children:d.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(ee.a,{id:"add-attribute",select:!0,sx:{minWidth:"120px",padding:"5px","& .MuiOutlinedInput-root":{height:"29px",padding:"1px"}},value:v&&v.attr_id?v.attr_id:"",onChange:function(e){var t=d.find((function(t){return t.attr_id===e.target.value}));if(!t)return console.log("\u5c5e\u6027\u4e0d\u5c5e\u4e8e\u8be5\u7c7b\u76ee\uff1f");y(t);var r=t.attribute_values.attribute_value;P(r||[])},children:[Object(w.jsx)(I.a,{value:"",disabled:!0},""),d.map((function(e){return Object(w.jsx)(I.a,{value:e.attr_id,children:e.en_name},e.attr_id)}))]}),S.length?Object(w.jsx)(ee.a,{id:"add-attribute-if-single-select",select:!0,value:v.attr_value&&v.attr_value.attr_value_id?v.attr_value.attr_value_id:"",onChange:function(e){var t=S.find((function(t){return t.attr_value_id===e.target.value}));if(!t)return console.log("\u9009\u9879\u4e0d\u662f\u8be5\u5c5e\u6027\u7684\u9009\u9879\uff1f");y((function(e){return Object.assign({},e,{attr_value:t})}))},variant:"standard",children:S.map((function(e){return Object(w.jsx)(I.a,{value:e.attr_value_id,children:e.en_name},String(e.attr_value_id))}))}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(A.a,{startIcon:Object(w.jsx)(ne.a,{}),onClick:function(){return p(v)},children:t.common.yes}),Object(w.jsx)(A.a,{startIcon:Object(w.jsx)(ae.a,{}),onClick:function(){return O((function(e){return!e}))},children:t.common.no})]}):Object(w.jsx)(j.a,{variant:"body1",children:t.form.attributeMissing})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(B.a,{title:t.steps.addAttributes,children:Object(w.jsx)(A.a,{variant:"standard",onClick:function(){return O((function(e){return!e}))},children:Object(w.jsx)(ie.a,{})})}),Object(w.jsx)(B.a,{title:t.steps.removeAttributes,children:Object(w.jsx)(A.a,{variant:"standard",onClick:f,children:Object(w.jsx)(ce.a,{})})})]})}),Object(w.jsx)(re.a,{}),Object(w.jsx)("br",{}),s.length&&s.map((function(e){return Object(w.jsx)(B.a,{title:t.form.attributes,children:Object(w.jsx)(ee.a,{margin:"normal",id:String(e.attribute_name+e.value_name),variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:e.attribute_name}),defaultValue:e.value_name,onBlur:function(t){t.target.value!==e.value_name&&b("attributes",{attribute_id:e.attribute_id,attribute_name:e.attribute_name,value_name:t.target.value})}})},e.value_name+e.attribute_id)}))]})})]})]}),Object(w.jsx)(re.a,{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]})},se=r(383),ue=r.n(se);var le=function(e){var t=e.localization,r=e.finalDescription,n=e.setFinalDescription,a=e.langPack,i=Object(l.useRef)(null),c={language:"zhCN"===t.locale?"zh_cn":"en_us",enter:"DIV",defaultActionOnPaste:"insert_clear_html",toolbarAdaptive:!1,buttons:["source","bold","italic","underline","eraser","ul","ol","left","font","fontsize","brush","image","copyformat","copy","paste","table","link",{iconURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAK/SURBVHhe7ZvhTcMwEIXZAEZgA9gANigbwAaMABuUDegGjAAbMAIjMIK5JxIp5OyzL02I3bxPej9aXdLzp8RO0/QsEBcU5oTCnFCYEwpzQmFOKMzJ/wj7+Kgnn59dU9NYTtjhEMLlpXyCfESNubsL4f29a7Yc2XIBHh50g7Xm9bVrugzZYmaennRTtcdxpEn1jHx/62ZayG7XDSCPVM8IDu9YQy2kkPLKElKn49VVCDc3deT8PN5j4eoplTOSEjZhNVoMSDuiR6mcEQpzQmFOKMzJ5oV9fYXw/KyTujrevDDsJLZzfGgMCqOwMVJpQGEKqTSgMIVUGlCYQioNKEwhlQYUppBKAwpTSKUBhSmk0oDCFFJpQGEKqTSgMIVUGlCYQioNaheGuyleNisMsi4uQtjvuzcK2aQw/P55fT1t/yclDI8YQEaO8aMIONJKT8+TEfb4+FsLGRY4Bcf7R3DElXASwt7e/tanboGn+umTkw2aF9ZP3sN6vB7/Eh2riyX3NE7zwoaT9zB4v5/PxpN8LtbP/k0L6+etVPpTbDzJ54IjMbV4NCtsPG+lgicFY+/nkloEmhRWOh8dm9gi0KQwz3x0bMaLQHPCMABs/58Zzmd4nevRQCoNlhC2NhTmpAlhLy/xPxmskdT8uYqw1Pe8FlKIXekVhivsWH3twUPLhUi1gVcYSM0RNSf3/XOAVBtMEYaL0tSj3TXm/r5rvAzZwmCKMABpLRxpWKScyFYGU4X1YE7DQoDGagpOwZI7uxFk9AbHCjtBZPQGFKaQ0RtQmEJGb0BhChm9AYUpZPQGqSt33Py7va07jotRDzL6DDFhLQSXDwsge86Av/fGGqo9qwlLzWO1ZzVhAPNBrKmas6owgCOtpdNzdWFDsHpCYM3BDYAFmCZsw1CYEwpzQmFOKMwJhTmhMCcU5oTCXITwA9i8QLpYTlc4AAAAAElFTkSuQmCC",tooltip:"Clear Image style",exec:function(e,t,r){var n=e.value,a=(n=(n=n.replace(/\n/gi,"")).replace(/>/gi,">\n")).split("\n");n=(a=a.map((function(e){return/<img src/gi.test(e)?e=/ class="magic-(\d{1,3})x000"/gi.test(e)?e.replace(/x000/gi,""):e.replace(/ class="magic-(\d{1,3})"/gi,' class="magic-$1x000"'):e}))).join(""),e.value=n}}],events:{paste:function(e){console.log("\u7c98\u8d34...",e);var t=e.clipboardData&&e.clipboardData.items;if(t&&t.length)return console.log(t)},beforePasteInsert:function(e){console.log("\u7c98\u8d34\u5185\u5bb9\u690d\u5165\u524d...")}}};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{variant:"h4",sx:{paddingTop:"6px",paddingBottom:"6px",color:"orangered"},children:a.steps.productDescriptionTip}),Object(w.jsx)(ue.a,{ref:i,value:r,config:c,tabIndex:1,onBlur:function(e){return n(e)},onChange:function(e){}})]})};var de=function(e){var t=e.langPack,r=e.modificationSubmission,n=Object(p.f)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("br",{}),Object(w.jsx)(re.a,{}),Object(w.jsxs)("div",{align:"right",children:[Object(w.jsx)(A.a,{startIcon:Object(w.jsx)(ne.a,{}),onClick:r,children:t.common.yes}),Object(w.jsx)(A.a,{startIcon:Object(w.jsx)(ae.a,{}),onClick:function(){return n("/product")},children:t.common.no})]})]})},pe={};t.default=function(){console.log("productEdit app running");var e=Object(d.c)((function(e){return e.localization})),t=Object(d.c)((function(e){return e.globalization})),r=Object(l.useState)(O.a[e.locale]),i=Object(u.a)(r,2),x=i[0],_=i[1],v=Object(l.useState)(t.baseData.loginData),y=Object(u.a)(v,1)[0],A=Object(p.f)(),k=Object(l.useState)(0),S=Object(u.a)(k,2),P=S[0],D=S[1],I=Object(l.useState)({panel1:!0,panel2:!1,panel3:!1,panel4:!1}),E=Object(u.a)(I,2),F=E[0],N=E[1],R=location.pathname.replace("/product/",""),T=Object(l.useState)({}),q=Object(u.a)(T,2),Q=q[0],z=q[1],U=Object(l.useState)([]),B=Object(u.a)(U,2),L=B[0],K=B[1],V=Object(l.useState)([]),Y=Object(u.a)(V,2),G=Y[0],J=Y[1],Z=Object(l.useState)(""),H=Object(u.a)(Z,2),W=H[0],$=H[1],ee=Object(l.useState)(0),te=Object(u.a)(ee,2),re=te[0],ne=te[1],ae=Object(l.useState)([]),ie=Object(u.a)(ae,2),ce=ie[0],se=ie[1],ue=[],be=Object(l.useRef)(null),je=Object(l.useState)({menuLevel:void 0,menuValue:void 0,menuArr:[],anchorEl:null}),fe=Object(u.a)(je,2),me=fe[0],he=fe[1],ge=Object(b.a)(Object(h.a)().breakpoints.down("md"))?3:6,Oe=Object(l.useRef)(null),xe=Object(l.useState)([]),_e=Object(u.a)(xe,2),ve=_e[0],ye=_e[1];function Ae(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(s.a)(c.a.mark((function e(t){var r,n,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return-1,r=ma.photoUploadQuery({file_name:t.name,image_bytes:t,group_id:-1}),e.next=4,fetchAPI(r);case 4:if((n=e.sent).response.status){e.next=7;break}return e.abrupt("return",queryResult(!1,x.common.yes));case 7:if(i=ma.photoUploadCheck(n),o=i.response,s=o.status,u=o.result,s){e.next=11;break}return e.abrupt("return",queryResult(!1,u));case 11:return queryResult(!0,x.steps.uploadSuccess),e.abrupt("return",J((function(e){if(e.length>=6)return e;var t=[u.photobank_url].concat(Object(a.a)(e));return pe.main_image={images:t.toString()},t})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Object(s.a)(c.a.mark((function e(t){var r,n,a,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productFieldUpdateQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,x.common.netFail+"\n"+n.response.result));case 6:return a=ma.productFieldUpdateCheck(n),i=a.response,o=i.status,s=i.result,queryResult(o,s),console.log(s),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Object(s.a)(c.a.mark((function e(t){var r,n,i,o,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productDetailQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,x.common.netFail+"\n"+n.response.result));case 6:if(i=ma.productDetailCheck(n),o=i.response,s=o.status,u=o.result,s){e.next=10;break}return e.abrupt("return",queryResult(s,u));case 10:console.log(u),u.attributes.product_attribute&&((l=Object(a.a)(u.attributes.product_attribute)).sort((function(e,t){return e.attribute_id-t.attribute_id})),K(l)),u.main_image.images.string&&J(u.main_image.images.string),u.description&&$(u.description),z(u),u.category_id&&Ie(u.category_id);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(s.a)(c.a.mark((function e(t){var r,n,a,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productCategoryQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,x.common.netFail+"\n"+n.response.result));case 6:if(a=ma.productCategoryCheck(n),i=a.response,o=i.status,s=i.result,o){e.next=10;break}return e.abrupt("return",queryResult(o,s));case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return(De=Object(s.a)(c.a.mark((function e(t){var r,n,a,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productCategoryAttributeQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,x.common.netFail+"\n"+n.response.result));case 6:if(a=ma.productCategoryAttributeCheck(n),i=a.response,o=i.status,s=i.result,o){e.next=10;break}return e.abrupt("return",queryResult(o,s));case 10:return console.log(s),e.abrupt("return",ye(s));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(s.a)(c.a.mark((function e(t,r){var n,i,o,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=11;break}return e.next=3,Se({cat_id:t});case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return");case 6:return i=n.level,o=n.parent_ids,ue.length||(ue=new Array(i)),ue[i]=n,i>0&&o&&o.number?Ie(o.number[0]):se(ue),e.abrupt("return");case 11:if(s=ce[r-1].child_ids.number.find((function(e){return e.category_id===t}))){e.next=14;break}return e.abrupt("return");case 14:return u=s.child_ids,(l=Object(a.a)(ce))[r]=s,r+1<l.length&&(l.length=r+1),u&&(l.push({category_id:0}),ue=l,Fe(l.length-1)),e.abrupt("return",se(l));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){if(ce.length){var e=ce[ce.length-1].category_id;ne(e),e&&function(e){De.apply(this,arguments)}({cat_id:e})}}),[ce]),Object(l.useEffect)((function(){if(console.log("description changed "),W){if(!Q.description)return;if(W.length>6e4)return queryResult(!1,x.form.descriptionOverflow);if(W===Q.description)return;pe.description=W.replace(/\n/g,"").trim()}}),[W]),Object(l.useEffect)((function(){_(O.a[e.locale])}),[e.locale]),Object(l.useEffect)((function(){return console.log("I want product editing"),y?(function(e){Ce.apply(this,arguments)}({product_id:R}),function(){console.log("I leave product edit"),pe={}}):A("/")}),[]);var Fe=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,n,a,i,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=ue.length?ue:ce,n=r[t].category_id,a=r[t-1].child_ids.number,i=Object(o.a)(a),e.prev=4,i.s();case 6:if((s=i.n()).done){e.next=16;break}if("object"!==typeof(u=s.value)){e.next=10;break}return e.abrupt("break",16);case 10:return e.next=12,Se({cat_id:u});case 12:l=e.sent,a[a.indexOf(u)]=l;case 14:e.next=6;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),i.e(e.t0);case 21:return e.prev=21,i.f(),e.finish(21);case 24:he({menuLevel:t,menuValue:n,menuArr:a,anchorEl:be.current});case 25:case"end":return e.stop()}}),e,null,[[4,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,n,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.target.files).length){e.next=3;break}return e.abrupt("return");case 3:n=Object(o.a)(r),e.prev=4,n.s();case 6:if((a=n.n()).done){e.next=12;break}return i=a.value,e.next=10,Ae(i);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:t.target.files=null;case 21:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}();function Re(){var e=Object.keys(pe);return e.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{variant:"h2",children:x.steps.modificationDone}),Object(w.jsx)(f.a,{children:e.map((function(e){return Object(w.jsxs)(m.a,{children:["-- ",e]},e)}))})]}):Object(w.jsx)(j.a,{variant:"h2",children:x.steps.modificationNull})}return Object(w.jsxs)(g.a,{title:"Product Edit --\u4ea7\u54c1\u7f16\u8f91",children:[Object(w.jsx)(C,{langPack:x,activeStep:P,setActiveStep:D}),0===P?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M,{localization:e,categories:ce,menuRef:be,menuState:me,showMenu:Fe,closeMenu:function(e){var t=me.menuLevel;he({menuArr:[],anchorEl:null}),console.log(e),void 0!==e&&e!==re&&Ie(e,t)}}),Object(w.jsx)(X,{localization:e,finalImageArr:G,imageSizing:{width:30,height:30},photoCols:ge,rowHeight:200,uploaderRef:Oe,onDoubleClickImageBtn:function(e){if(G.length<=1)return queryResult(!1,x.steps.mainPhotoRequired);var t=G.filter((function(t){return t!==e}));return pe.main_image={images:t.toString()},J(t)},onPhotoSelected:Ne,langPack:x}),Object(w.jsx)(oe,Object(n.a)(Object(n.a)({},Q),{},{langPack:x,expanded:F,setExpanded:N,finalAttributeArr:L,allAttributeArr:ve,onAttributeAdd:function(e){console.log(e);var t=e.attr_id,r=e.attr_value,n=e.en_name,i=e.input_type;if(!t)return console.log("\u7f3a\u5c11\u5173\u952eid");var c=[];L.length&&(c=Object(a.a)(L),L.find((function(e){return e.attribute_id===t}))&&(/multi/gi.test(i)?r&&r.attr_value_id&&(c=c.filter((function(e){return e.value_id!==r.attr_value_id}))):(c=c.filter((function(e){return e.attribute_id!==t})),queryResult(!1,x.form.attributeDuplicated))));var o={attribute_id:t,attribute_name:n,value_name:""};r&&(o.value_id=r.attr_value_id,o.value_name=r.en_name);var s=[o].concat(Object(a.a)(c));pe.attributes=s,K(s),console.log(o)},onAttributeClear:function(){var e=[];if(L.length)return e=(e=Object(a.a)(L)).filter((function(e){return e.value_name})),pe.attributes=e,K(e)},onAttributeModified:function(e,t){if(!t)return queryResult(!1,x.steps.modificationNull);if(/attributes|bulk_discount_prices/g.test(e)){if("attributes"===e){var r=function(e,t,r){var n=Object(a.a)(t);if(n.length){var i=n.findIndex((function(t){return t[r]===e[r]}));-1!==i?n[i]=e:n.push(e)}else n.push(e);return n}(t,L,"attribute_id");return pe.attributes=r,K(r)}if("bulk_discount_prices"===e)return"start_quantity",console.log("\u5f85\u90e8\u7f72")}else{if("keywords"===e)return(t=(t=t.split(",")).map((function(e){return e.trim()}))).length>3&&(t.length=3),pe.keywords=String(t),pe;if("subject"===e)return t.length>128?queryResult(!1,x.form.subject):(pe.subject=t,pe)}if(void 0===pe[e]&&(pe[e]=JSON.parse(JSON.stringify(Q[e])),"sourcing_trade"===e)){if(pe[e].payment_methods){var i=pe[e].payment_methods.string;pe[e].payment_methods=i}if(pe[e].deliver_periods){var c=pe[e].deliver_periods.deliver_period;pe[e].deliver_periods=c}}var o;return pe[e]="object"!==typeof(o=pe[e])||null===o||Array.isArray(o)?t:Object(n.a)(Object(n.a)({},pe[e]),t),pe}}))]}):1===P?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(le,{localization:e,finalDescription:W,setFinalDescription:$,langPack:x})}):2===P?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Re,{}),Object(w.jsx)(de,{langPack:x,modificationSubmission:function(){if(!Object.keys(pe).length)return queryResult(!1,x.steps.modificationNull);for(var e={category_id:re,product_id:Q.product_id,product_type:Q.product_type},t=0,r=Object.entries(pe);t<r.length;t++){var n=Object(u.a)(r[t],2),a=n[0],i=n[1];e[a]="object"==typeof i?JSON.stringify(i):i}console.log(e),function(e){we.apply(this,arguments)}(e)}})]}):Object(w.jsx)(w.Fragment,{})]})}}}]);
//# sourceMappingURL=11.0948c904.chunk.js.map