(this["webpackJsonperp-dashboard"]=this["webpackJsonperp-dashboard"]||[]).push([[13],{312:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={enUS:{folder:{currentFolder:"please select",needFolderName:"please input name for new folder",addNewFolder:"add new folder",folderNull:"folder not found",dataNull:"data not found",folderRequired:"please select a folder to continue"},table:{tableHeader:"Products",categoryName:"category name",productId:"product id",subject:"subject",status:"status",display:"display",id:"id",is_rts:"RTS",is_specific:"specific",owner_member_display_name:"owner",product_type:"type",smart_edit:"smart edit",attributes:"attributes",keywords:"keywords",price:"price",payment_methods:"payment methods",min_order_quantity:"MOQ(min. order quantity)",day:"day",unit_type:"unit type",gmt_create:"date create",gmt_modified:"date modified",score:"score",tag:"tag",customInfo:"custom info"},tableToolbar:{menuHide:"hide menu",menuShow:"show menu",productScore:"scores",productDisplayOn:"list",productDisplayOff:"delist",productUpdate:"update",productEdit:"edit",productCopy:"copy"},form:{KeyInformation:"key information",ProductAttributes:"product attributes",productService:"product service",rtsProduct:"ready-to-ship product",subject:"128 letters max.",category:"click to change category",keywords:"3 keywords max. Comma(,) separated",price:"set price (range)",payment_methods:"payment methods such as T/T, L/C, etc.",min_order_quantity:"optional",attributes:"add or delete",attributeMissing:"attribute missing",attributeDuplicated:"attribute duplicated",pleaseSelect:"please select",selectOrInput:"select or input",measure:"length * width * height (cm)",pieces:"pieces"},steps:{first:"Edit Attributes",second:"Edit Contents",finally:"Preview & Publish",previous:"Previous",next:"Next",complete:"Complete",redirecting:"Redirecting...",addProduct:"New",productCategoryNeeded:"Please select a specific category",productSubjectNeeded:"Please input product subject",productDetailsNeeded:"Product Details Needed",productPriceUnitNeeded:"Please input price unit",productLogisticsModeNeeded:"Please input logistics mode",productPortNeeded:"Please input shipping port",productPackagingDescriptionNeeded:"Please input packaging description",productCustomizationNeeded:"Please input Product Customization MOQ",productTypeNeeded:"Please select product type",productWeightNeeded:"Please input product weight",productPaymentMethodsNeeded:"Please select payment methods",productMeasureNeeded:"Please input product length * width * height",uneditable:"product is currently uneditable",productIdError:"product id error, pls go back & try again",categoryError:"category error, pls try again",editPrice:"Edit Price",editPeriod:"Edit Production Period",editAll:"Edit All",editDone:"Edit Done",nullNotAllowed:"empty value is not allowed",MOQError:"MOQ should be greater than the previous one",PriceError:"price should be smaller than the previous one",add:"Add",remove:"Remove",cloud:"Cloud",selectFromCloud:"Select from Cloud",choosePhotos:"Choose Photos",uploadPhotos:"Upload Photos",removePhotos:"double click to remove the photo",toggleSmartEdit:"toggle smart edit",productDescriptionTip:"Pictures from Smart Editing are not supported. Remove pictures if you want to modify",mainPhotoRequired:"Need at least one photo",descriptionOverflow:"description length shall be smaller than 60k letters",panel1:"subject, keywords, price, shipping...",panel2:"all kinds of attributes...(attributes cannot be updated when posting new products for the first time. Try to fill the blanks the second time",panel3:"customized service if the MOQ is met...",panel4:"for trade assurance users exclusively...",addAttributes:"Add Attributes",clearAttributes:"Clear Attributes",modificationNull:"No modification made",addCustomInfo:"Add Custom Info",clearCustomInfo:"Clear Custom Info",modificationDone:"Will submit the following modifications:",numberOnly:"Please input number only",addSuccess:"Product added successfully",updateSuccess:"Product updated successfully",duplicateSuccess:"product duplicated successfully",uploadSuccess:"Upload Success",productScoreError:"no score found"},productScore:{basic:"Basic",potential:"Potential",super:"Super",top:"Top"},common:{yes:"OK",no:"Cancel",success:"Success",netFail:"request failed"}},zhCN:{folder:{currentFolder:"\u8bf7\u9009\u62e9",needFolderName:"\u8bf7\u586b\u5199\u6587\u4ef6\u5939\u540d",addNewFolder:"\u65b0\u5efa\u6587\u4ef6\u5939",folderNull:"\u6587\u4ef6\u5939\u4e0d\u5b58\u5728",dataNull:"\u6570\u636e\u4e0d\u5b58\u5728",folderRequired:"\u8bf7\u9009\u62e9\u6587\u4ef6\u5939"},table:{tableHeader:"\u4ea7\u54c1",categoryName:"\u7c7b\u76ee",productId:"\u4ea7\u54c1 id",subject:"\u6807\u9898",status:"\u5ba1\u6838\u72b6\u6001",display:"\u4e0a\u67b6\u72b6\u6001",id:"id",is_rts:"RTS",is_specific:"\u89c4\u683c\u54c1",owner_member_display_name:"\u8d1f\u8d23\u4eba",product_type:"\u5546\u54c1\u7c7b\u578b",smart_edit:"\u667a\u80fd\u7f16\u8f91",attributes:"\u5c5e\u6027",keywords:"\u5173\u952e\u8bcd",price:"\u4ef7\u683c",payment_methods:"\u652f\u4ed8\u65b9\u5f0f",min_order_quantity:"\u6700\u5c0f\u8d77\u8ba2\u91cf(MOQ)",day:"\u5929",unit_type:"\u5355\u4f4d",gmt_create:"\u521b\u5efa\u65e5\u671f",gmt_modified:"\u4fee\u6539\u65e5\u671f",score:"\u4ea7\u54c1\u5206",tag:"\u6807\u7b7e",customInfo:"\u5b9a\u5236\u4fe1\u606f"},tableToolbar:{menuHide:"\u9690\u85cf\u83dc\u5355",menuShow:"\u663e\u793a\u83dc\u5355",productScore:"\u4ea7\u54c1\u5206",productDisplayOn:"\u4e0a\u67b6",productDisplayOff:"\u4e0b\u67b6",productUpdate:"\u66f4\u65b0",productEdit:"\u7f16\u8f91",productCopy:"\u590d\u5236"},form:{KeyInformation:"\u57fa\u672c\u4fe1\u606f",ProductAttributes:"\u4ea7\u54c1\u5c5e\u6027",productService:"\u4ea7\u54c1\u670d\u52a1",rtsProduct:"RTS \u4ea7\u54c1",subject:"128 \u5b57\u7b26\u4ee5\u5185",category:"\u70b9\u51fb\u66f4\u6362\u7c7b\u76ee",keywords:"\u6700\u591a\u4e09\u4e2a\u5173\u952e\u8bcd\uff0c\u7528\u82f1\u6587\u9017\u53f7(,)\u5206\u9694",price:"\u8bbe\u7f6e\u4ef7\u683c(\u533a\u95f4)",payment_methods:"\u652f\u4ed8\u65b9\u5f0f\uff0c\u4f8b\u5982\uff1aT/T\uff0cL/C\uff0c\u7b49",min_order_quantity:"\u9009\u586b",attributes:"\u53ef\u589e\u53ef\u51cf",attributeMissing:"\u5c5e\u6027\u7f3a\u5931",attributeDuplicated:"\u5c5e\u6027\u91cd\u590d",pleaseSelect:"\u8bf7\u9009\u62e9",selectOrInput:"\u9009\u62e9\u6216\u8f93\u5165",measure:"\u957f*\u5bbd*\u9ad8 (cm)",pieces:"\u4ef6"},steps:{first:"\u5c5e\u6027\u7f16\u8f91",second:"\u8be6\u60c5\u7f16\u8f91",finally:"\u9884\u89c8&\u53d1\u5e03",previous:"\u4e0a\u4e00\u6b65",next:"\u4e0b\u4e00\u6b65",complete:"\u5b8c\u6210",redirecting:"\u6b63\u5728\u8df3\u8f6c...",addProduct:"\u53d1\u54c1",productCategoryNeeded:"\u8bf7\u9009\u62e9\u8be6\u7ec6\u7684\u4ea7\u54c1\u7c7b\u76ee",productSubjectNeeded:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u540d\u79f0",productDetailsNeeded:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u8be6\u60c5",productPriceUnitNeeded:"\u8bf7\u9009\u62e9\u8ba1\u91cf\u5355\u4f4d",productLogisticsModeNeeded:"\u8bf7\u9009\u62e9\u7269\u6d41\u65b9\u5f0f",productPortNeeded:"\u8bf7\u8f93\u5165\u6d77\u8fd0\u6e2f\u53e3",productPackagingDescriptionNeeded:"\u8bf7\u8f93\u5165\u5305\u88c5\u63cf\u8ff0",productCustomizationNeeded:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u5b9a\u5236\u4fe1\u606f",productTypeNeeded:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u7c7b\u578b",productWeightNeeded:"\u8bf7\u8f93\u5165\u4ea7\u54c1\u91cd\u91cf",productPaymentMethodsNeeded:"\u8bf7\u8f93\u5165\u652f\u4ed8\u65b9\u5f0f",productMeasureNeeded:"\u8bf7\u8f93\u5165\u957f\u5bbd\u9ad8",uneditable:"\u5f53\u524d\u4ea7\u54c1\u4e0d\u53ef\u7f16\u8f91",productIdError:"\u4ea7\u54c1 id \u9519\u8bef\uff0c\u8bf7\u8fd4\u56de\u91cd\u8bd5",categoryError:"\u7c7b\u76ee\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",editPrice:"\u7f16\u8f91\u4ef7\u683c",editPeriod:"\u7f16\u8f91\u53d1\u8d27\u671f",editAll:"\u7f16\u8f91\u5168\u90e8",editDone:"\u7f16\u8f91\u5b8c\u6210",nullNotAllowed:"\u4e0d\u80fd\u4e3a\u7a7a",MOQError:"MOQ\u503c\u987b\u5927\u4e8e\u524d\u4e00\u4e2a\u503c",PriceError:"\u4ef7\u683c\u503c\u987b\u5c0f\u4e8e\u524d\u4e00\u4e2a\u503c",add:"\u6dfb\u52a0",remove:"\u5220\u9664",cloud:"\u56fe\u5e93",selectFromCloud:"\u4ece\u4e91\u7aef\u9009\u62e9",choosePhotos:"\u9009\u62e9\u56fe\u7247",uploadPhotos:"\u4e0a\u4f20\u56fe\u7247",removePhotos:"\u53cc\u51fb\u79fb\u9664\u56fe\u7247",toggleSmartEdit:"\u667a\u80fd\u7f16\u8f91\u5207\u6362",productDescriptionTip:"\u63d0\u793a: \u6765\u81ea\u3010\u667a\u80fd\u7f16\u8f91\u3011\u7684\u56fe\u7247\u65e0\u6cd5\u7f16\u8f91\uff0c\u5982\u9700\u4fee\u6539\uff0c\u8bf7\u79fb\u9664\u6240\u6709\u65e7\u56fe\u5148",mainPhotoRequired:"\u9700\u8981\u4fdd\u7559\u81f3\u5c11\u4e00\u5f20\u4e3b\u56fe",descriptionOverflow:"\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc76\u4e07\u5b57\u7b26",panel1:"\u6807\u9898\uff0c\u5173\u952e\u8bcd\uff0c\u4ef7\u683c\uff0c\u53d1\u8d27...",panel2:"\u5404\u7c7b\u5c5e\u6027...\uff08\u53d1\u65b0\u54c1\u521d\u6b21\u7f16\u8f91\u6ca1\u6cd5\u4f20\u5c5e\u6027\uff0c\u5efa\u8bae\u7b2c\u4e8c\u6b21\u518d\u586b\uff09",panel3:"\u5b9a\u5236\u670d\u52a1...",panel4:"\u4fe1\u4fdd\u7528\u6237\u4e13\u5c5e...",addAttributes:"\u6dfb\u52a0\u5c5e\u6027",clearAttributes:"\u79fb\u9664\u7a7a\u767d\u5c5e\u6027",addCustomInfo:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4fe1\u606f",clearCustomInfo:"\u6e05\u7406\u81ea\u5b9a\u4e49\u4fe1\u606f",modificationNull:"\u6ca1\u6709\u4efb\u4f55\u4fee\u6539",modificationDone:"\u5c06\u63d0\u4ea4\u5982\u4e0b\u5185\u5bb9:",numberOnly:"\u8bf7\u8f93\u5165\u6570\u5b57",uploadSuccess:"\u4e0a\u4f20\u6210\u529f",addSuccess:"\u4ea7\u54c1\u6dfb\u52a0\u6210\u529f",updateSuccess:"\u4ea7\u54c1\u66f4\u65b0\u6210\u529f",duplicateSuccess:"\u4ea7\u54c1\u590d\u5236\u6210\u529f",productScoreError:"\u4ea7\u54c1\u5206\u672a\u67e5\u5230"},productScore:{basic:"\u4f4e\u8d28\u54c1",potential:"\u666e\u901a\u54c1",super:"\u5b9e\u529b\u4f18\u54c1",top:"\u7cbe\u54c1"},common:{yes:"\u786e\u5b9a",no:"\u53d6\u6d88",success:"\u64cd\u4f5c\u6210\u529f",netFail:"\u8bf7\u6c42\u5931\u8d25"}}}},322:function(e,t,r){"use strict";var n=r(16),a=r(85),u=r(278),l=r(388),i=r(201),c=r(282),o=r(320),s=r(321),d=r(1);t.a=function(e){var t=e.langPack,r=e.productModified,p=e.modificationSubmission,f=Object(n.f)(),v=Object.keys(r);return Object(d.jsxs)(d.Fragment,{children:[v.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(a.a,{variant:"h3",children:t.steps.modificationDone}),Object(d.jsx)(u.a,{children:v.map((function(e){return Object(d.jsxs)(l.a,{children:["--",e]},e)}))})]}):Object(d.jsx)(a.a,{variant:"h3",children:t.steps.modificationNull}),Object(d.jsx)("br",{}),Object(d.jsx)(i.a,{}),Object(d.jsxs)("div",{align:"right",children:[Object(d.jsx)(c.a,{startIcon:Object(d.jsx)(o.a,{}),onClick:p,children:t.common.yes}),Object(d.jsx)(c.a,{startIcon:Object(d.jsx)(s.a,{}),onClick:function(){return f("/product")},children:t.common.no})]})]})}},435:function(e,t,r){"use strict";r.r(t);var n=r(35),a=r.n(n),u=r(3),l=r(7),i=r(54),c=r(12),o=r(0),s=r(22),d=r(16),p=r(250),f=r(445),v=r(460),m=r(85),j=r(461),b=r(382),x=r(23),h=r(87),O=r(312),y=r(443),g=r(450),_=r(437),S=r(357),k=r(282),q=r(272),M=r(1);var P=function(e){var t=e.langPack,r=e.activeStep,n=e.setActiveStep,a=Object(o.useState)([t.steps.first,t.steps.second,t.steps.finally]),u=Object(c.a)(a,1)[0];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(y.a,{activeStep:r,children:u.map((function(e){return Object(M.jsx)(g.a,{children:Object(M.jsx)(_.a,{children:e})},e)}))}),Object(M.jsxs)(S.a,{variant:"contained",color:"secondary",disableElevation:!0,sx:{display:"flex",flexDirection:"row",pt:2,paddingBottom:"10px"},children:[Object(M.jsx)(k.a,{disabled:0===r,onClick:function(){n((function(e){return e-1}))},sx:{mr:1},children:t.steps.previous}),Object(M.jsx)(q.a,{sx:{flex:"1 1 auto"}}),Object(M.jsx)(k.a,{disabled:2===r,onClick:function(){n((function(e){return e+1}))},children:r===u.length-1?t.steps.complete:t.steps.next})]})]})},C=r(17),w=r(51),N=r(451),T=r(452),I=r(453),F=r(446),D=r(277),R=r(454),A=r(455),E=r(422),L=r(423),H=r(424),z=Object(w.a)(Object(o.lazy)((function(){return Promise.all([r.e(0),r.e(2)]).then(r.bind(null,433))})));var V,W,B,U,Q,J,G=function(e){var t=e.xmlSchema,r=e.onModified,n=e.productModified,a=e.photoCols,u=e.rowHeight,i=e.xmlGetField,s=e.langPack,d=Object(o.useState)({}),p=Object(c.a)(d,2),f=p[0],v=p[1],m=Object(o.useState)([]),j=Object(c.a)(m,2),b=j[0],x=j[1],h=Object(o.useState)(!1),O=Object(c.a)(h,2),y=O[0],g=O[1];function _(e,t){if(t.length){var n=Object(l.a)({},f),a=n._values||[],u=[];if("add"===e)(u=[].concat(Object(C.a)(a),Object(C.a)(t))).length>6&&(u.length=6);else if("remove"===e){if(a.length<=1)return queryResult(!1,s.steps.mainPhotoRequired);t.forEach((function(e){u=a.filter((function(t){return t.value!==e.value}))}))}else"reorder"===e&&(u=t);(u=(u=u.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{key:"scImages_".concat(t),value:e.value.replace("https:","")})}))).filter((function(e){return e.id}))).length||g(!0),n._values=u;var i="complex-value",c=v,o=(new DOMParser).parseFromString(n.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),d="<".concat(i,">");u.forEach((function(e,t){o[t].innerHTML='<value fileId="'.concat(e.id,'">').concat(e.value,"</value>"),d+=o[t].outerHTML})),d+="</".concat(i,">"),n.xml.querySelector(i)&&n.xml.querySelector(i).remove();var p=(new DOMParser).parseFromString(d,"text/xml").firstChild;return n.xml.append(p),c(n),r("scImages",n)}}Object(o.useEffect)((function(){if(t){var e=n.scImages;e?v(e):function(){var e=i("scImages");if(!e)return;e.values&&(e._values=e.values.map((function(e){return{key:e.id,value:e.values[0].value.replace(/_.*/,"")}})).sort((function(e,t){return Number(/\d/.exec(e.key)[0])-Number(/\d/.exec(t.key)[0])})));v(e)}()}}),[t]);var S=function(e){return g(!1),e?_("add",b.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{key:e.id,value:e.url})}))):x([])};return Object(M.jsxs)(N.a,{cols:a,rowHeight:u,sx:{marginTop:"10px",marginBottom:"10px"},variant:"quilted",gap:2,children:[f._values&&f._values.length?f._values.map((function(e,t){return Object(M.jsxs)(T.a,{cols:1,rows:1,children:[Object(M.jsx)("img",{src:"https:"+e.value,alt:t+1,loading:"lazy"}),Object(M.jsx)(I.a,{sx:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},title:t+1,position:"top",actionIcon:Object(M.jsx)(F.a,{title:s.steps.removePhotos,children:Object(M.jsx)(D.a,{sx:{color:t?"yellow":"white"},"aria-label":"star ".concat(t+1),onDoubleClick:function(){return _("remove",[e])},children:Object(M.jsx)(E.a,{})})}),actionPosition:"left"}),t&&e.id?Object(M.jsx)(k.a,{sx:{position:"absolute",right:"0px",top:"5px"},size:"large",color:"warning",onClick:function(){return function(e){var t=Object(l.a)({},f)._values,r=t.splice(e,1);return t.splice(e-1,0,r[0]),_("reorder",t)}(t)},startIcon:Object(M.jsx)(L.a,{})}):null]},t)})):Object(M.jsx)(M.Fragment,{}),!f._values||f._values.length<6?Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(M.jsx)(F.a,{title:s.steps.selectFromCloud,children:Object(M.jsx)(k.a,{sx:{height:"100%"},startIcon:Object(M.jsx)(H.a,{}),onClick:function(){return g(!0)},children:s.steps.cloud})}),Object(M.jsxs)(R.a,{onClose:function(){return S(!0)},open:y,children:[Object(M.jsx)(A.a,{children:s.steps.selectFromCloud}),Object(M.jsx)(z,{onPhotoSelected:function(e){e&&x(e)}}),Object(M.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(){return S(!0)},children:s.common.yes}),Object(M.jsx)(k.a,{variant:"contained",color:"error",onClick:function(){return S()},children:s.common.no})]})]}):null]})},K=r(262),$=r(442),X=r(268),Y=r(439),Z=r(275),ee=r(456),te=r(457),re=r(458),ne=r(447),ae=r(459),ue=r(320),le=r(375),ie=r(374),ce=r(425);var oe,se=function(e){var t=e.xmlSchema,r=e.langPack,n=e.group_id,a=e.rtsProduct,u=e.productModified,i=e.xmlGetField,s=e.onModified;console.log("summary running");var d=Object(o.useState)({}),p=Object(c.a)(d,2),f=p[0],v=p[1],j=Object(o.useState)({}),b=Object(c.a)(j,2),x=b[0],h=b[1],O=Object(o.useState)({}),y=Object(c.a)(O,2),g=y[0],_=y[1],S=Object(o.useState)({}),q=Object(c.a)(S,2),P=q[0],w=q[1],N=Object(o.useState)({}),T=Object(c.a)(N,2),I=T[0],D=T[1],R=Object(o.useState)({}),A=Object(c.a)(R,2),E=A[0],L=A[1],H=Object(o.useState)({}),z=Object(c.a)(H,2),G=z[0],oe=z[1],se=Object(o.useState)({}),de=Object(c.a)(se,2),pe=de[0],fe=de[1],ve=Object(o.useState)(!1),me=Object(c.a)(ve,2),je=me[0],be=me[1],xe=Object(o.useState)({}),he=Object(c.a)(xe,2),Oe=he[0],ye=he[1],ge=Object(o.useState)(!1),_e=Object(c.a)(ge,2),Se=_e[0],ke=_e[1],qe=Object(o.useState)({}),Me=Object(c.a)(qe,2),Pe=Me[0],Ce=Me[1],we=Object(o.useState)({}),Ne=Object(c.a)(we,2),Te=Ne[0],Ie=Ne[1],Fe=Object(o.useState)({}),De=Object(c.a)(Fe,2),Re=De[0],Ae=De[1],Ee=Object(o.useState)({}),Le=Object(c.a)(Ee,2),He=Le[0],ze=Le[1];function Ve(e){if(e){var t=Object(l.a)({},G);e=Number(e),t._values={value:e};var r="value",n=oe,a="<".concat(r,">");a+=e,a+="</".concat(r,">"),t.xml.querySelector(r)&&t.xml.querySelector(r).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return t.xml.append(u),n(t),s("minOrderQuantity",t)}}Object(o.useEffect)((function(){if(t){var e=u.productGroup,a=u.market,c=u.productTitle,o=u.productKeywords,d=u.minOrderQuantity,p=u.paymentMethod,m=u.priceUnit,j=u.ladderPrice,b=u.ladderPeriod,O=u.port,y=u.logisticsMode,g=u.wholeSalePkgDesc,S=u.supply;e?v(e):function(){var e=i("productGroup");if(!e)return;e.values&&(e._values={value:e.values[0].values[0].value});if(n)return V=e,function(e){if(console.log("settting product group"),!e||!e.trim())return queryResult(!1,r.steps.productSubjectNeeded);var t=f._values?Object(l.a)({},f):V;t._values={value:e};var n="complex-value",a=v,u=(new DOMParser).parseFromString(t.xml.outerHTML,"text/xml").firstChild.querySelector("fields > field#first_group_id"),i="<".concat(n,">");u.innerHTML="<value>".concat(e,"</value>"),i+=u.outerHTML,i+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var c=(new DOMParser).parseFromString(i,"text/xml").firstChild;return t.xml.append(c),a(t),s("productGroup",t)}(n);v(e)}(),a?h(a):function(){var e=i("market");if(!e)return;if(e._options=e.options?e.options.map((function(e){return{key:e.displayName,value:e.value}})):[],!e.values)return J=e,function(e){console.log("settting product type");var t=x._values?x:J;if(!e||!e.trim())return queryResult(!1,r.steps.productSubjectNeeded);var n=Object(l.a)({},t);n._values={value:e};var a="value",u=h,i="<".concat(a,">");i+=e,i+="</".concat(a,">"),n.xml.querySelector(a)&&n.xml.querySelector(a).remove();var c=(new DOMParser).parseFromString(i,"text/xml").firstChild;return n.xml.append(c),u(n),s("market",n)}("2");e._values={value:e.values[0].value},e._values.key=e._options.find((function(t){return t.value===e._values.value})).key;h(e)}(),c?_(c):function(){var e=i("productTitle");if(!e)return;e.values&&(e._values={value:e.values[0].value});_(e)}(),o?w(o):function(){var e=i("productKeywords");if(!e)return;e.values&&(e._values={value:e.values.map((function(e){return e.values[0].value})).join(",")});w(e)}(),d?oe(d):function(){var e=i("minOrderQuantity");if(!e)return;e.values&&(e._values={value:Number(e.values[0].value)});oe(e)}(),p?D(p):function(){var e=i("paymentMethod");if(!e)return;e.values&&(e._values=e.values[0].values.map((function(e){return{value:e.value}})));e._options=e.options?e.options[0].options.map((function(e){return{key:e.displayName,value:e.value}})):[],D(e)}(),m?L(m):We(),j?fe(j):function(){var e=i("ladderPrice");if(!e)return;e.values?e._values=e.values.filter((function(e){return"complex"===e.type})).map((function(e){return{quantity:Number(e.values[0].values[0].value),price:Number(e.values[1].values[0].value)}})).sort((function(e,t){return e.quantity-t.quantity})):e._values=[{quantity:1,price:0}];fe(e)}(),b?ye(b):function(){var e=i("ladderPeriod");if(!e)return;e.values?e._values=e.values.filter((function(e){return"complex"===e.type})).map((function(e){return{quantity:Number(e.values[0].values[0].value),day:Number(e.values[1].values[0].value)}})).sort((function(e,t){return e.quantity-t.quantity})):e._values=[{quantity:1,price:0}];ye(e)}(),O?Ce(O):function(){var e=i("port");if(!e)return;e.values&&(e._values={value:e.values[0].value});Ce(e)}(),y?Ie(y):function(){var e=i("logisticsMode");if(!e)return;e._options=e.options?e.options.map((function(e){return{key:e.displayName,value:e.value}})):[],e.values&&(e._values=e.values.map((function(t){var r=t.value,n=e._options.find((function(e){return e.value===r})).key;return{key:n,value:r}})));Ie(e)}(),g?Ae(g):function(){var e=i("wholeSalePkgDesc");if(!e)return;e.values&&(e._values={value:e.values[0].value});Ae(e)}(),S?ze(S):function(){var e=i("supply");if(!e)return;e.values&&(e._values={value:e.values[0].value});ze(e)}()}}),[t]);var We=function(){var e=i("priceUnit");if(e)return e._options=e.options?e.options.map((function(e){return{key:e.displayName,value:e.value}})):[],e.values&&(e._values={key:"",value:e.values[0].value},e._values.key=e._options.find((function(t){return t.value===e._values.value})).key),L(e)},Be=function(e,t,r){U||(U={}),U[e]=Number(t),U.quantity&&U.price&&Ue("edit",r)},Ue=function(e,t){var n=Object(l.a)({},pe),a=n._values;if("add"===e){if(!a[a.length-1].price||a.length>=4)return;a=[].concat(Object(C.a)(a),[{quantity:"",price:""}])}else if("edit"===e){if(!U)return;if(!U.price||!U.quantity)return queryResult(!1,r.steps.nullNotAllowed);if(1!==a.length){if(U.quantity<=a[a.length-2].quantity)return queryResult(!1,r.steps.MOQError);if(U.price>=a[a.length-2].price)return queryResult(!1,r.steps.PriceError)}a.pop(),a=[].concat(Object(C.a)(a),[U]),U=""}else if("remove"===e){if(a.length<=1)return;a.splice(t,1)}n._values=a;var u=fe;if("add"===e)return u(n);if((a=a.filter((function(e){return e.price}))).length){var i="complex-value",c=(new DOMParser).parseFromString(n.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field[type=complex]"),o="<".concat(i,">");a.forEach((function(e,t){c[t].querySelector("fields > field#quantity").innerHTML="<value>".concat(e.quantity,"</value>"),c[t].querySelector("fields > field#price").innerHTML="<value>".concat(e.price,"</value>"),o+=c[t].outerHTML})),o=(o+="</".concat(i,">")).replace(/fields/g,i),n.xml.querySelector(i)&&n.xml.querySelector(i).remove();var d=(new DOMParser).parseFromString(o,"text/xml").firstChild;return n.xml.append(d),u(n),Ve(a[0].quantity),be((function(e){return!e})),s("ladderPrice",n)}},Qe=function(e,t,r){Q||(Q={}),Q[e]=Number(t),Q.quantity&&Q.day&&Je("edit",r)},Je=function(e,t){var n=Object(l.a)({},Oe),u=n._values;if("add"===e){if(!u[u.length-1].day||u.length>=3)return;u=[].concat(Object(C.a)(u),[{quantity:"",day:""}])}else if("edit"===e){if(!Q)return;if(!Q.day||!Q.quantity)return queryResult(!1,r.steps.nullNotAllowed);u.pop(),u=[].concat(Object(C.a)(u),[Q]),Q=""}else if("remove"===e){if(u.length<=1)return;u.splice(t,1)}n._values=u;var i=ye;if("add"===e)return i(n);if((u=u.filter((function(e){return e.day}))).length){var c="complex-value",o=(new DOMParser).parseFromString(n.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field[type=complex]"),d="<".concat(c,">");u.forEach((function(e,t){o[t].querySelector("fields > field#quantity").innerHTML="<value>".concat(e.quantity,"</value>"),o[t].querySelector("fields > field#day").innerHTML="<value>".concat(e.day,"</value>"),d+=o[t].outerHTML})),d=(d+="</".concat(c,">")).replace(/fields/g,c),n.xml.querySelector(c)&&n.xml.querySelector(c).remove();var p=(new DOMParser).parseFromString(d,"text/xml").firstChild;if(n.xml.append(p),i(n),!a&&E._values){var f=u[u.length-1],v=f.quantity,m=f.day;!function(e){if(!e)return queryResult(!1,r.steps.productSubjectNeeded);var t=Object(l.a)({},He);t._values=e;var n=ze,a="complex-value",u="<".concat(a,">"),i=(new DOMParser).parseFromString(t.xml.outerHTML,"text/xml").firstChild,c=i.querySelector("fields");c.querySelector("field#supply_number").innerHTML="<value>".concat(e.supply_number,"</value>"),c.querySelector("field#time_unit").innerHTML="<value>".concat(e.time_unit,"</value>"),c.querySelector("field#quantity_unit").innerHTML="<value>".concat(e.quantity_unit,"</value>");var o=i.querySelectorAll("fields > field");Array.from(o).forEach((function(e){u+=e.outerHTML})),u+="</".concat(a,">"),t.xml.querySelector(a)&&t.xml.querySelector(a).remove();var d=(new DOMParser).parseFromString(u,"text/xml").firstChild;t.xml.append(d),n(t),s("supply",t)}({supply_number:Number(v)/Number(m),time_unit:"Day",quantity_unit:E._values.value})}return ke((function(e){return!e})),s("ladderPeriod",n)}};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(F.a,{title:r.form.subject,children:Object(M.jsx)(K.a,{margin:"normal",fullWidth:!0,id:"productTitle",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:g.name}),defaultValue:g._values?g._values.value:"",onBlur:function(e){return function(e){if(!e||!e.trim())return queryResult(!1,r.steps.productSubjectNeeded);var t=Object(l.a)({},g);t._values={value:e};var n="value",a=_,u="<".concat(n,">");u+=e,u+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var i=(new DOMParser).parseFromString(u,"text/xml").firstChild;return t.xml.append(i),a(t),s("productTitle",t)}(e.target.value)}},JSON.stringify(g._values))}),Object(M.jsx)(F.a,{title:r.form.keywords,children:Object(M.jsx)(K.a,{margin:"normal",fullWidth:!0,id:"keywords",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:P.name}),defaultValue:P._values?P._values.value:"",onBlur:function(e){return function(e){if(!e||!e.trim())return queryResult(!1,r.steps.productSubjectNeeded);var t=e.split(",");t.length>3&&(t.length=3,queryResult(!1,r.form.keywords)),e=t.join(",");var n=Object(l.a)({},P);n._values={value:e};var a="complex-value",u=w,i=(new DOMParser).parseFromString(n.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),c="<".concat(a,">");t.forEach((function(e,t){i[t].innerHTML="<value>".concat(e,"</value>"),c+=i[t].outerHTML})),c+="</".concat(a,">"),n.xml.querySelector(a)&&n.xml.querySelector(a).remove();var o=(new DOMParser).parseFromString(c,"text/xml").firstChild;return n.xml.append(o),u(n),s("productKeywords",n)}(e.target.value)}},JSON.stringify(P._values))}),Object(M.jsx)($.a,{id:"add-payment-method",sx:{display:"inline"},multiple:!0,limitTags:1,disableCloseOnSelect:!0,onBlur:function(){if(W){if(!W.length)return queryResult(!1,r.steps.productPaymentMethodsNeeded);var e=Object(l.a)({},I);e=Object(l.a)(Object(l.a)({},e),{},{_values:W});var t="complex-value",n=D,a=(new DOMParser).parseFromString(e.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),u="<".concat(t,">"),i=a[0],c="<values>";W.forEach((function(e){c+="<value>".concat(e.value,"</value>")})),c+="</values>",i.innerHTML=c,u+=i.outerHTML,W="",u+="</".concat(t,">"),e.xml.querySelector(t)&&e.xml.querySelector(t).remove();var o=(new DOMParser).parseFromString(u,"text/xml").firstChild;return e.xml.append(o),n(e),s("paymentMethod",e)}},onChange:function(e,t){W=t},defaultValue:I._values,options:I._options||[],getOptionLabel:function(e){return e.key},isOptionEqualToValue:function(e,t){return e.value===t.value},renderTags:function(e,t){return e.map((function(e,r){return Object(M.jsx)(X.a,Object(l.a)({variant:"outlined",label:e.value},t({index:r})))}))},renderOption:function(e,t,r){var n=r.selected;return Object(M.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(M.jsx)(Y.a,{style:{marginRight:8},checked:n}),t.value]}))},renderInput:function(e){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:I.name}),placeholder:r.form.selectOrInput}))}},JSON.stringify(I._values)),Object(M.jsx)($.a,{id:"add-price-unit",sx:{display:"inline"},onChange:function(e,t){return function(e){if(!e)return queryResult(!1,r.steps.productPriceUnitNeeded);var t=Object(l.a)({},E);t._values=e;var n="value",a=L,u="<".concat(n,">");u+=e.value,u+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var i=(new DOMParser).parseFromString(u,"text/xml").firstChild;return t.xml.append(i),a(t),s("priceUnit",t)}(t)},defaultValue:E._values,options:E._options||[],getOptionLabel:function(e){return e.key},isOptionEqualToValue:function(e,t){return e.value===t.value},renderOption:function(e,t,r){var n=r.selected;return Object(M.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(M.jsx)(Y.a,{style:{marginRight:8},checked:n}),t.key]}))},renderInput:function(e){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:E.name}),placeholder:r.form.selectOrInput}))}},E._values?JSON.stringify(E._values.value):""),Object(M.jsx)(F.a,{title:r.form.min_order_quantity,children:Object(M.jsx)(K.a,{type:"number",sx:{maxWidth:"280px",display:"none"},margin:"normal",id:"min_order_quantity",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:G.name}),value:pe._values?pe._values[0].quantity:G._values?G._values.value:"",InputProps:{endAdornment:Object(M.jsx)(Z.a,{position:"end",children:E._values?E._values.key:r.form.pieces})},onBlur:function(e){return Ve(e.target.value)}},JSON.stringify(pe._values))}),Object(M.jsx)("br",{}),Object(M.jsx)($.a,{id:"change-logistics-mode",multiple:!0,disableCloseOnSelect:!0,sx:{display:"inline"},onBlur:function(){if(B){if(!B.length)return queryResult(!1,r.steps.productLogisticsModeNeeded);var e=Object(l.a)({},Te),t="values",n=Ie,a="<".concat(t,">"),u="";(B=B.map((function(t){var r=e._options.find((function(e){return e.key===t})).value;return{key:t,value:r}}))).forEach((function(e){u+="<value>".concat(e.value,"</value>")})),a+=u+"</".concat(t,">"),e=Object(l.a)(Object(l.a)({},e),{},{_values:B}),B="",e.xml.querySelector(t)&&e.xml.querySelector(t).remove();var i=(new DOMParser).parseFromString(a,"text/xml").firstChild;return e.xml.append(i),n(e),s("logisticsMode",e)}},onChange:function(e,t){B=t},defaultValue:Te._values?Te._values.map((function(e){return e.key})):[],options:Te._options?Te._options.map((function(e){return e.key})):[],renderTags:function(e,t){return e.map((function(e,r){return Object(M.jsx)(X.a,Object(l.a)({variant:"outlined",label:e},t({index:r})))}))},renderOption:function(e,t,r){var n=r.selected;return Object(M.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(M.jsx)(Y.a,{style:{marginRight:8},checked:n}),t]}))},renderInput:function(e){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:Te.name}),placeholder:r.form.selectOrInput}))}},JSON.stringify(Te._values)),Object(M.jsx)(F.a,{title:r.form.subject,children:Object(M.jsx)(K.a,{margin:"normal",id:"port",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:Pe.name}),defaultValue:Pe._values?Pe._values.value:"",onBlur:function(e){return function(e){if(!e||!e.trim())return queryResult(!1,r.steps.productPortNeeded);var t=Object(l.a)({},Pe);t._values={value:e};var n="value",a=Ce,u="<".concat(n,">");u+=e,u+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var i=(new DOMParser).parseFromString(u,"text/xml").firstChild;return t.xml.append(i),a(t),s("port",t)}(e.target.value)}},JSON.stringify(Pe._values))}),Object(M.jsx)(F.a,{title:r.form.subject,children:Object(M.jsx)(K.a,{margin:"normal",id:"packaging-description",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:Re.name}),defaultValue:Re._values?Re._values.value:"",onBlur:function(e){return function(e){if(!e||!e.trim())return queryResult(!1,r.steps.productPackagingDescriptionNeeded);var t=Object(l.a)({},Re);t._values={value:e};var n="value",a=Ae,u="<".concat(n,">");u+=e,u+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var i=(new DOMParser).parseFromString(u,"text/xml").firstChild;return t.xml.append(i),a(t),s("wholeSalePkgDesc",t)}(e.target.value)}},JSON.stringify(Re._values))}),Object(M.jsx)("hr",{}),Object(M.jsxs)(ee.a,{size:"small",children:[Object(M.jsx)(te.a,{children:Object(M.jsxs)(re.a,{children:[Object(M.jsx)(ne.a,{children:r.table.min_order_quantity}),Object(M.jsx)(ne.a,{children:r.table.price}),Object(M.jsx)(ne.a,{children:Object(M.jsx)(k.a,{startIcon:je?Object(M.jsx)(ue.a,{}):Object(M.jsx)(le.a,{}),onClick:function(){if(je)Ue("edit");else{var e=pe._values,t=e[e.length-1];U=Object(l.a)({},t)}be((function(e){return!e}))},children:je?r.steps.editDone:r.steps.editPrice})})]})}),Object(M.jsx)(ae.a,{children:pe&&pe._values?pe._values.map((function(e,t){return Object(M.jsxs)(re.a,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[Object(M.jsx)(ne.a,{children:Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(M.jsx)(m.a,{sx:{display:"inline"},children:"\u2264"}),je&&t===pe._values.length-1?Object(M.jsx)(K.a,{size:"small",variant:"outlined",type:"number",defaultValue:e.quantity,onBlur:function(e){return Be("quantity",e.target.value,t)}}):e.quantity,Object(M.jsxs)(m.a,{sx:{display:"inline"},children:["&nbsp;".encodeHTMLEntity()," ",E._values?E._values.key:""]})]})}),Object(M.jsx)(ne.a,{component:"th",scope:"row",children:je&&t===pe._values.length-1?Object(M.jsx)(K.a,{size:"small",variant:"outlined",type:"number",defaultValue:e.price,onBlur:function(e){return Be("price",e.target.value,t)}}):e.price}),Object(M.jsx)(ne.a,{children:0===t?Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ie.a,{}),onClick:function(){return Ue("add",t)},children:r.steps.add}):Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ce.a,{}),onClick:function(){return Ue("remove",t)},children:r.steps.remove})})]},t)})):Object(M.jsx)(M.Fragment,{})})]}),Object(M.jsx)("hr",{}),Object(M.jsxs)(ee.a,{size:"small",children:[Object(M.jsx)(te.a,{children:Object(M.jsxs)(re.a,{children:[Object(M.jsx)(ne.a,{children:r.table.min_order_quantity}),Object(M.jsx)(ne.a,{children:r.table.day}),Object(M.jsx)(ne.a,{children:Object(M.jsx)(k.a,{startIcon:Se?Object(M.jsx)(ue.a,{}):Object(M.jsx)(le.a,{}),onClick:function(){if(Se)Je("edit");else{var e=Oe._values,t=e[e.length-1];Q=Object(l.a)({},t)}ke((function(e){return!e}))},children:Se?r.steps.editDone:r.steps.editPeriod})})]})}),Object(M.jsx)(ae.a,{children:Oe&&Oe._values?Oe._values.map((function(e,t){return Object(M.jsxs)(re.a,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[Object(M.jsx)(ne.a,{children:Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(M.jsx)(m.a,{sx:{display:"inline"},children:"\u2264"}),Se&&t===Oe._values.length-1?Object(M.jsx)(K.a,{size:"small",variant:"outlined",type:"number",defaultValue:e.quantity,onBlur:function(e){return Qe("quantity",e.target.value,t)}}):e.quantity,Object(M.jsxs)(m.a,{sx:{display:"inline"},children:["&nbsp;".encodeHTMLEntity()," ",E._values?E._values.key:""]})]})}),Object(M.jsx)(ne.a,{component:"th",scope:"row",children:Se&&t===Oe._values.length-1?Object(M.jsx)(K.a,{size:"small",variant:"outlined",type:"number",defaultValue:e.day,onBlur:function(e){return Qe("day",e.target.value,t)}}):e.day}),Object(M.jsx)(ne.a,{children:0===t?Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ie.a,{}),onClick:function(){return Je("add",t)},children:r.steps.add}):Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ce.a,{}),onClick:function(){return Je("remove",t)},children:r.steps.remove})})]},t)})):Object(M.jsx)(M.Fragment,{})})]})]})},de=r(201),pe=r(321),fe=r(376);var ve=function(e){var t=e.langPack,r=e.xmlSchema,n=e.productModified,a=e.xmlGetField,u=e.onModified;console.log("attributes running");var i=Object(o.useState)({}),s=Object(c.a)(i,2),d=s[0],p=s[1],f=Object(o.useState)(!1),v=Object(c.a)(f,2),j=v[0],b=v[1],x=Object(o.useState)(""),h=Object(c.a)(x,2),O=h[0],y=h[1];Object(o.useEffect)((function(){if(r){var e=n.icbuCatProp;e?p(e):function(){var e=a("icbuCatProp");if(!e||e._values||e._options)return;e.values&&(e._values=e.values.filter((function(e){return e.name})).sort((function(e,t){return e.type.length-t.type.length})),e._values=g(e._values));e.options&&(e._options=e.options.filter((function(e){return e.name})).sort((function(e,t){return e.type.length-t.type.length})),e._options=_(e._options));p(e)}()}}),[r]);var g=function e(t){if(!t||!t.length)return t;var r=[];return t.forEach((function(t){var n=Object(l.a)({},t),a=n,u=a.type,i=a.displayName,c=a.inputValue,o=a.value,s=a.values;if(void 0!==o){var d={};void 0!==i&&(d.key=i),void 0!==c&&(d.key=c),void 0!==o&&(d.value=o),Object.keys(d).length&&(n=Object(l.a)(Object(l.a)({},n),d))}else if(["input","singleCheck"].find((function(e){return e===u}))){var p={};void 0!==s[0].inputValue&&(p.key=s[0].inputValue),void 0!==s[0].value&&(p.value=s[0].value),Object.keys(p).length&&(n._values=p)}else{var f=e(s);f&&(n._values=f)}r.push(n)})),r},_=function e(t){if(!t||!t.length)return t;var r=[];return t.forEach((function(t){var n=Object(l.a)({},t),a=n,u=a.type,i=a.options,c=a.displayName,o=a.inputValue,s=a.value;if(void 0!==s){var d={};void 0!==c&&(d.key=c),void 0!==o&&(d.key=o),void 0!==s&&(d.value=s),Object.keys(d).length&&(n=Object(l.a)(Object(l.a)({},n),d))}else if(/input/gi.test(u))n._options=!1;else{var p=e(i);if(p)n._options=p;else{var f={};i&&void 0!==i[0].displayName&&(f.key=i[0].displayName),i&&void 0!==i[0].value&&(f.value=i[0].value),Object.keys(f).length&&(n._options=[f])}}r.push(n)})),r};function S(e,t){var r=e._values,n=[],a=p,l="complex-value",i=(new DOMParser).parseFromString(e.xml.outerHTML,"text/xml").firstChild,c="<".concat(l,">");r.forEach((function(e,t){var r,a=e.type,u=e.id,l=e._values,o=i.querySelector("fields > field#".concat(u));if(o)if(o.innerHTML="",/multi(?!Complex)/.test(a)){var s="";l.forEach((function(e){var t=e.key,r=e.value;s+='<value inputValue="'.concat(t,'">').concat(r,"</value>")}));var d=document.createElement("values");d.innerHTML=s,s?(o.innerHTML=d.outerHTML,c+=o.outerHTML):n.push(t)}else{var p=l.key,f=l.value,v=document.createElement("value");v.setAttribute("inputValue",p),v.innerText=f;void 0!==(r=p)&&""!==String(r).trim()&&null!==r?(o.innerHTML=v.outerHTML,c+=o.outerHTML):n.push(t)}})),c+="</".concat(l,">"),n.length&&t&&(e._values=r.filter((function(e,t){return!n.find((function(e){return e===t}))}))),e.xml.querySelector(l)&&e.xml.querySelector(l).remove();var o=(new DOMParser).parseFromString(c,"text/xml").firstChild;return e.xml.append(o),a(e),u("icbuCatProp",e)}var q=function(){if(console.log("confirming"),!oe)return console.log("\u672a\u4fee\u6539\u4efb\u4f55\u5c5e\u6027\u5462");var e=oe,t=Object(c.a)(e,2),r=t[0],n=t[1],a=r.id,u=r.type,i=r._values,o=Object(l.a)({},d),s=o._values,p=d._options.find((function(e){return e.id===a}));if(/multi(?!Complex)/.test(u))i=[],n.forEach((function(e){if(p._options){var t=p._options.find((function(t){return t.key===e}));t?i.push(t):i.push({key:"",value:e})}else i.push({key:"",value:e})}));else if(p._options){var f=p._options.find((function(e){return e.key===n}));i=f||{key:n,value:""}}else i.key=n;r._values=i,(s=s.filter((function(e){return e.id!==a}))).push(r),o._values=s,S(o)},P=function(e,t){oe=[e,t]};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{style:{paddingTop:"10px",paddingBottom:"20px"},children:j?Object(M.jsx)(M.Fragment,{children:d._options&&d._options.length?Object(M.jsxs)("span",{style:{display:"flex",flexDirection:"row",alignItems:"stretch"},children:[Object(M.jsx)($.a,{id:"attribute-options",sx:{display:"inline"},multiple:!0,disableCloseOnSelect:!0,onChange:function(e,t){y(t)},options:d._options.map((function(e){return e.name})),renderOption:function(e,t,r){var n=r.selected;return Object(M.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(M.jsx)(Y.a,{style:{marginRight:8},checked:n}),t]}))},renderInput:function(e){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:d.name}),placeholder:t.form.selectOrInput}))}},d._options?d._options:"attribute-options"),Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ue.a,{}),onClick:function(){if(O){var e=O.map((function(e){return d._options.find((function(t){return t.name===e}))})),t=Object(l.a)({},d),r=t._values||[];e.forEach((function(e){if(!r.length||!r.find((function(t){return t.id===e.id}))){var t=e.id,n=e.name,a=e.type,u={id:t,name:n,type:a};u._values=/multi(?!Complex)/.test(a)?[]:{},r.push(u)}})),t._values=r,p(t),y(""),b((function(e){return!e}))}},children:t.common.yes}),Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(pe.a,{}),onClick:function(){return b((function(e){return!e}))},children:t.common.no})]}):Object(M.jsx)(m.a,{variant:"body1",children:t.form.attributeMissing})}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(F.a,{title:t.steps.addAttributes,children:Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ie.a,{}),onClick:function(){return b((function(e){return!e}))},children:t.steps.addAttributes})}),Object(M.jsx)(F.a,{title:t.steps.clearAttributes,children:Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(fe.a,{}),onClick:function(){return console.log("clearing"),S(Object(l.a)({},d),!0)},children:t.steps.clearAttributes})})]})}),Object(M.jsx)(de.a,{}),Object(M.jsx)("br",{}),d._values&&d._values.length?d._values.map((function(e){return/input/gi.test(e.type)?Object(M.jsx)(K.a,{id:"current-attributes-input-only",fullWidth:!1,defaultValue:e._values.key||"",onBlur:q,onChange:function(t){return P(e,t.target.value)},sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:e.name+" _ "+e.type}),placeholder:t.form.selectOrInput},e.id+JSON.stringify(e._values)):/multi(?!Complex)/.test(e.type)?Object(M.jsx)($.a,{id:"current-attributes-multiple",sx:{display:"inline"},limitTags:1,multiple:!0,disableCloseOnSelect:!0,onBlur:q,onChange:function(t,r){return P(e,r)},options:d._options.find((function(t){return t.id===e.id}))._options.map((function(e){return e.key})),defaultValue:e._values.map((function(e){return e.key})),renderTags:function(e,t){return e.map((function(e,r){return Object(M.jsx)(X.a,Object(l.a)({variant:"outlined",label:e},t({index:r})))}))},renderOption:function(e,t,r){var n=r.selected;return Object(M.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(M.jsx)(Y.a,{style:{marginRight:8},checked:n}),t]}))},renderInput:function(r){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},r),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:e.name+" _ "+e.type}),placeholder:t.form.selectOrInput}))}},e.id+JSON.stringify(e._values)):Object(M.jsx)($.a,{id:"current-attributes-single",sx:{display:"inline"},onBlur:q,onChange:function(t,r){return P(e,r)},defaultValue:e._values.key,options:d._options.find((function(t){return t.id===e.id}))._options.map((function(e){return e.key})),renderInput:function(r){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},r),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:e.name+" _ "+e.type}),placeholder:t.form.selectOrInput}))}},e.id+JSON.stringify(e._values))})):Object(M.jsx)(M.Fragment,{})]})};var me=function(e){var t=e.langPack,r=e.onModified,n=e.productModified,a=e.xmlSchema,u=e.xmlGetField;console.log("service running");var i="",s=Object(o.useState)({}),d=Object(c.a)(s,2),p=d[0],f=d[1],v=Object(o.useState)(!1),j=Object(c.a)(v,2),b=j[0],x=j[1],h=Object(o.useState)(""),O=Object(c.a)(h,2),y=O[0],g=O[1],_=Object(o.useState)({}),S=Object(c.a)(_,2),q=S[0],P=S[1];Object(o.useEffect)((function(){if(a){var e=n.customizedServices,t=n.productLightCustom;e?f(e):function(){var e=u("customizedServices");if(!e)return;e.values&&(e._values=e.values.filter((function(e){return"complex"===e.type})).map((function(e){return{key:e.values[1].values[0].value,value:Number(e.values[0].values[0].value)}})));var t=e.options.filter((function(e){return"complex"===e.type}));t.length&&(e._options=t[0].options[1].options.filter((function(e){return"-1"!==e.value})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{key:e.displayName,value:e.value})})));f(e)}(),t?P(t):function(){var e=u("productLightCustom");if(!e)return;e._options=e.options?e.options.map((function(e){return{key:e.displayName,value:e.value}})):[],e.values?(e._values={value:e.values[0].value},e._values.key=e._options.find((function(t){return t.value===e._values.value})).key):e._values={};P(e)}()}}),[a]);var C=function(e){g(e)},w=function(){if(i){var e=Object(l.a)({},p),n=e._values.filter((function(e){return e.key!==i.key}));(n=(n=n.filter((function(e){return e.value}))).filter((function(e){return!isNaN(e.value)}))).push(i),i="",e._values=n;var a=f,u="complex-value",c=(new DOMParser).parseFromString(e.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field[type=complex]"),o="<".concat(u,">");n.forEach((function(e,t){c[t].querySelector("fields > field#custom_type").innerHTML="<value>".concat(e.key,"</value>"),c[t].querySelector("fields > field#quantity").innerHTML="<value>".concat(e.value,"</value>"),o+=c[t].outerHTML})),o=(o+="</".concat(u,">")).replace(/fields/g,u),e.xml.querySelector(u)&&e.xml.querySelector(u).remove();var s=(new DOMParser).parseFromString(o,"text/xml").firstChild;e.xml.append(s),a(e),r("customizedServices",e),function(e){if(!e||!e.trim())return queryResult(!1,t.steps.productCustomizationNeeded);if(!e||!e.trim())return queryResult(!1,"\u8bf7\u8f93\u5165\u5b9a\u5236\u7c7b\u578b");var n=Object(l.a)({},q),a=P,u="value",i="<".concat(u,">");i+=e,i+="</".concat(u,">"),n.xml.querySelector(u)&&n.xml.querySelector(u).remove();var c=(new DOMParser).parseFromString(i,"text/xml").firstChild;n.xml.append(c),a(n),r("productLightCustom",n)}("1")}};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{style:{paddingTop:"10px",paddingBottom:"20px"},children:b?Object(M.jsxs)("span",{style:{display:"flex",flexDirection:"row",alignItems:"stretch"},children:[p._options&&p._options.length?Object(M.jsx)($.a,{id:"add-custom",freeSolo:!0,sx:{display:"inline"},onChange:function(e,t){return C(t)},onInputChange:function(e,t){return C(t)},options:p._options.map((function(e){return e.key})),renderInput:function(e){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:p.name}),placeholder:t.form.selectOrInput}))}},p._options||"options"):Object(M.jsx)(M.Fragment,{}),Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ue.a,{}),onClick:function(){return function(){if(y&&y.trim()){var e=Object(l.a)({},p),t=e._options.find((function(e){return e.key===y})),r=t?t.value:y;e._values||(e._values=[]);var n=e._values.filter((function(e){return e.key!==r}));n.length>=5||(n.push({key:r,value:1}),e._values=n,f(e),console.log(e),g(""),x((function(e){return!e})))}}()},children:t.common.yes}),Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(pe.a,{}),onClick:function(){return x((function(e){return!e}))},children:t.common.no})]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(F.a,{title:t.steps.addCustomInfo,children:Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(ie.a,{}),onClick:function(){return x((function(e){return!e}))},children:t.steps.addCustomInfo})}),Object(M.jsx)(F.a,{title:t.steps.clearCustomInfo,children:Object(M.jsx)(k.a,{startIcon:Object(M.jsx)(fe.a,{}),onClick:function(){var e=Object(l.a)({},p);e._values=e._values.filter((function(e){return e.value})),f(e)},children:t.steps.clearCustomInfo})})]})}),Object(M.jsx)(de.a,{}),Object(M.jsx)("br",{}),p._values&&p._values.length?p._values.map((function(e){return Object(M.jsx)(F.a,{title:t.table.min_order_quantity,children:Object(M.jsx)(K.a,{type:"number",fullWidth:!1,defaultValue:e.value,onChange:function(r){!function(e){i||(i={});var r=Number(e.value);if(isNaN(r))return queryResult(!1,t.steps.numberOnly);i={key:e.key,value:r}}({key:e.key,value:r.target.value})},onBlur:w,label:Object(M.jsx)(m.a,{variant:"h3",children:e.key}),placeholder:t.form.selectOrInput},e.key)})})):Object(M.jsx)(M.Fragment,{})]})};var je=function(e){var t=e.xmlSchema,r=e.langPack,n=e.productModified,a=e.xmlGetField,u=e.onModified;console.log("RTS running");var i=Object(o.useState)({}),s=Object(c.a)(i,2),d=s[0],p=s[1],f=Object(o.useState)({}),v=Object(c.a)(f,2),j=v[0],b=v[1],x=Object(o.useState)({}),h=Object(c.a)(x,2),O=h[0],y=h[1],g=Object(o.useState)({}),_=Object(c.a)(g,2),S=_[0],k=_[1],q=Object(o.useState)({}),P=Object(c.a)(q,2),C=P[0],w=P[1];return Object(o.useEffect)((function(){if(t){var e=n.shippingTemplateId,r=n.pkgWeight,u=n.pkgMeasure,l=n.saleType,i=n.batchNum;e?p(e):function(){var e=a("shippingTemplateId");if(!e)return;e._options=e.options?e.options.map((function(e){return{key:e.displayName,value:e.value}})):[],e.values&&(e._values={value:e.values[0].value},e._values.key=e._options.find((function(t){return t.value===e._values.value})).key);p(e)}(),r?b(r):function(){var e=a("pkgWeight");if(!e)return;e.values&&(e._values={value:e.values[0].value});b(e)}(),u?y(u):function(){var e=a("pkgMeasure");if(!e)return;if(e.values){e._values=e.values.map((function(e){return{key:e.id,value:e.values[0].value}}));var t=["length","width","height"];e._values.sort((function(e,r){return t.indexOf(e.key)-t.indexOf(r.key)}))}y(e)}(),l?k(l):function(){var e=a("saleType");if(!e)return;e._options=e.options?e.options.map((function(e){return{key:e.displayName,value:e.value}})):[],e.values&&(e._values={key:"",value:e.values[0].value},e._values.key=e._options.find((function(t){return t.value===e._values.value})).key);k(e)}(),i?w(i):function(){var e=a("batchNum");if(!e)return;e.values&&(e._values={value:e.values[0].value});w(e)}()}}),[t]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)($.a,{id:"select-shipping-template",sx:{display:"inline"},onChange:function(e,t){return function(e){if(!e)return queryResult(!1,r.steps.productSubjectNeeded);var t=Object(l.a)({},d);t._values=e;var n="value",a=p,i="<".concat(n,">");i+=e.value,i+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var c=(new DOMParser).parseFromString(i,"text/xml").firstChild;return t.xml.append(c),a(t),u("shippingTemplateId",t)}(t)},defaultValue:d._values,options:d._options||[],getOptionLabel:function(e){return e.key},isOptionEqualToValue:function(e,t){return e.value===t.value},renderOption:function(e,t,r){var n=r.selected;return Object(M.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(M.jsx)(Y.a,{style:{marginRight:8},checked:n}),t.key]}))},renderInput:function(e){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:d.name}),placeholder:r.form.selectOrInput}))}},JSON.stringify(d._values)),Object(M.jsx)(F.a,{title:r.steps.numberOnly,children:Object(M.jsx)(K.a,{margin:"normal",type:"number",id:"port",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:j.name}),defaultValue:j._values?j._values.value:"",onBlur:function(e){return function(e){if(!e)return queryResult(!1,r.steps.productWeightNeeded);var t=Object(l.a)({},j);t._values={value:e};var n="value",a=b,i="<".concat(n,">");i+=e,i+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var c=(new DOMParser).parseFromString(i,"text/xml").firstChild;return t.xml.append(c),a(t),u("pkgWeight",t)}(e.target.value)}},j._values)}),Object(M.jsx)(F.a,{title:r.form.measure,children:Object(M.jsx)(K.a,{margin:"normal",id:"measure",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:O.name}),defaultValue:O._values?"".concat(O._values[0].value," * ").concat(O._values[1].value," * ").concat(O._values[2].value):"",onBlur:function(e){return function(e){if(!e)return queryResult(!1,r.steps.productMeasureNeeded);var t=e.split("*");if(t.length<3)return queryResult(!1,r.steps.productMeasureNeeded);var n=!1;if(t.forEach((function(e){e&&!isNaN(e)||(n=!0)})),n)return queryResult(!1,r.steps.productMeasureNeeded);var a=Object(l.a)({},O),i=["length","width","height"];a._values=t.map((function(e,t){return{key:i[t],value:Number(e)}}));var c="complex-value",o=y,s=(new DOMParser).parseFromString(a.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),d="<".concat(c,">"),p=Array.from(s);p.find((function(e){return"length"===e.id})).innerHTML="<value>".concat(a._values[0].value,"</value>"),p.find((function(e){return"width"===e.id})).innerHTML="<value>".concat(a._values[1].value,"</value>"),p.find((function(e){return"height"===e.id})).innerHTML="<value>".concat(a._values[2].value,"</value>"),p.forEach((function(e){d+=e.outerHTML})),d+="</".concat(c,">"),a.xml.querySelector(c)&&a.xml.querySelector(c).remove();var f=(new DOMParser).parseFromString(d,"text/xml").firstChild;return a.xml.append(f),o(a),u("pkgMeasure",a)}(e.target.value)}},JSON.stringify(O._values))}),Object(M.jsx)($.a,{id:"add-sale-type",sx:{display:"inline"},onChange:function(e,t){return function(e){if(!e)return queryResult(!1,r.steps.productTypeNeeded);var t=Object(l.a)({},S);t._values=e;var n="value",a=k,i="<".concat(n,">");i+=e.value,i+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var c=(new DOMParser).parseFromString(i,"text/xml").firstChild;return t.xml.append(c),a(t),u("saleType",t)}(t)},defaultValue:S._values,options:S._options||[],getOptionLabel:function(e){return e.key},isOptionEqualToValue:function(e,t){return e.value===t.value},renderOption:function(e,t,r){var n=r.selected;return Object(M.jsxs)("li",Object(l.a)(Object(l.a)({},e),{},{children:[Object(M.jsx)(Y.a,{style:{marginRight:8},checked:n}),t.key]}))},renderInput:function(e){return Object(M.jsx)(K.a,Object(l.a)(Object(l.a)({},e),{},{fullWidth:!1,sx:{marginTop:"13px",minWidth:"220px"},label:Object(M.jsx)(m.a,{variant:"h3",children:S.name}),placeholder:r.form.selectOrInput}))}},JSON.stringify(S._values)),Object(M.jsx)(F.a,{title:r.steps.numberOnly,sx:{display:S._values&&"normal"!==S._values.value?"inline-block":"none"},children:Object(M.jsx)(K.a,{margin:"normal",type:"number",id:"batch",variant:"outlined",label:Object(M.jsx)(m.a,{variant:"h3",children:C.name}),defaultValue:C._values?C._values.value:"",onBlur:function(e){return function(e){if(!e)return queryResult(!1,r.steps.productWeightNeeded);var t=Object(l.a)({},C);t._values={value:e};var n="value",a=w,i="<".concat(n,">");i+=e,i+="</".concat(n,">"),t.xml.querySelector(n)&&t.xml.querySelector(n).remove();var c=(new DOMParser).parseFromString(i,"text/xml").firstChild;return t.xml.append(c),a(t),u("batchNum",t)}(e.target.value)}},C._values)})]})},be=r(106),xe=r(383),he=r.n(xe),Oe=r(426),ye=r(427),ge=Object(w.a)(Object(o.lazy)((function(){return Promise.all([r.e(0),r.e(2)]).then(r.bind(null,433))})));var _e,Se,ke,qe=function(e){var t=e.localization,r=e.productModified,n=e.onModified,u=e.xmlSchema,s=e.xmlGetField,d=e.langPack,p=Object(o.useRef)(null),f=Object(o.useRef)(null),v=Object(o.useRef)(null),j=Object(o.useState)({}),b=Object(c.a)(j,2),x=b[0],h=b[1],O=Object(o.useState)({}),y=Object(c.a)(O,2),g=y[0],_=y[1],S=Object(o.useState)([]),q=Object(c.a)(S,2),P=q[0],C=q[1],w=Object(o.useState)(!1),N=Object(c.a)(w,2),T=N[0],I=N[1];function F(e){if(!e||!e.trim())return queryResult(!1,d.steps.productDetailsNeeded);if(e===x._values.value)return console.log("\u672a\u4fee\u6539");e=e.replace(/\n/g,"").trim();var t=Object(l.a)({},x);t._values={value:e};var r=h,a=e.trim().encodeNonASCII();return a.length>5e4?queryResult(!1,d.form.descriptionOverflow):(t.xml.innerHTML="",t.xml.append(document.createElement("value")),t.xml.children[0].innerText=a,r(t),function(e){var t=Object(l.a)({},g);t._options.find((function(t){return t.value===e}))&&(t._values={key:t._options.find((function(t){return t.value===e})).key,value:e});var r="value",a=_,u="<".concat(r,">");u+=e,u+="</".concat(r,">"),t.xml.innerHTML=u.trim().encodeHTMLEntity(),a(t),n("productDescType",t)}("2"),n("superText",t))}Object(o.useEffect)((function(){if(u){var e=r.superText,t=r.productDescType;e?h(e):function(){var e=s("superText");console.log(e),e.values&&(e._values={value:String(e.values[0].value).encodeHTMLEntity()});h(e)}(),t?_(t):function(){var e=s("productDescType");e._options=e.options?e.options.map((function(e){return{key:e.displayName,value:e.value}})):[];var t=e.values?e.values[0].value:"2";if(e._options.find((function(e){return e.value===t}))){var r=e._options.find((function(e){return e.value===t})).key;e._values={key:r,value:t}}_(e)}(),f.current&&v.current&&setTimeout((function(){Array.from(document.body.querySelectorAll('svg[data-testid="BuildIcon"]')).forEach((function(e){return e.style="fill: orangered; stroke: orangered;"})),Array.from(document.body.querySelectorAll('svg[data-testid="CloudIcon"]')).forEach((function(e){return e.style="fill: skyblue; stroke: skyblue;"}))}),888)}}),[u]);var D=function(e){if(I(!1),e){var t=P.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{key:e.id,value:e.url})}));return E(t)}return C([])},E=function(e){(console.log(e),e.length)&&F(e.map((function(e){return"<br /><img src='".concat(e.url,"' />")})).join("")+p.current.value)};function L(e){return H.apply(this,arguments)}function H(){return(H=Object(i.a)(a.a.mark((function e(t){var r,n,u,l,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.photoUploadQuery({file_name:t.name||"image.png",image_bytes:t,group_id:0}),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,n.response.result));case 6:if(u=ma.photoUploadCheck(n),l=u.response,i=l.status,c=l.result,i){e.next=10;break}return e.abrupt("return",queryResult(i,c));case 10:return queryResult(i,d.steps.uploadSuccess),e.abrupt("return",setTimeout((function(){return z(c)}),1234));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){console.log("replacing");for(var t=p.current.component.workplace.querySelectorAll("img"),r=0,n=Array.from(t);r<n.length;r++){var a=n[r];if(!/alicdn.com/.test(a.src)){a.src=e.photobank_url;break}}}return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{variant:"h4",sx:{paddingTop:"6px",paddingBottom:"6px",color:"orangered"},children:d.steps.productDescriptionTip}),Object(M.jsx)("div",{style:{display:"block",flexDirection:"column",justifyContent:"center"},children:Object(M.jsxs)(R.a,{onClose:function(){return D(!0)},open:T,children:[Object(M.jsx)(A.a,{children:d.steps.selectFromCloud}),Object(M.jsx)(ge,{onPhotoSelected:function(e){e.length&&C(e)}}),Object(M.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(){return D(!0)},children:d.common.yes}),Object(M.jsx)(k.a,{variant:"contained",color:"error",onClick:function(){return D()},children:d.common.no})]})}),Object(M.jsxs)("div",{style:{display:"none"},children:[Object(M.jsx)(Oe.a,{ref:f}),Object(M.jsx)(ye.a,{ref:v})]}),Object(M.jsx)(he.a,{ref:p,value:x._values?x._values.value:"",config:{language:"zhCN"===t.locale?"zh_cn":"en_us",enter:"DIV",defaultActionOnPaste:"insert_clear_html",toolbarAdaptive:!1,toolbarButtonSize:"large",imageProcessor:{replaceDataURIToBlobIdInView:!1},buttons:["source","bold","italic","underline","eraser","ul","ol","left","font","fontsize","brush","image","copyformat","copy","paste","table","link",{name:"toggleSmartEdit",icon:f.current?f.current.outerHTML:"",tooltip:d.steps.toggleSmartEdit,exec:function(e,t,r){var n=e.value,a=(n=(n=n.replace(/\n/gi,"")).replace(/>/gi,">\n")).split("\n");n=(a=a.map((function(e){return/<img src/gi.test(e)?e=/ class="magic-(\d{1,3})x000"/gi.test(e)?e.replace(/x000/gi,""):e.replace(/ class="magic-(\d{1,3})"/gi,' class="magic-$1x000"'):e}))).join(""),e.value=n}},{name:"iconCloudImage",icon:v.current?v.current.outerHTML:"",tooltip:d.steps.selectFromCloud,exec:function(e,t,r){I(!0)}}],events:{paste:function(e){console.log("\u7c98\u8d34...",e);var t=e.clipboardData&&e.clipboardData.items;if(t&&t.length){var r,n=Object(be.a)(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(null!=a&&null!=a.type.match("image")){var u=a.getAsFile();return console.log(u),null==u?console.log("\u65e0\u6cd5\u83b7\u53d6\u56fe\u7247"):u.size>1e7?queryResult(!1,"size no larger than 10M. \u56fe\u7247\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc710M"):L(u)}}}catch(l){n.e(l)}finally{n.f()}}},beforePasteInsert:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\u7c98\u8d34\u5185\u5bb9\u690d\u5165\u524d...");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},tabIndex:1,onBlur:function(e){return F(e)},onChange:function(e){}})]})},Me=r(322),Pe={};t.default=function(){console.log("productEdit app running");var e=Object(s.c)((function(e){return e.localization})),t=Object(s.c)((function(e){return e.globalization})),r=Object(o.useState)(O.a[e.locale]),n=Object(c.a)(r,2),y=n[0],g=n[1],_=Object(o.useState)(t.baseData.loginData),S=Object(c.a)(_,1)[0],k=Object(d.f)(),q=Object(o.useState)(0),C=Object(c.a)(q,2),w=C[0],N=C[1],T=Object(o.useState)({panel1:!0,panel2:!1,panel3:!1,panel4:!1}),I=Object(c.a)(T,2),F=I[0],D=I[1],R=Object(p.a)(Object(x.a)().breakpoints.down("md"))?3:6,A=new URLSearchParams(location.pathname.replace("/product/","")),E=A.get("product_id"),L=A.get("group_id")||"",H=A.get("category_id");_e=E?"update":"add";var z=Object(o.useState)(null),V=Object(c.a)(z,2),W=V[0],B=V[1],U=Object(o.useState)(0),Q=Object(c.a)(U,2),J=Q[0],K=Q[1],$=Object(o.useState)(!1),X=Object(c.a)($,2),Y=X[0],Z=X[1];function ee(){return(ee=Object(i.a)(a.a.mark((function e(t){var r,n,u,l,i,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productDetailQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,y.common.netFail+"\n"+n.response.result));case 6:if(u=ma.productDetailCheck(n),l=u.response,i=l.status,c=l.result,i&&c){e.next=10;break}return e.abrupt("return",queryResult(i,c));case 10:o=c.category_id,s=c.rts,o&&K(o),E&&te({product_id:E}),Z(s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return(re=Object(i.a)(a.a.mark((function e(t){var r,n,u,l,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productIdQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,y.common.netFail+"\n"+n.response.result));case 6:if(u=ma.productIdCheck(n),l=u.response,i=l.status,c=l.result,i){e.next=10;break}return e.abrupt("return",queryResult(i,c));case 10:return ue({product_id:ke=c}),e.abrupt("return",console.log(c));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(i.a)(a.a.mark((function e(t){var r,n,u,l,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return-1,r=ma.photoUploadQuery({file_name:t.name,image_bytes:t,group_id:-1}),e.next=4,fetchAPI(r);case 4:if((n=e.sent).response.status){e.next=7;break}return e.abrupt("return",queryResult(!1,y.common.yes));case 7:if(u=ma.photoUploadCheck(n),l=u.response,i=l.status,c=l.result,i){e.next=11;break}return e.abrupt("return",queryResult(!1,c));case 11:return queryResult(!0,y.steps.uploadSuccess),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(i.a)(a.a.mark((function t(r){var n,u,i,c,o,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ma.productSchemaQuery({param_product_top_publish_request:JSON.stringify(Object(l.a)(Object(l.a)({},r),{},{language:"enUS"===e.locale?"en_US":"zh"}))}),t.next=3,fetchAPI(n);case 3:if((u=t.sent).response.status){t.next=6;break}return t.abrupt("return",queryResult(!1,y.common.netFail+"\n"+u.response.result));case 6:if(i=ma.productSchemaCheck(u),c=i.response,o=c.status,s=c.result,o){t.next=10;break}return t.abrupt("return",queryResult(o,s));case 10:return t.abrupt("return",ie(s));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(i.a)(a.a.mark((function t(r){var n,u,i,c,o,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ma.productSchemaRenderQuery({param_product_top_publish_request:JSON.stringify(Object(l.a)(Object(l.a)({},r),{},{language:"enUS"===e.locale?"en_US":"zh"}))}),t.next=3,fetchAPI(n);case 3:if((u=t.sent).response.status){t.next=6;break}return t.abrupt("return",queryResult(!1,y.common.netFail+"\n"+u.response.result));case 6:if(i=ma.productSchemaRenderCheck(u),c=i.response,o=c.status,s=c.result,o){t.next=10;break}return t.abrupt("return",queryResult(o,s));case 10:return t.abrupt("return",ie(s));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ie(e){if(Se=(new DOMParser).parseFromString(e,"text/xml"),console.log(Se),B(Se),window.productSchema=Se,Se.querySelector("parsererror"))return queryResult(!1,y.steps.uneditable)}function ce(){return(ce=Object(i.a)(a.a.mark((function t(r){var n,u,l,i,c,o,s,d,p,f,v,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"add"===_e?(n=ma.productSchemaAddQuery,u=ma.productSchemaAddCheck,i=H):(n=ma.productSchemaUpdateQuery,u=ma.productSchemaUpdateCheck,l=ke,i=J),c=(new DOMParser).parseFromString(r,"text/xml"),Array.from(c.querySelectorAll("itemSchema > field > rules, options, label-group, fields")).forEach((function(e){return e.remove()})),Array.from(c.children[0].children).forEach((function(e){return e.children.length?"":e.remove()})),r=c.children[0].outerHTML,o={xml:r,cat_id:Number(i),language:"enUS"===e.locale?"en_US":"zh"},l&&(o.product_id=l),s=n({param_product_top_publish_request:JSON.stringify(o)}),t.next=10,fetchAPI(s);case 10:if((d=t.sent).response.status){t.next=13;break}return t.abrupt("return",queryResult(!1,y.common.netFail+"\n"+d.response.result));case 13:if(p=u(d),f=p.response,v=f.status,m=f.result,v){t.next=17;break}return t.abrupt("return",queryResult(v,m));case 17:return queryResult(!0,"add"===_e?y.steps.addSuccess:y.steps.updateSuccess),t.abrupt("return");case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oe(e){if(W){var t=W.querySelector('itemSchema > field[id="'.concat(e,'"]'));if(t)return de([t])[0]}}function de(e){for(var t=[],r=Array.from(e),n=0;n<r.length;n++){var a=r[n],u=pe(a);u||(u={}),u.xml=a,u.options&&u.options.length&&(u.options=de(u.options)),u.values&&u.values.length&&(u.values=de(u.values)),a.innerHTML&&!a.children.length&&(u.value=a.innerHTML),t.push(u)}return t}function pe(e){var t,r,n=function(e){var t=e.getAttributeObj();return t||(t={}),Object(l.a)(Object(l.a)({},t),{},{xml:e})}(e),a=n.type;return a?("multiComplex"===a?(t=e.querySelectorAll("fields > field"),r=e.querySelectorAll("complex-values > field")):"complex"===a?(t=e.querySelectorAll("fields > field"),r=e.querySelectorAll("complex-value > field")):"multiCheck"===a?(t=e.querySelectorAll("options > option"),r=e.querySelectorAll("values > value")):"multiInput"===a?r=e.querySelectorAll("values > value"):"singleCheck"===a?(t=e.querySelectorAll("options > option"),r=e.querySelectorAll("value")):"input"===a&&(r=e.querySelectorAll("value")),t&&t.length&&(n.options=t),r&&r.length&&(n.values=r),n):n}Object(o.useEffect)((function(){g(O.a[e.locale])}),[e.locale]),Object(o.useEffect)((function(){return console.log("I want product editing"),S?_e?("update"===_e?function(e){ee.apply(this,arguments)}({product_id:E}):function(e){ae.apply(this,arguments)}({cat_id:H}),function(){console.log("I leave product edit"),Pe={}}):queryResult(!1,y.steps.productIdError):k("/")}),[]);var fe=function(e,t){console.log("modified",e,t),console.log(t.xml),Pe[e]=t},be=function(e){return function(t,r){D((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},e,r))}))}};return Object(M.jsxs)(h.a,{title:"Product Edit --\u4ea7\u54c1\u7f16\u8f91",children:[Object(M.jsx)(P,{langPack:y,activeStep:w,setActiveStep:N}),0===w?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(G,{productModified:Pe,xmlSchema:W,localization:e,photoCols:R,rowHeight:200,uploadPhotos:function(e){return ne.apply(this,arguments)},xmlGetField:oe,onModified:fe,langPack:y}),Object(M.jsxs)(f.a,{expanded:F.panel1,onChange:be("panel1"),children:[Object(M.jsxs)(v.a,{expandIcon:Object(M.jsx)(b.a,{}),children:[Object(M.jsx)(m.a,{variant:"h2",sx:{width:"33%",flexShrink:0,color:"coral"},children:y.form.KeyInformation}),Object(M.jsx)(m.a,{sx:{color:"text.secondary"},children:y.steps.panel1})]}),Object(M.jsx)(j.a,{sx:{border:"1px groove"},children:Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(se,{productModified:Pe,group_id:L,xmlSchema:W,langPack:y,rtsProduct:Y,xmlGetField:oe,onModified:fe})})})]}),Object(M.jsxs)(f.a,{expanded:F.panel2,onChange:be("panel2"),children:[Object(M.jsxs)(v.a,{expandIcon:Object(M.jsx)(b.a,{}),children:[Object(M.jsx)(m.a,{variant:"h2",sx:{width:"33%",flexShrink:0,color:"red"},children:y.form.ProductAttributes}),Object(M.jsx)(m.a,{sx:{color:"text.secondary"},children:y.steps.panel2})]}),Object(M.jsx)(j.a,{sx:{border:"1px groove"},children:Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(ve,{productModified:Pe,xmlSchema:W,langPack:y,xmlGetField:oe,onModified:fe})})})]}),Object(M.jsxs)(f.a,{expanded:F.panel3,onChange:be("panel3"),children:[Object(M.jsxs)(v.a,{expandIcon:Object(M.jsx)(b.a,{}),children:[Object(M.jsx)(m.a,{variant:"h2",sx:{width:"33%",flexShrink:0,color:"orangered"},children:y.form.productService}),Object(M.jsx)(m.a,{sx:{color:"text.secondary"},children:y.steps.panel3})]}),Object(M.jsx)(j.a,{sx:{border:"1px groove"},children:Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(me,{productModified:Pe,xmlSchema:W,langPack:y,xmlGetField:oe,onModified:fe})})})]}),Object(M.jsxs)(f.a,{expanded:F.panel4,onChange:be("panel4"),sx:{display:Y?"block":"none"},children:[Object(M.jsxs)(v.a,{expandIcon:Object(M.jsx)(b.a,{}),children:[Object(M.jsx)(m.a,{variant:"h2",sx:{width:"33%",flexShrink:0,color:"orangered"},children:y.form.rtsProduct}),Object(M.jsx)(m.a,{sx:{color:"text.secondary"},children:y.steps.panel4})]}),Object(M.jsx)(j.a,{sx:{border:"1px groove"},children:Y?Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(je,{productModified:Pe,xmlSchema:W,langPack:y,xmlGetField:oe,onModified:fe})}):Object(M.jsx)(M.Fragment,{})})]}),Object(M.jsx)("br",{})]}):1===w?Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(qe,{productModified:Pe,localization:e,xmlGetField:oe,onModified:fe,xmlSchema:W,langPack:y})}):2===w?Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(Me.a,{langPack:y,productModified:Pe,modificationSubmission:function(){if(!Object.keys(Pe).length)return queryResult(!1,y.steps.modificationNull);console.log(Pe);var e=Object.values(Pe).map((function(e){return e.xml})),t="<itemSchema>";e.forEach((function(e){return t+=e.outerHTML})),t+="</itemSchema>";var r=(new DOMParser).parseFromString(t,"text/xml").firstChild;!function(e){ce.apply(this,arguments)}(t=(t=(t=r.outerHTML.replace(/ xmlns="http:\/\/www.w3.org\/1999\/xhtml"/gi,"")).replace(/inputvalue/g,"inputValue")).encodeNonASCII())}})}):Object(M.jsx)(M.Fragment,{})]})}}}]);
//# sourceMappingURL=13.2bbf4388.chunk.js.map