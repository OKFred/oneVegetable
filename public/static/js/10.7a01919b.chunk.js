(this["webpackJsonperp-dashboard"]=this["webpackJsonperp-dashboard"]||[]).push([[10],{323:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={enUS:{folder:{currentFolder:"please select",needFolderName:"please input name for new folder",addNewFolder:"add new folder",folderNull:"folder not found",dataNull:"data not found"},table:{tableHeader:"Products",categoryName:"category name",productId:"product id",subject:"subject",status:"status",display:"display",attributes:"attributes",keywords:"keywords",price:"price (range)",min_order_quantity:"min order quantity(MOQ)",unit_type:"unit type",gmt_create:"date create",gmt_modified:"date modified"},tableToolbar:{menuHide:"hide menu",menuShow:"show menu",productDisplayOn:"in-stock",productDisplayOff:"out-stock",productEdit:"edit"},form:{KeyInformation:"key information",ProductAttributes:"product attributes",subject:"128 letters max.",category:"click to change category",keywords:"3 keywords max. Comma(,) separated",price:"set price (range)",min_order_quantity:"optional",attributes:"add or delete",attributeMissing:"attribute missing",attributeDuplicated:"attribute duplicated",pieces:"pieces"},steps:{first:"Edit Attributes",second:"Edit Contents",finally:"Preview & Publish",previous:"Previous",next:"Next",complete:"Complete",editPrice:"Edit Price",choosePhotos:"Choose Photos",uploadPhotos:"Upload Photos",removePhotos:"double click to remove the photo",mainPhotoRequired:"Need at least one photo",descriptionOverflow:"description length shall be smaller than 60k letters",addAttributes:"Add Attributes",removeAttributes:"Remove Attributes",modificationNull:"No modification made",modificationDone:"Will submit the following modifications:"},common:{yes:"OK",no:"Cancel",netFail:"request failed"}},zhCN:{folder:{currentFolder:"\u8bf7\u9009\u62e9",needFolderName:"\u8bf7\u586b\u5199\u6587\u4ef6\u5939\u540d",addNewFolder:"\u65b0\u5efa\u6587\u4ef6\u5939",folderNull:"\u6587\u4ef6\u5939\u4e0d\u5b58\u5728",dataNull:"\u6570\u636e\u4e0d\u5b58\u5728"},table:{tableHeader:"\u4ea7\u54c1",categoryName:"\u7c7b\u76ee",productId:"\u4ea7\u54c1 id",subject:"\u6807\u9898",status:"\u5ba1\u6838\u72b6\u6001",display:"\u4e0a\u67b6\u72b6\u6001",attributes:"\u5c5e\u6027",keywords:"\u5173\u952e\u8bcd",price:"\u4ef7\u683c(\u533a\u95f4)",min_order_quantity:"\u6700\u5c0f\u8d77\u8ba2\u91cf(MOQ)",unit_type:"\u5355\u4f4d",gmt_create:"\u521b\u5efa\u65e5\u671f",gmt_modified:"\u4fee\u6539\u65e5\u671f"},tableToolbar:{menuHide:"\u9690\u85cf\u83dc\u5355",menuShow:"\u663e\u793a\u83dc\u5355",productDisplayOn:"\u4e0a\u67b6",productDisplayOff:"\u4e0b\u67b6",productEdit:"\u7f16\u8f91"},form:{KeyInformation:"\u57fa\u672c\u4fe1\u606f",ProductAttributes:"\u4ea7\u54c1\u5c5e\u6027",subject:"128 \u5b57\u7b26\u4ee5\u5185",category:"\u70b9\u51fb\u66f4\u6362\u7c7b\u76ee",keywords:"\u6700\u591a\u4e09\u4e2a\u5173\u952e\u8bcd\uff0c\u7528\u82f1\u6587\u9017\u53f7(,)\u5206\u9694",price:"\u8bbe\u7f6e\u4ef7\u683c(\u533a\u95f4)",min_order_quantity:"\u9009\u586b",attributes:"\u53ef\u589e\u53ef\u51cf",attributeMissing:"\u5c5e\u6027\u7f3a\u5931",attributeDuplicated:"\u5c5e\u6027\u91cd\u590d",pieces:"\u4ef6"},steps:{first:"\u5c5e\u6027\u7f16\u8f91",second:"\u8be6\u60c5\u7f16\u8f91",finally:"\u9884\u89c8&\u53d1\u5e03",previous:"\u4e0a\u4e00\u6b65",next:"\u4e0b\u4e00\u6b65",complete:"\u5b8c\u6210",editPrice:"\u7f16\u8f91\u4ef7\u683c",choosePhotos:"\u9009\u62e9\u56fe\u7247",uploadPhotos:"\u4e0a\u4f20\u56fe\u7247",removePhotos:"\u53cc\u51fb\u79fb\u9664\u56fe\u7247",mainPhotoRequired:"\u9700\u8981\u4fdd\u7559\u81f3\u5c11\u4e00\u5f20\u4e3b\u56fe",descriptionOverflow:"\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc76\u4e07\u5b57\u7b26",addAttributes:"\u6dfb\u52a0\u5c5e\u6027",removeAttributes:"\u79fb\u9664\u7a7a\u767d\u5c5e\u6027",modificationNull:"\u6ca1\u6709\u4efb\u4f55\u4fee\u6539",modificationDone:"\u5c06\u63d0\u4ea4\u5982\u4e0b\u5185\u5bb9:"},common:{yes:"\u786e\u5b9a",no:"\u53d6\u6d88",netFail:"\u8bf7\u6c42\u5931\u8d25"}}}},402:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(18),i=n(35),c=n.n(i),o=n(110),u=n(53),s=n(12),l=n(0),d=n(23),b=n(16),p=n(265),j=n(85),f=n(286),m=n(409),h=n(22),g=n(86),x=n(323),O=n(408),v=n(414),y=n(405),_=n(359),k=n(290),A=n(280),w=n(1);var C=function(e){var t=e.langPack,n=e.activeStep,r=e.setActiveStep,a=Object(l.useState)([t.steps.first,t.steps.second,t.steps.finally]),i=Object(s.a)(a,1)[0];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.a,{activeStep:n,children:i.map((function(e){return Object(w.jsx)(v.a,{children:Object(w.jsx)(y.a,{children:e})},e)}))}),Object(w.jsxs)(_.a,{variant:"contained",color:"secondary",disableElevation:!0,sx:{display:"flex",flexDirection:"row",pt:2,paddingBottom:"10px"},children:[Object(w.jsx)(k.a,{disabled:0===n,onClick:function(){r((function(e){return e-1}))},sx:{mr:1},children:t.steps.previous}),Object(w.jsx)(A.a,{sx:{flex:"1 1 auto"}}),Object(w.jsx)(k.a,{disabled:2===n,onClick:function(){r((function(e){return e+1}))},children:n===i.length-1?t.steps.complete:t.steps.next})]})]})},q=n(279),P=n(407),I=n(152),R=n(411),S=n(397),N=n(398),z=n(6),D=n(52),F=n(396),E=Object(z.a)(q.a)((function(){var e=F.a[100];return{backgroundColor:e,height:40,"&:hover, &:focus":{backgroundColor:Object(D.c)(e,.06)},"&:active":{boxShadow:10,backgroundColor:Object(D.c)(e,.12)}}}));var V=function(e){var t=e.localization,n=e.categories,r=e.menuRef,a=e.menuState,i=e.showMenu,c=e.closeMenu,o=a.menuArr,u=a.anchorEl;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{sx:{display:"inline-flex",paddingTop:"10px"},children:n.map((function(e,n){if(n>0)return Object(w.jsx)(E,{sx:a.menuLevel===n?{display:"none"}:{},component:"a",href:"#",label:"zhCN"!==t.locale?e.name:e.cn_name,icon:1===n?Object(w.jsx)(S.a,{}):void 0,deleteIcon:Object(w.jsx)(N.a,{}),onDelete:function(){return i(n)}},e.category_id)}))}),Object(w.jsx)("span",{ref:r}),Object(w.jsx)("div",{children:Object(w.jsx)(I.a,{anchorEl:u,open:Boolean(u),onClose:function(){return c()},children:o.map((function(e){return Object(w.jsx)(R.a,{onClick:function(){return c(e.category_id)},children:"zhCN"!==t.locale?e.name:e.cn_name},e.category_id)}))})})]})},B=n(360),U=n(361),L=n(362),M=n(412),W=n(285),G=n(413),H=n(266),T=n(354),Y=n(355),Q=n(389);function K(e,t,n,r,a){var i=/\.(\w{3,4})$/.exec(e)[0];return{src:"".concat(e,"_").concat(t*a,"x").concat(n*r).concat(i),srcSet:"".concat(e,"_").concat(t*a*2,"x").concat(n*r*2).concat(i," 2x")}}var X=function(e){var t=e.finalImageArr,n=e.imageSizing,a=e.photoCols,i=e.rowHeight,c=e.uploaderRef,o=e.imageBtnTitle,u=e.onDoubleClickImageBtn,s=e.onPhotoSelected,l=n.width,d=n.height;return Object(w.jsxs)(B.a,{cols:a,rowHeight:i,sx:{marginTop:"10px",marginBottom:"10px"},variant:"quilted",gap:2,children:[t.map((function(e,t){return Object(w.jsxs)(U.a,{cols:1,rows:1,children:[Object(w.jsx)("img",Object(r.a)(Object(r.a)({},K(e,l,d,1,1)),{},{alt:t+1,loading:"lazy"})),Object(w.jsx)(L.a,{sx:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},title:t+1,position:"top",actionIcon:Object(w.jsx)(M.a,{title:o,children:Object(w.jsx)(W.a,{sx:{color:t?"yellow":"white"},"aria-label":"star ".concat(t+1),onDoubleClick:function(){return u(e)},children:Object(w.jsx)(T.a,{})})}),actionPosition:"left"})]},t)})),t.length<6?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(G.a,{sx:{display:"none"},ref:c,control:Object(w.jsx)(H.a,{type:"file",inputProps:{multiple:!0}}),label:Object(w.jsx)(Y.a,{}),onChange:s}),Object(w.jsx)(k.a,{startIcon:Object(w.jsx)(Q.a,{}),onClick:function(){return c.current.click()}},"uploader")]}):null]})},Z=n(211),J=n(275),$=n(283),ee=n(347),te=n(348),ne=n(386),re=n(388);var ae=function(e){var t=e.langPack,n=e.subject,r=e.keywords,a=e.sourcing_trade,i=e.allAttributeArr,c=e.finalAttributeArr,o=e.onAttributeModified,u=e.onAttributeClear,d=e.onAttributeConfirm,b=Object(l.useState)(!1),p=Object(s.a)(b,2),f=p[0],m=p[1],h=Object(l.useState)(""),g=Object(s.a)(h,2),x=g[0],O=g[1],v=Object(l.useState)([]),y=Object(s.a)(v,2),_=y[0],A=y[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{paddingTop:"10px",paddingBottom:"20px"},children:Object(w.jsx)(j.a,{variant:"h2",sx:{color:"orangered",display:"inline"},children:t.form.KeyInformation})}),Object(w.jsx)(Z.a,{}),Object(w.jsx)("br",{}),Object(w.jsx)(M.a,{title:t.form.subject,children:Object(w.jsx)(J.a,{margin:"normal",fullWidth:!0,id:"subject",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.subject}),defaultValue:n,onChange:function(e){return o("subject",e.target.value)}},n)}),Object(w.jsx)(M.a,{title:t.form.keywords,children:Object(w.jsx)(J.a,{margin:"normal",fullWidth:!0,id:"keywords",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.keywords}),defaultValue:r?String(r.string):"",onChange:function(e){return o("keywords",e.target.value)}},r)}),Object(w.jsx)(M.a,{title:t.form.price,children:Object(w.jsx)(J.a,{margin:"normal",id:"price",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.price}),InputProps:{startAdornment:Object(w.jsx)($.a,{position:"start",children:a?a.fob_currency:"USD"})},defaultValue:a?a.fob_max_price===a.fob_min_price?a.fob_min_price:"".concat(a.fob_min_price," ~ ").concat(a.fob_max_price):"",onChange:function(e){var t=e.target.value;if(""===t.trim())return o("sourcing_trade",{fob_min_price:""},"object");t=t.trim().replace(/\s/g,"");var n=/~|-/g.test(t)?"~":"-",r=t.split(n),a=r[0],i=r[1];Number(a)>=Number(i)&&(i=""),o("sourcing_trade",{fob_min_price:a,fob_max_price:i},"object")}},a)}),Object(w.jsx)(M.a,{title:t.form.min_order_quantity,children:Object(w.jsx)(J.a,{margin:"normal",id:"min_order_quantity",variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:t.table.min_order_quantity}),defaultValue:a&&a.min_order_quantity?a.min_order_quantity:"",InputProps:{endAdornment:Object(w.jsx)($.a,{position:"end",children:a?a.min_order_unit_type:t.form.pieces})},onChange:function(e){return o("sourcing_trade",{min_order_quantity:e.target.value||"1"},"object")}},a)}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsxs)("div",{style:{paddingTop:"10px",paddingBottom:"20px"},children:[Object(w.jsx)(j.a,{variant:"h2",sx:{color:"darkorange",display:"inline"},children:t.form.ProductAttributes}),f?Object(w.jsx)(w.Fragment,{children:i.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(J.a,{id:"add-attribute",select:!0,sx:{minWidth:"120px",padding:"5px","& .MuiOutlinedInput-root":{height:"29px",padding:"1px"}},value:x&&x.attr_id?x.attr_id:"",onChange:function(e){var t=i.find((function(t){return t.attr_id===e.target.value}));if(!t)return console.log("\u5c5e\u6027\u4e0d\u5c5e\u4e8e\u8be5\u7c7b\u76ee\uff1f");O(t);var n=t.attribute_values.attribute_value;A(n||[])},children:[Object(w.jsx)(R.a,{value:"",disabled:!0},""),i.map((function(e){return Object(w.jsx)(R.a,{value:e.attr_id,children:e.en_name},e.attr_id)}))]}),_.length?Object(w.jsx)(J.a,{id:"add-attribute-if-single-select",select:!0,value:x.attr_value&&x.attr_value.attr_value_id?x.attr_value.attr_value_id:"",onChange:function(e){var t=_.find((function(t){return t.attr_value_id===e.target.value}));if(!t)return console.log("\u9009\u9879\u4e0d\u662f\u8be5\u5c5e\u6027\u7684\u9009\u9879\uff1f");O((function(e){return Object.assign({},e,{attr_value:t})}))},variant:"standard",children:_.map((function(e){return Object(w.jsx)(R.a,{value:e.attr_value_id,children:e.en_name},String(e.attr_value_id))}))}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(k.a,{startIcon:Object(w.jsx)(ee.a,{}),onClick:function(){return d(x)},children:t.common.yes}),Object(w.jsx)(k.a,{startIcon:Object(w.jsx)(te.a,{}),onClick:function(){return m((function(e){return!e}))},children:t.common.no})]}):Object(w.jsx)(j.a,{variant:"body1",children:t.form.attributeMissing})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{title:t.steps.addAttributes,children:Object(w.jsx)(k.a,{variant:"standard",onClick:function(){return m((function(e){return!e}))},children:Object(w.jsx)(ne.a,{})})}),Object(w.jsx)(M.a,{title:t.steps.removeAttributes,children:Object(w.jsx)(k.a,{variant:"standard",onClick:u,children:Object(w.jsx)(re.a,{})})})]})]}),Object(w.jsx)(Z.a,{}),Object(w.jsx)("br",{}),c.length&&c.map((function(e){return Object(w.jsx)(M.a,{title:t.form.attributes,children:Object(w.jsx)(J.a,{margin:"normal",id:String(e.attribute_name+e.value_name),variant:"outlined",label:Object(w.jsx)(j.a,{variant:"h3",children:e.attribute_name}),defaultValue:e.value_name,onChange:function(t){return o("attributes",{attribute_id:e.attribute_id,attribute_name:e.attribute_name,value_name:t.target.value},"array")}})},e.value_name+e.attribute_id)}))]})},ie=n(356),ce=n.n(ie);var oe=function(e){var t=e.localization,n=e.finalDescription,r=e.setFinalDescription,a=Object(l.useRef)(null),i={language:"zhCN"===t.locale?"zh_cn":"en_us",enter:"DIV",defaultActionOnPaste:"insert_clear_html",toolbarAdaptive:!1,buttons:["source","bold","italic","underline","eraser","ul","ol","left","font","fontsize","brush","image","copyformat","copy","paste","table","link",{iconURL:"data:image/png;base64,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",tooltip:"Clear Image style",exec:function(e,t,n){var r=e.value,a=(r=(r=r.replace(/\n/gi,"")).replace(/>/gi,">\n")).split("\n");r=(a=a.map((function(e){return/<img src/gi.test(e)?e=/ class="magic-(\d{1,3})x000"/gi.test(e)?e.replace(/x000/gi,""):e.replace(/ class="magic-(\d{1,3})"/gi,' class="magic-$1x000"'):e}))).join(""),e.value=r}}],events:{paste:function(e){console.log("\u7c98\u8d34...",e);var t=e.clipboardData&&e.clipboardData.items;if(t&&t.length)return console.log(t)},beforePasteInsert:function(e){console.log("\u7c98\u8d34\u5185\u5bb9\u690d\u5165\u524d...")}}};return Object(w.jsx)(ce.a,{ref:a,value:n,config:i,tabIndex:1,onBlur:function(e){return r(e)},onChange:function(e){}})};var ue=function(e){var t=e.langPack,n=e.modificationSubmission,r=Object(b.f)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("br",{}),Object(w.jsx)(Z.a,{}),Object(w.jsxs)("div",{align:"right",children:[Object(w.jsx)(k.a,{startIcon:Object(w.jsx)(ee.a,{}),onClick:n,children:t.common.yes}),Object(w.jsx)(k.a,{startIcon:Object(w.jsx)(te.a,{}),onClick:function(){return r("/product")},children:t.common.no})]})]})},se={};t.default=function(){console.log("productEdit app running");var e=Object(d.c)((function(e){return e.localization})),t=Object(d.c)((function(e){return e.globalization})),n=Object(l.useState)(x.a[e.locale]),i=Object(s.a)(n,2),O=i[0],v=i[1],y=Object(l.useState)(t.baseData.loginData),_=Object(s.a)(y,1)[0],k=Object(b.f)(),A=Object(l.useState)(0),q=Object(s.a)(A,2),P=q[0],I=q[1],R=location.pathname.replace("/product/",""),S=Object(l.useState)({}),N=Object(s.a)(S,2),z=N[0],D=N[1],F=Object(l.useState)([]),E=Object(s.a)(F,2),B=E[0],U=E[1],L=Object(l.useState)([]),M=Object(s.a)(L,2),W=M[0],G=M[1],H=Object(l.useState)(""),T=Object(s.a)(H,2),Y=T[0],Q=T[1],K=Object(l.useState)(0),Z=Object(s.a)(K,2),J=Z[0],$=Z[1],ee=Object(l.useState)([]),te=Object(s.a)(ee,2),ne=te[0],re=te[1],ie=[],ce=Object(l.useRef)(null),le=Object(l.useState)({menuLevel:void 0,menuValue:void 0,menuArr:[],anchorEl:null}),de=Object(s.a)(le,2),be=de[0],pe=de[1],je=Object(p.a)(Object(h.a)().breakpoints.down("md"))?3:6,fe=Object(l.useRef)(null),me=Object(l.useState)([]),he=Object(s.a)(me,2),ge=he[0],xe=he[1];function Oe(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(c.a.mark((function e(t){var n,r,i,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return-1,n=ma.photoUploadQuery({file_name:t.name,image_bytes:t,group_id:-1}),e.next=4,fetchAPI(n,{method:"POST","Content-Type":"Form Data"});case 4:if((r=e.sent).response.status){e.next=7;break}return e.abrupt("return",queryResult(!1,O.common.yes));case 7:if(i=ma.photoUploadCheck(r),o=i.response,u=o.status,s=o.result,u){e.next=11;break}return e.abrupt("return",queryResult(!1,s));case 11:return e.abrupt("return",G((function(e){return e.length>=6?e:[s.photobank_url].concat(Object(a.a)(e))})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(u.a)(c.a.mark((function e(t){var n,r,a,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma.productUpdateQuery(t),e.next=3,fetchAPI(n);case 3:if((r=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,O.common.netFail+" >> "+r.response.result));case 6:if(a=ma.productUpdateCheck(r),i=a.response,o=i.status,u=i.result,o){e.next=10;break}return e.abrupt("return",queryResult(o,u));case 10:return e.abrupt("return",console.log(u));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=Object(u.a)(c.a.mark((function e(t){var n,r,i,o,u,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma.productDetailQuery(t),e.next=3,fetchAPI(n);case 3:if((r=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,O.common.netFail+" >> "+r.response.result));case 6:if(i=ma.productDetailCheck(r),o=i.response,u=o.status,s=o.result,u){e.next=10;break}return e.abrupt("return",queryResult(u,s));case 10:console.log(s),s.attributes.product_attribute&&((l=Object(a.a)(s.attributes.product_attribute)).sort((function(e,t){return e.attribute_id-t.attribute_id})),U(l)),s.main_image.images.string&&G(s.main_image.images.string),s.description&&Q(s.description),D(s),s.category_id&&Ce(s.category_id);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(u.a)(c.a.mark((function e(t){var n,r,a,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma.productCategoryQuery(t),e.next=3,fetchAPI(n);case 3:if((r=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,O.common.netFail+" >> "+r.response.result));case 6:if(a=ma.productCategoryCheck(r),i=a.response,o=i.status,u=i.result,o){e.next=10;break}return e.abrupt("return",queryResult(o,u));case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Object(u.a)(c.a.mark((function e(t){var n,r,a,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma.productCategoryAttributeQuery(t),e.next=3,fetchAPI(n);case 3:if((r=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,O.common.netFail+" >> "+r.response.result));case 6:if(a=ma.productCategoryAttributeCheck(r),i=a.response,o=i.status,u=i.result,o){e.next=10;break}return e.abrupt("return",queryResult(o,u));case 10:return console.log(u),e.abrupt("return",xe(u));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return qe.apply(this,arguments)}function qe(){return(qe=Object(u.a)(c.a.mark((function e(t,n){var r,i,o,u,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=11;break}return e.next=3,ke({cat_id:t});case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:return i=r.level,o=r.parent_ids,ie.length||(ie=new Array(i)),ie[i]=r,i>0&&o&&o.number?Ce(o.number[0]):re(ie),e.abrupt("return");case 11:if(u=ne[n-1].child_ids.number.find((function(e){return e.category_id===t}))){e.next=14;break}return e.abrupt("return");case 14:return s=u.child_ids,(l=Object(a.a)(ne))[n]=u,n+1<l.length&&(l.length=n+1),s&&(l.push({category_id:0}),ie=l,Pe(l.length-1)),e.abrupt("return",re(l));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){if(ne.length){var e=ne[ne.length-1].category_id;$(e),e&&function(e){we.apply(this,arguments)}({cat_id:e})}}),[ne]),Object(l.useEffect)((function(){if(console.log("description changed "),Y){if(Y.length>6e4)return queryResult(!1,O.form.descriptionOverflow);se.description=Y}}),[Y]),Object(l.useEffect)((function(){v(x.a[e.locale])}),[e.locale]),Object(l.useEffect)((function(){return console.log("I want product editing"),_?(function(e){_e.apply(this,arguments)}({product_id:R}),function(){console.log("I leave product edit"),se={}}):k("/")}),[]);var Pe=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,a,i,u,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ie.length?ie:ne,r=n[t].category_id,a=n[t-1].child_ids.number,i=Object(o.a)(a),e.prev=4,i.s();case 6:if((u=i.n()).done){e.next=16;break}if("object"!==typeof(s=u.value)){e.next=10;break}return e.abrupt("break",16);case 10:return e.next=12,ke({cat_id:s});case 12:l=e.sent,a[a.indexOf(s)]=l;case 14:e.next=6;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),i.e(e.t0);case 21:return e.prev=21,i.f(),e.finish(21);case 24:pe({menuLevel:t,menuValue:r,menuArr:a,anchorEl:ce.current});case 25:case"end":return e.stop()}}),e,null,[[4,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.target.files).length){e.next=3;break}return e.abrupt("return");case 3:r=Object(o.a)(n),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=12;break}return i=a.value,e.next=10,Oe(i);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}();function Re(){var e=Object.keys(se);return e.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{variant:"h1",children:O.steps.modificationDone}),Object(w.jsx)(f.a,{children:e.map((function(e){return Object(w.jsxs)(m.a,{children:["-- ",e]},e)}))})]}):Object(w.jsx)(j.a,{variant:"h1",children:O.steps.modificationNull})}return Object(w.jsxs)(g.a,{title:"Product Edit --\u4ea7\u54c1\u7f16\u8f91",children:[Object(w.jsx)(C,{langPack:O,activeStep:P,setActiveStep:I}),0===P?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(V,{localization:e,categories:ne,menuRef:ce,menuState:be,showMenu:Pe,closeMenu:function(e){var t=be.menuLevel;pe({menuArr:[],anchorEl:null}),console.log(e),void 0!==e&&e!==J&&Ce(e,t)}}),Object(w.jsx)(X,{localization:e,finalImageArr:W,imageSizing:{width:30,height:30},photoCols:je,rowHeight:200,uploaderRef:fe,imageBtnTitle:O.steps.removePhotos,onDoubleClickImageBtn:function(e){if(W.length<=1)return queryResult(!1,O.steps.mainPhotoRequired);G(W.filter((function(t){return t!==e})))},onPhotoSelected:Ie}),Object(w.jsx)(ae,Object(r.a)(Object(r.a)({},z),{},{langPack:O,allAttributeArr:ge,finalAttributeArr:B,onAttributeConfirm:function(e){console.log(e);var t=e.attr_id,n=e.attr_value,r=e.en_name,i=e.input_type;if(!t)return console.log("\u7f3a\u5c11\u5173\u952eid");var c=[];B.length&&(c=Object(a.a)(B),B.find((function(e){return e.attribute_id===t}))&&(/multi/gi.test(i)?c=n&&n.attr_value_id?c.filter((function(e){return e.value_id!==n.attr_value_id})):c.filter((function(e){return e.value_name&&e.attribute_id!==t})):(c=c.filter((function(e){return e.attribute_id!==t})),queryResult(!1,O.form.attributeDuplicated))));var o={attribute_id:t,attribute_name:r,value_name:""};n&&(o.value_id=n.attr_value_id,o.value_name=n.en_name),U([o].concat(Object(a.a)(c))),console.log(o)},onAttributeClear:function(){var e=[];B.length&&(e=(e=Object(a.a)(B)).filter((function(e){return e.value_name})),U(e))},onAttributeModified:function(e,t,n){if(void 0===se[e]&&(se[e]=n?{}:""),/attributes|bulk_discount_prices/gi.test(e)){var a;"attributes"===e?a="attribute_id":"bulk_discount_prices"===e&&(a="start_quantity");var i=function(e,t,n){var r;return t.length&&-1!==(r=n?t.findIndex((function(t){return t[n]===e[n]})):t.findIndex((function(t){return t===e})))?t[r]=e:t.push(e),t}(t,se[e],a);return se[e]=i,se}return"keywords"===e&&(t=t.split(",")),se[e]="object"===n?Object(r.a)(Object(r.a)({},se[e]),t):t,se}}))]}):1===P?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(oe,{localization:e,finalDescription:Y,setFinalDescription:Q})}):2===P?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Re,{}),Object(w.jsx)(ue,{langPack:O,modificationSubmission:function(){if(!Object.keys(se).length)return queryResult(!1,O.steps.modificationNull);se.category_id=J,se.main_image={images:W},se.attributes=B,se.product_id=z.product_id,se.product_type=z.product_type,se.subject||(se.subject=z.subject),se.keywords||(se.keywords=z.keywords.string),z.priceUnit="USD",console.log(se);for(var e={},t=0,n=Object.entries(se);t<n.length;t++){var r=Object(s.a)(n[t],2),a=r[0],i=r[1];e[a]="object"==typeof i?JSON.stringify(i):i}console.log(e),function(e){ye.apply(this,arguments)}(e)}})]}):Object(w.jsx)(w.Fragment,{})]})}}}]);
//# sourceMappingURL=10.7a01919b.chunk.js.map