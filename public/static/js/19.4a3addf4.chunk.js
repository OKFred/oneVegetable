(this["webpackJsonperp-dashboard"]=this["webpackJsonperp-dashboard"]||[]).push([[19],{327:function(e,t,r){"use strict";var n=r(32),a=r.n(n),u=r(12),l=r(7),c=r(49),o=function(){function e(){return(e=Object(c.a)(a.a.mark((function e(t,r,n,u,l){var c,o,i,s,p,v,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"add"===r?(c=ma.productSchemaAddQuery,o=ma.productSchemaAddCheck):(c=ma.productSchemaUpdateQuery,o=ma.productSchemaUpdateCheck),i=(new DOMParser).parseFromString(t,"text/xml"),Array.from(i.querySelectorAll("itemSchema > field > rules, options, label-group, fields")).forEach((function(e){return e.remove()})),Array.from(i.children[0].children).forEach((function(e){return e.children.length?"":e.remove()})),t=i.children[0].outerHTML,s={xml:t,cat_id:u,language:"zh"===l?"zh":"en_US"},n&&(s.product_id=n),p=c({param_product_top_publish_request:JSON.stringify(s)}),e.next=10,fetchAPI(p);case 10:if((v=e.sent).response.status){e.next=13;break}return e.abrupt("return",v);case 13:return f=o(v),e.abrupt("return",f);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(e,t){if(t||(t=o.schema),!t)return null;var n=o.schema.querySelector('itemSchema > field[id="'.concat(e,'"]'));return n?r([n])[0]:null}function r(e){for(var t=[],a=Array.from(e),u=0;u<a.length;u++){var l=a[u],c=n(l);c||(c={}),c.xml=l,c.options&&c.options.length&&(c.options=r(c.options)),c.values&&c.values.length&&(c.values=r(c.values)),l.innerHTML&&!l.children.length&&(c.value=l.innerHTML),t.push(c)}return t}function n(e){var t,r,n=function(e){var t=e.getAttributeObj();return t||(t={}),Object(l.a)(Object(l.a)({},t),{},{xml:e})}(e),a=n.type;return a?("multiComplex"===a?(t=e.querySelectorAll("fields > field"),r=e.querySelectorAll("complex-values > field")):"complex"===a?(t=e.querySelectorAll("fields > field"),r=e.querySelectorAll("complex-value > field")):"multiCheck"===a?(t=e.querySelectorAll("options > option"),r=e.querySelectorAll("values > value")):"multiInput"===a?r=e.querySelectorAll("values > value"):"singleCheck"===a?(t=e.querySelectorAll("options > option"),r=e.querySelectorAll("value")):"input"===a&&(r=e.querySelectorAll("value")),t&&t.length&&(n.options=t),r&&r.length&&(n.values=r),n):n}return{schemaSubmit:function(t,r,n,a,u){return e.apply(this,arguments)},schemaChecker:function(e){if(Object.keys(e).length){var t=Object.values(e).map((function(e){return e.xml})),r="<itemSchema>";t.forEach((function(e){return r+=e.outerHTML})),r+="</itemSchema>";var n=(new DOMParser).parseFromString(r,"text/xml").firstChild;return Array.from(n.querySelectorAll("field > rules")).forEach((function(e){return e.remove()})),r=(r=(r=n.outerHTML.replace(/ xmlns="http:\/\/www.w3.org\/1999\/xhtml"/gi,"")).replace(/inputvalue/g,"inputValue")).encodeNonASCII()}},schemaMaker:function(e,t){var r=(new DOMParser).parseFromString(e,"text/xml");return t||(o.schema=r),r.querySelector("parsererror")?null:r},xmlGetField:t,imageObjMaker:function(e){var r=t("scImages",e);return r?(r.values&&(r._values=r.values.map((function(e){return{key:e.id,value:e.values[0].value.replace(/_.*/,"")}})).sort((function(e,t){return Number(/\d/.exec(e.key)[0])-Number(/\d/.exec(t.key)[0])}))),r):null},imageObjChecker:function(e,t){if(!t.length)return null;t.length>6&&(t.length=6);var r=Object(l.a)({},e),n=t.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{key:"scImages_".concat(t),value:e.value.replace("https:","")})}));n=n.filter((function(e){return e.id})),r._values=n;var a="complex-value",u=(new DOMParser).parseFromString(r.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),c="<".concat(a,">");n.forEach((function(e,t){u[t].innerHTML='<value fileId="'.concat(e.id,'">').concat(e.value,"</value>"),c+=u[t].outerHTML})),c+="</".concat(a,">"),r.xml.querySelector(a)&&r.xml.querySelector(a).remove();var o=(new DOMParser).parseFromString(c,"text/xml").firstChild;return r.xml.append(o),r},productGroupObjMaker:function(e){var r=t("productGroup",e);return r?(r.values&&(r._values={value:r.values[0].values[0].value}),r):null},productGroupObjChecker:function(e,t){if(!t)return null;var r=Object(l.a)({},e);r._values={value:t};var n="complex-value",a=(new DOMParser).parseFromString(r.xml.outerHTML,"text/xml").firstChild.querySelector("fields > field#first_group_id"),u="<".concat(n,">");a.innerHTML="<value>".concat(t,"</value>"),u+=a.outerHTML,u+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var c=(new DOMParser).parseFromString(u,"text/xml").firstChild;return r.xml.append(c),r},productTypeObjMaker:function(e){var r=t("market",e);return r?(r._options=r.options?r.options.map((function(e){return{key:e.displayName,value:e.value}})):[],r.values&&(r._values={value:r.values[0].value},r._values.key=r._options.find((function(e){return e.value===r._values.value})).key),r):null},productTypeObjChecker:function(e,t){var r=Object(l.a)({},e);r._values={value:t};var n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},subjectObjMaker:function(e){var r=t("productTitle",e);return r?(r.values&&(r._values={value:r.values[0].value}),r):null},subjectObjChecker:function(e,t){if(!t||!t.trim())return null;var r=Object(l.a)({},e);r._values={value:t};var n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},keywordObjMaker:function(e){var r=t("productKeywords",e);return r?(r.values&&(r._values={value:r.values.map((function(e){return e.values[0].value})).join(",")}),r):null},keywordObjChecker:function(e,t){if(!t.length)return null;t.length>3&&(t.length=3);var r=t.join(","),n=Object(l.a)({},e);n._values={value:r};var a="complex-value",u=(new DOMParser).parseFromString(n.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),c="<".concat(a,">");t.forEach((function(e,t){u[t].innerHTML="<value>".concat(e,"</value>"),c+=u[t].outerHTML})),c+="</".concat(a,">"),n.xml.querySelector(a)&&n.xml.querySelector(a).remove();var o=(new DOMParser).parseFromString(c,"text/xml").firstChild;return n.xml.append(o),n},MOQObjMaker:function(e){var r=t("minOrderQuantity",e);return r?(r.values&&(r._values={value:Number(r.values[0].value)}),r):null},MOQObjChecker:function(e,t){var r=Object(l.a)({},e);t=Number(t),r._values={value:t};var n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},paymentMethodObjMaker:function(e){var r=t("paymentMethod",e);return r?(r.values&&(r._values=r.values[0].values.map((function(e){return{value:e.value}}))),r._options=r.options?r.options[0].options.map((function(e){return{key:e.displayName,value:e.value}})):[],r):null},paymentMethodObjChecker:function(e,t){if(!t.length)return null;var r=Object(l.a)({},e);r._values=t;var n="complex-value",a=(new DOMParser).parseFromString(r.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),u="<".concat(n,">"),c=a[0],o="<values>";t.forEach((function(e){o+="<value>".concat(e.value,"</value>")})),o+="</values>",c.innerHTML=o,u+=c.outerHTML,u+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var i=(new DOMParser).parseFromString(u,"text/xml").firstChild;return r.xml.append(i),r},priceUnitObjMaker:function(e){var r=t("priceUnit",e);return r?(r._options=r.options?r.options.map((function(e){return{key:e.displayName,value:e.value}})):[],r.values&&(r._values={key:"",value:r.values[0].value},r._values.key=r._options.find((function(e){return e.value===r._values.value})).key),r):null},priceUnitObjChecker:function(e,t){if(!t)return null;var r=Object(l.a)({},e);r._values=t;var n="value",a="<".concat(n,">");a+=t.value,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},portObjMaker:function(e){var r=t("port",e);return r?(r.values&&(r._values={value:r.values[0].value}),r):null},portObjChecker:function(e,t){if(!t||!t.trim())return null;var r=Object(l.a)({},e);r._values={value:t};var n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},logisticsObjMaker:function(e){var r=t("logisticsMode",e);return r?(r._options=r.options?r.options.map((function(e){return{key:e.displayName,value:e.value}})):[],r.values&&(r._values=r.values.map((function(e){var t=e.value,n=r._options.find((function(e){return e.value===t})).key;return{key:n,value:t}}))),r):null},logisticsObjChecker:function(e,t){if(!t.length)return null;var r=Object(l.a)({},e),n="values",a="<".concat(n,">"),u="",c=t.map((function(e){var t=r._options.find((function(t){return t.key===e})).value;return{key:e,value:t}}));c.forEach((function(e){u+="<value>".concat(e.value,"</value>")})),a+=u+"</".concat(n,">"),r._values=c,r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var o=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(o),r},packaingDescriptionObjMaker:function(e){var r=t("wholeSalePkgDesc",e);return r?(r.values&&(r._values={value:r.values[0].value}),r):null},packaingDescriptionObjChecker:function(e,t){if(!t||!t.trim())return null;var r=Object(l.a)({},e);r._values={value:t};var n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},priceObjMaker:function(e){var r=t("ladderPrice",e);return r?(r.values?r._values=r.values.filter((function(e){return"complex"===e.type})).map((function(e){return{quantity:Number(e.values[0].values[0].value),price:Number(e.values[1].values[0].value)}})).sort((function(e,t){return e.quantity-t.quantity})):r._values=[{quantity:1,price:0}],r):null},priceObjChecker:function(e,t){var r=Object(l.a)({},e),n=t.filter((function(e){return e.price})),a="complex-value",u=(new DOMParser).parseFromString(r.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field[type=complex]"),c="<".concat(a,">");n.forEach((function(e,t){u[t].querySelector("fields > field#quantity").innerHTML="<value>".concat(e.quantity,"</value>"),u[t].querySelector("fields > field#price").innerHTML="<value>".concat(e.price,"</value>"),c+=u[t].outerHTML})),c=(c+="</".concat(a,">")).replace(/fields/g,a),r.xml.querySelector(a)&&r.xml.querySelector(a).remove();var o=(new DOMParser).parseFromString(c,"text/xml").firstChild;return r.xml.append(o),r},ladderPeriodObjMaker:function(e){var r=t("ladderPeriod",e);return r?(r.values?r._values=r.values.filter((function(e){return"complex"===e.type})).map((function(e){return{quantity:Number(e.values[0].values[0].value),day:Number(e.values[1].values[0].value)}})).sort((function(e,t){return e.quantity-t.quantity})):r._values=[{quantity:1,price:0}],r):null},ladderPeriodObjChecker:function(e,t){var r=Object(l.a)({},e);r._values=t;var n="complex-value",a=(new DOMParser).parseFromString(r.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field[type=complex]"),u="<".concat(n,">");t.forEach((function(e,t){a[t].querySelector("fields > field#quantity").innerHTML="<value>".concat(e.quantity,"</value>"),a[t].querySelector("fields > field#day").innerHTML="<value>".concat(e.day,"</value>"),u+=a[t].outerHTML})),u=(u+="</".concat(n,">")).replace(/fields/g,n),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var c=(new DOMParser).parseFromString(u,"text/xml").firstChild;return r.xml.append(c),r},supplyAbilityObjMaker:function(e){var r=t("supply",e);return r?(r.values&&(r._values={value:r.values[0].value}),r):null},supplyAbilityObjChecker:function(e,t){if(!t)return null;var r=Object(l.a)({},e);r._values=t;var n="complex-value",a="<".concat(n,">"),u=(new DOMParser).parseFromString(r.xml.outerHTML,"text/xml").firstChild,c=u.querySelector("fields");c.querySelector("field#supply_number").innerHTML="<value>".concat(t.supply_number,"</value>"),c.querySelector("field#time_unit").innerHTML="<value>".concat(t.time_unit,"</value>"),c.querySelector("field#quantity_unit").innerHTML="<value>".concat(t.quantity_unit,"</value>");var o=u.querySelectorAll("fields > field");Array.from(o).forEach((function(e){a+=e.outerHTML})),a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var i=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(i),r},attributeObjMaker:function(e){var r=t("icbuCatProp",e);return r?(r.values&&(r._values=r.values.filter((function(e){return e.name})).sort((function(e,t){return e.type.length-t.type.length})),r._values=function e(t){if(!t||!t.length)return t;var r=[];return t.forEach((function(t){var n=Object(l.a)({},t),a=n,u=a.type,c=a.displayName,o=a.inputValue,i=a.value,s=a.values;if(void 0!==i){var p={};void 0!==c&&(p.key=c),void 0!==o&&(p.key=o),void 0!==i&&(p.value=i),Object.keys(p).length&&(n=Object(l.a)(Object(l.a)({},n),p))}else if(["input","singleCheck"].find((function(e){return e===u}))){var v={};void 0!==s[0].inputValue&&(v.key=s[0].inputValue),void 0!==s[0].value&&(v.value=s[0].value),Object.keys(v).length&&(n._values=v)}else{var f=e(s);f&&(n._values=f)}r.push(n)})),r}(r._values)),r.options&&(r._options=r.options.filter((function(e){return e.name})).sort((function(e,t){return e.type.length-t.type.length})),r._options=function e(t){if(!t||!t.length)return t;var r=[];return t.forEach((function(t){var n=Object(l.a)({},t),a=n,u=a.type,c=a.options,o=a.displayName,i=a.inputValue,s=a.value;if(void 0!==s){var p={};void 0!==o&&(p.key=o),void 0!==i&&(p.key=i),void 0!==s&&(p.value=s),Object.keys(p).length&&(n=Object(l.a)(Object(l.a)({},n),p))}else if(/input/gi.test(u))n._options=!1;else{var v=e(c);if(v)n._options=v;else{var f={};c&&void 0!==c[0].displayName&&(f.key=c[0].displayName),c&&void 0!==c[0].value&&(f.value=c[0].value),Object.keys(f).length&&(n._options=[f])}}r.push(n)})),r}(r._options)),r):null},attributeObjChecker:function(e,t,r){var n=Object(l.a)({},e),a=n._values,c=function(e,t){var r=e._values,n=[],a="complex-value",u=(new DOMParser).parseFromString(e.xml.outerHTML,"text/xml").firstChild,l="<".concat(a,">");r.forEach((function(e,t){var r,a=e.type,c=e.id,o=e._values,i=u.querySelector("fields > field#".concat(c));if(i)if(i.innerHTML="",/multi(?!Complex)/.test(a)){var s="";o.forEach((function(e){var t=e.key,r=e.value;s+='<value inputValue="'.concat(t,'">').concat(r,"</value>")}));var p=document.createElement("values");p.innerHTML=s,s?(i.innerHTML=p.outerHTML,l+=i.outerHTML):n.push(t)}else{var v=o.key,f=o.value,d=document.createElement("value");d.setAttribute("inputValue",v),d.innerText=f;void 0!==(r=v)&&""!==String(r).trim()&&null!==r?(i.innerHTML=d.outerHTML,l+=i.outerHTML):n.push(t)}})),l+="</".concat(a,">"),n.length&&t&&(e._values=r.filter((function(e,t){return!n.find((function(e){return e===t}))}))),e.xml.querySelector(a)&&e.xml.querySelector(a).remove();var c=(new DOMParser).parseFromString(l,"text/xml").firstChild;return e.xml.append(c),e};if(r)return c(n,r);var o=Object(u.a)(t,2),i=o[0],s=o[1],p=i.id,v=i.type,f=i._values,d=e._options.find((function(e){return e.id===p}));if(/multi(?!Complex)/.test(v))f=[],s.forEach((function(e){if(d._options){var t=d._options.find((function(t){return t.key===e}));t?f.push(t):f.push({key:"",value:e})}else f.push({key:"",value:e})}));else if(d._options){var m=d._options.find((function(e){return e.key===s}));f=m||{key:s,value:""}}else f.key=s;return i._values=f,(a=a.filter((function(e){return e.id!==p}))).push(i),n._values=a,n=c(n)},customStatusObjMaker:function(e){var r=t("productLightCustom",e);return r?(r._options=r.options?r.options.map((function(e){return{key:e.displayName,value:e.value}})):[],r.values?(r._values={value:r.values[0].value},r._values.key=r._options.find((function(e){return e.value===r._values.value})).key):r._values={},r):null},customStatusObjChecker:function(e,t){if(!t||!t.trim())return null;var r=Object(l.a)({},e),n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},customObjMaker:function(e){var r=t("customizedServices",e);if(!r)return null;r.values&&(r._values=r.values.filter((function(e){return"complex"===e.type})).map((function(e){return{key:e.values[1].values[0].value,value:Number(e.values[0].values[0].value)}})));var n=r.options.filter((function(e){return"complex"===e.type}));return n.length&&(r._options=n[0].options[1].options.filter((function(e){return"-1"!==e.value})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{key:e.displayName,value:e.value})}))),r},customObjChecker:function(e,t){var r=Object(l.a)({},e),n=r._values.filter((function(e){return e.key!==t.key}));(n=(n=n.filter((function(e){return e.value}))).filter((function(e){return!isNaN(e.value)}))).push(t),r._values=n;var a="complex-value",u=(new DOMParser).parseFromString(r.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field[type=complex]"),c="<".concat(a,">");n.forEach((function(e,t){u[t].querySelector("fields > field#custom_type").innerHTML="<value>".concat(e.key,"</value>"),u[t].querySelector("fields > field#quantity").innerHTML="<value>".concat(e.value,"</value>"),c+=u[t].outerHTML})),c=(c+="</".concat(a,">")).replace(/fields/g,a),r.xml.querySelector(a)&&r.xml.querySelector(a).remove();var o=(new DOMParser).parseFromString(c,"text/xml").firstChild;return r.xml.append(o),r},shippingTemplateObjMaker:function(e){var r=t("shippingTemplateId",e);return r?(r._options=r.options?r.options.map((function(e){return{key:e.displayName,value:e.value}})):[],r.values&&(r._values={value:r.values[0].value},r._values.key=r._options.find((function(e){return e.value===r._values.value})).key),r):null},shippingTemplateObjChecker:function(e,t){if(!t)return null;var r=Object(l.a)({},e);r._values=t;var n="value",a="<".concat(n,">");a+=t.value,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},weightObjMaker:function(e){var r=t("pkgWeight",e);return r?(r.values&&(r._values={value:r.values[0].value}),r):null},weightObjChecker:function(e,t){if(!t)return null;var r=Object(l.a)({},e);r._values={value:t};var n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},measureObjMaker:function(e){var r=t("pkgMeasure",e);if(!r)return null;if(r.values){r._values=r.values.map((function(e){return{key:e.id,value:e.values[0].value}}));var n=["length","width","height"];r._values.sort((function(e,t){return n.indexOf(e.key)-n.indexOf(t.key)}))}return r},measureObjChecker:function(e,t){if(!t)return null;var r=t.split("*");if(r.length<3)return null;var n=!1;if(r.forEach((function(e){e&&!isNaN(e)||(n=!0)})),n)return null;var a=Object(l.a)({},e),u=["length","width","height"];a._values=r.map((function(e,t){return{key:u[t],value:Number(e)}}));var c="complex-value",o=(new DOMParser).parseFromString(a.xml.outerHTML,"text/xml").firstChild.querySelectorAll("fields > field"),i="<".concat(c,">"),s=Array.from(o);s.find((function(e){return"length"===e.id})).innerHTML="<value>".concat(a._values[0].value,"</value>"),s.find((function(e){return"width"===e.id})).innerHTML="<value>".concat(a._values[1].value,"</value>"),s.find((function(e){return"height"===e.id})).innerHTML="<value>".concat(a._values[2].value,"</value>"),s.forEach((function(e){i+=e.outerHTML})),i+="</".concat(c,">"),a.xml.querySelector(c)&&a.xml.querySelector(c).remove();var p=(new DOMParser).parseFromString(i,"text/xml").firstChild;return a.xml.append(p),a},saleTypeObjMaker:function(e){var r=t("saleType",e);return r?(r._options=r.options?r.options.map((function(e){return{key:e.displayName,value:e.value}})):[],r.values&&(r._values={key:"",value:r.values[0].value},r._values.key=r._options.find((function(e){return e.value===r._values.value})).key),r):null},saleTypeObjChecker:function(e,t){if(!t)return null;var r=Object(l.a)({},e);r._values=t;var n="value",a="<".concat(n,">");a+=t.value,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},batchObjMaker:function(e){var r=t("batchNum",e);return r?(r.values&&(r._values={value:r.values[0].value}),r):null},batchObjChecker:function(e,t){if(!t)return null;var r=Object(l.a)({},e);r._values={value:t};var n="value",a="<".concat(n,">");a+=t,a+="</".concat(n,">"),r.xml.querySelector(n)&&r.xml.querySelector(n).remove();var u=(new DOMParser).parseFromString(a,"text/xml").firstChild;return r.xml.append(u),r},descriptionObjMaker:function(e){var r=t("superText",e);return r.values?r._values={value:String(r.values[0].value).decodeHTMLEntity()}:r._values={value:""},r},descriptionObjChecker:function(e,t){if(!t||!t.trim())return null;if(t===e._values.value)return null;var r=(t=t.replace(/\n/g,"").trim()).trim().encodeNonASCII();if(r.length>5e4)return null;var n=Object(l.a)({},e);return n._values={value:t},n.xml.innerHTML="",n.xml.append(document.createElement("value")),n.xml.children[0].innerText=r,n},descriptionTypeObjMaker:function(e){var r=t("productDescType",e);r._options=r.options?r.options.map((function(e){return{key:e.displayName,value:e.value}})):[];var n=r.values?r.values[0].value:"2";if(r._options.find((function(e){return e.value===n}))){var a=r._options.find((function(e){return e.value===n})).key;r._values={key:a,value:n}}return r},descriptionTypeObjChecker:function(e,t){var r=Object(l.a)({},e);r._options.find((function(e){return e.value===t}))&&(r._values={key:r._options.find((function(e){return e.value===t})).key,value:t});var n="value",a="<".concat(n,">");return a+=t,a+="</".concat(n,">"),r.xml.innerHTML=a.trim().decodeHTMLEntity(),r}}}();t.a=o},328:function(e,t,r){"use strict";var n=r(16),a=r(85),u=r(278),l=r(448),c=r(201),o=r(282),i=r(325),s=r(326),p=r(1);t.a=function(e){var t=e.langPack,r=e.productModified,v=e.showDetails,f=e.modificationSubmission,d=Object(n.f)(),m=Object.keys(r);return Object(p.jsxs)(p.Fragment,{children:[v?m.length?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(a.a,{variant:"h3",children:t.steps.modificationDone}),Object(p.jsx)(u.a,{children:m.map((function(e){return Object(p.jsxs)(l.a,{children:["--",e]},e)}))}),Object(p.jsx)(c.a,{})]}):Object(p.jsx)(a.a,{variant:"h3",children:t.steps.modificationNull}):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{children:[Object(p.jsx)(o.a,{startIcon:Object(p.jsx)(i.a,{}),onClick:f,children:t.common.yes}),Object(p.jsx)(o.a,{startIcon:Object(p.jsx)(s.a,{}),onClick:function(){return d("/product")},children:t.common.no})]})]})}},333:function(e,t,r){"use strict";var n=r(5),a=r(2),u=r(0),l=r(9),c=r(66),o=r(6),i=r(10),s=r(48),p=r(53);function v(e){return Object(s.a)("MuiFormGroup",e)}Object(p.a)("MuiFormGroup",["root","row","error"]);var f=r(31),d=r(38),m=r(1),b=["className","row"],h=Object(o.a)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.row&&t.row]}})((function(e){var t=e.ownerState;return Object(a.a)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),j=u.forwardRef((function(e,t){var r=Object(i.a)({props:e,name:"MuiFormGroup"}),u=r.className,o=r.row,s=void 0!==o&&o,p=Object(n.a)(r,b),j=Object(f.a)(),y=Object(d.a)({props:r,muiFormControl:j,states:["error"]}),x=Object(a.a)({},r,{row:s,error:y.error}),O=function(e){var t=e.classes,r={root:["root",e.row&&"row",e.error&&"error"]};return Object(c.a)(r,v,t)}(x);return Object(m.jsx)(h,Object(a.a)({className:Object(l.a)(O.root,u),ownerState:x,ref:t},p))}));t.a=j},440:function(e,t,r){"use strict";r.r(t);var n=r(17),a=r(3),u=r(7),l=r(32),c=r.n(l),o=r(105),i=r(49),s=r(12),p=r(0),v=r(22),f=r(16),d=r(85),m=r(455),b=r(444),h=r(201),j=r(451),y=r(456),x=r(457),O=r(25),g=r(1),k=Object(O.a)(Object(g.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite"),_=r(427),S=r(86),M=r(320),w=r(268),C=r(331),q=r(141),T=r(452),P=Object(O.a)(Object(g.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),A=r(6),L=r(54),H={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},N=Object(A.a)(w.a)((function(){var e=H[100];return{backgroundColor:e,height:40,"&:hover, &:focus":{backgroundColor:Object(L.c)(e,.06)},"&:active":{boxShadow:10,backgroundColor:Object(L.c)(e,.12)}}}));var F=function(e){var t=e.localization,r=e.categories,n=e.menuRef,a=e.menuState,u=e.showMenu,l=e.closeMenu,c=a.menuArr,o=a.anchorEl;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(C.a,{sx:{display:"inline-flex",paddingTop:"10px"},children:r.map((function(e,r){if(r>0)return Object(g.jsx)(N,{sx:a.menuLevel===r?{display:"none"}:{},component:"a",href:"#",label:"zhCN"!==t.locale?e.name:e.cn_name,icon:1===r?Object(g.jsx)(P,{}):void 0,deleteIcon:Object(g.jsx)(_.a,{}),onDelete:function(){return u(r)},onClick:function(){return u(r)}},e.category_id)}))}),Object(g.jsx)("span",{ref:n}),Object(g.jsx)("div",{children:Object(g.jsx)(q.a,{anchorEl:o,open:Boolean(o),onClose:function(){return l()},children:c.map((function(e){return Object(g.jsx)(T.a,{onClick:function(){return l(e.category_id)},children:"zhCN"!==t.locale?e.name:e.cn_name},e.category_id)}))})})]})},D=r(52),R=r(363),E=r(327),z=r(333),I=r(251),U=r(447),V=r(262),G=r(385),Q=Object(O.a)(Object(g.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"}),"GridOn"),J=Object(D.a)(Object(p.lazy)((function(){return Promise.all([r.e(2),r.e(14)]).then(r.bind(null,390))}))),K=Object(D.a)(Object(p.lazy)((function(){return Promise.all([r.e(13),r.e(5),r.e(23)]).then(r.bind(null,435))}))),W=function(e){var t=e.langPack,r=e.localization,a=e.categoryId,l=e.groupId,v=(e.referredRealProductId,e.rtsProduct);console.log("product upload running");var f,h=Object(p.useState)(Ee()),j=Object(s.a)(h,2),y=j[0],x=(j[1],Object(p.useState)([{id:0,imageArr:"",subject:"banana",keyword_1:"fresh banana",keyword_2:"Cavendish banana",keyword_3:"Filipino banana",payment_methods:"T/T",unit_type:"piece",logistic_mode:"sea",shipping_port:"Manila",packaging_description:"wrapped with carton"},{id:1,imageArr:"",subject:"strawberry",keyword_1:"fresh strawberry",keyword_2:"red strawberry",keyword_3:"Spanish strawberry",payment_methods:"L/C",unit_type:"Kilogram",logistic_mode:"sea",shipping_port:"Vancouver",packaging_description:"10KG / box"}])),O=Object(s.a)(x,2),k=O[0],_=O[1],S=Object(p.useState)({}),M=Object(s.a)(S,2),C=M[0],q=M[1],T=Object(p.useState)(100),P=Object(s.a)(T,2),A=P[0],L=P[1],H=Object(p.useState)(0),N=Object(s.a)(H,2),F=N[0],D=N[1],W=Object(p.useState)(10),B=Object(s.a)(W,2),X=B[0],Y=B[1],Z=Object(p.useState)(0),$=Object(s.a)(Z,2),ee=$[0],te=$[1],re=Object(p.useState)([]),ne=Object(s.a)(re,2),ae=ne[0],ue=ne[1],le=Object(p.useState)(!1),ce=Object(s.a)(le,2),oe=ce[0],ie=ce[1],se=Object(p.useState)(!1),pe=Object(s.a)(se,2),ve=pe[0],fe=pe[1],de=Object(p.useState)(""),me=Object(s.a)(de,2),be=me[0],he=me[1],je=Object(p.useState)(!1),ye=Object(s.a)(je,2),xe=ye[0],Oe=ye[1],ge=Object(p.useState)([]),ke=Object(s.a)(ge,2),_e=ke[0],Se=ke[1],Me=Object(p.useState)([]),we=Object(s.a)(Me,2),Ce=we[0],qe=we[1],Te=Object(p.useRef)(null);function Pe(){return(Pe=Object(i.a)(c.a.mark((function e(n){var a,l,o,i,s,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ma.productSchemaQuery({param_product_top_publish_request:JSON.stringify(Object(u.a)(Object(u.a)({},n),{},{language:"enUS"===r.locale?"en_US":"zh"}))}),e.next=3,fetchAPI(a);case 3:if((l=e.sent)&&l.response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,t.common.netFail+"\n"+l?l.response.result:""));case 6:if(o=ma.productSchemaCheck(l),i=o.response,s=i.status,p=i.result,s){e.next=10;break}return e.abrupt("return",queryResult(s,p));case 10:if(E.a.schemaMaker(p)){e.next=13;break}return e.abrupt("return",queryResult(!1,t.steps.uneditable));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return(Ae=Object(i.a)(c.a.mark((function e(n){var a,l,o,i,s,p,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ma.productSchemaRenderQuery({param_product_top_publish_request:JSON.stringify(Object(u.a)(Object(u.a)({},n),{},{language:"enUS"===r.locale?"en_US":"zh"}))}),e.next=3,fetchAPI(a);case 3:if((l=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,l.response.result));case 6:if(o=ma.productSchemaRenderCheck(l),i=o.response,s=i.status,p=i.result,s){e.next=10;break}return e.abrupt("return",queryResult(s,p));case 10:if(v=E.a.schemaMaker(p,!0)){e.next=13;break}return e.abrupt("return",queryResult(!1,t.steps.uneditable));case 13:he(v);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return He.apply(this,arguments)}function He(){return(He=Object(i.a)(c.a.mark((function e(r){var n,a,u,l,o,i,s,p,v,d,m,b,h,j,y,x;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.text();case 2:if(n=e.sent,a=n.split(/\r\n/g),u=[],l=[],!(a.length>1)){e.next=20;break}o=a[0].split(/,/g),i=[],s=Ee(),p=function(e){var r=o[e].trim(),n=s.find((function(e){return e.headerName==r}));if(!n)return{v:queryResult(!1,t.steps.columnNotFound)};i.push(n.field)},v=0;case 12:if(!(v<o.length)){e.next=19;break}if("object"!==typeof(d=p(v))){e.next=16;break}return e.abrupt("return",d.v);case 16:v++,e.next=12;break;case 19:u=i;case 20:b=1;case 21:if(!(b<a.length)){e.next=36;break}if(h=a[b].split(/,/g),void 0===m){e.next=28;break}if(h.length===m&&h.length==u.length){e.next=27;break}return r.target.value="",e.abrupt("return",queryResult(!1,t.steps.bulkUploadSheetMalformed));case 27:m=h.length;case 28:if(1!==h.length){e.next=30;break}return e.abrupt("break",36);case 30:for(j={id:b-1},y=0;y<h.length;y++)x=h[y].trim(),j[u[y]]=x;l.push(j);case 33:b++,e.next=21;break;case 36:return console.log("file change",u,l),te(l.length),_(l),e.abrupt("return");case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(p.useEffect)((function(){a&&function(e){Pe.apply(this,arguments)}({cat_id:a})}),[a]),Object(p.useEffect)((function(){if(be){console.log("new template found");var e=be.children[0].toObject();if(e){var t=e.field.map((function(e){return{id:e.id,name:e.name}}));t=t.filter((function(e){return e.name})),t=t.filter((function(e){return"infos"!==e.id})),t=t.filter((function(e){return"ApiPostLevelAttrAdapter"!==e.id}));var r={};t.forEach((function(e){return r[e.name.trim()]=e})),t=Array.from(Object.values(r)),Se(t),Oe(!0)}}}),[be]);var Ne=function(){var e=Object(i.a)(c.a.mark((function e(r){var n,u,l,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("need upload",r),r.length){e.next=3;break}return e.abrupt("return",queryResult(!1,t.steps.productSheetEmpty));case 3:if(a){e.next=5;break}return e.abrupt("return",queryResult(!1,t.steps.productCategoryNeeded));case 5:L(0),n=0,u=Object(o.a)(r),e.prev=8,u.s();case 10:if((l=u.n()).done){e.next=22;break}return i=l.value,e.next=14,Fe(i);case 14:return s=e.sent,console.log(s),n++,L(n/r.length*100),e.next=20,sleep(3e3);case 20:e.next=10;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),u.e(e.t0);case 27:return e.prev=27,u.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[8,24,27,30]])})));return function(t){return e.apply(this,arguments)}}();function Fe(e){return De.apply(this,arguments)}function De(){return(De=Object(i.a)(c.a.mark((function e(n){var u,i,s,p,f,d,m,b,h,j,y,x,O,g,k,_,S,M,w,C,q,T,P,A,L,H,N,F,D,R,z,I,U,V,G,Q,J,K,W,B,X,Y,Z,$,ee,te,re,ne,ae,ue,le;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("start posting..."),u=["subject","keyword_1","imageArr"],i=Ce.length?Ce.map((function(e){return _e.find((function(t){return t.name==e})).id})):[],!u.find((function(e){return!n[e]}))){e.next=5;break}return e.abrupt("return",queryResult(!1,t.steps.keyAttributeMissing));case 5:if(s=n.imageArr,p=n.subject,f=n.keyword_1,d=n.keyword_2,m=n.keyword_3,b=n.payment_methods,h=n.unit_type,j=n.logistic_mode,y=n.shipping_port,x=n.packaging_description,O={},s&&s.length&&(g=E.a.imageObjMaker(),k=s,_=E.a.imageObjChecker(g,k),O.scImages=_),p&&(S=E.a.subjectObjMaker(),M=p,w=E.a.subjectObjChecker(S,M),O.productTitle=w),f&&(C=E.a.keywordObjMaker(),q=(q=[f,d,m]).filter((function(e){return e})),T=E.a.keywordObjChecker(C,q),O.productKeywords=T),b&&(P=E.a.paymentMethodObjMaker(),A=[{value:b}],L=E.a.paymentMethodObjChecker(P,A),O.paymentMethod=L),!h){e.next=19;break}if(H=E.a.priceUnitObjMaker(),N=H._options.find((function(e){return new RegExp(h,"gi").test(e.key)}))){e.next=16;break}return e.abrupt("return",queryResult(!1,t.steps.productPriceUnitNeeded));case 16:F={value:N.value},D=E.a.priceUnitObjChecker(H,F),O.priceUnit=D;case 19:j&&(R=E.a.logisticsObjMaker(),z=R._options.find((function(e){return new RegExp(j,"gi").test(e.key)})),I=(I=z?[z]:R._options).map((function(e){return e.key})),U=E.a.logisticsObjChecker(R,I),O.logisticsMode=U),y&&(V=E.a.portObjMaker(),G=y,Q=E.a.portObjChecker(V,G),O.port=Q),x&&(J=E.a.packaingDescriptionObjMaker(),K=x,W=E.a.packaingDescriptionObjChecker(J,K),O.wholeSalePkgDesc=W),l&&(B=E.a.productGroupObjMaker(),X=l,Y=E.a.productGroupObjChecker(B,X),O.productGroup=Y),v&&(Z=E.a.productTypeObjMaker(),$=v?"1":"2",ee=E.a.productTypeObjChecker(Z,$),O.market=ee),te=Object(o.a)(i);try{for(te.s();!(re=te.n()).done;)ne=re.value,O[ne]||(O[ne]={id:ne,xml:be.children[0].querySelector("field#".concat(ne))})}catch(c){te.e(c)}finally{te.f()}if(console.log(O),ae="add",ue=E.a.schemaChecker(O)){e.next=31;break}return e.abrupt("return",queryResult(!1,t.steps.modificationNull));case 31:return e.next=33,E.a.schemaSubmit(ue,ae,null,a,r.locale);case 33:if((le=e.sent)&&le.response.status){e.next=36;break}return e.abrupt("return",queryResult(!1,t.common.netFail+"\n"+le?le.response.result:""));case 36:return queryResult(!0,"add"===ae?t.steps.addSuccess:t.steps.updateSuccess),e.abrupt("return",!0);case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re={needPhoto:function(e){console.log("needPhoto",e),ue(e),ie(!0)},needSheet:function(){Te.current.click()},needPost:Ne,needTemplate:function(){console.log("needTemplate"),fe(!0)}};function Ee(e){return[{field:"imageArr",headerName:t.table.photos,disableExport:!0,minWidth:50,valueGetter:function(e){return e.row},valueFormatter:function(e){return e.value},renderCell:function(e){var t=e.value;return t.imageArr&&t.imageArr.length?Object(g.jsx)("img",{src:t.imageArr[0].url,style:{width:"93%"},alt:"mainPic"}):Object(g.jsx)(G.a,{})}},{field:"subject",editable:!0,headerName:t.table.subject},{field:"keyword_1",editable:!0,flex:.5,headerName:t.table.keyword1},{field:"keyword_2",editable:!0,flex:.5,headerName:t.table.keyword2},{field:"keyword_3",editable:!0,flex:.5,headerName:t.table.keyword3},{field:"payment_methods",editable:!0,flex:.5,headerName:t.table.payment_methods},{field:"unit_type",editable:!0,flex:.5,headerName:t.table.unit_type},{field:"logistic_mode",editable:!0,flex:.5,headerName:t.table.logistic_mode},{field:"shipping_port",editable:!0,flex:.5,headerName:t.table.shipping_port},{field:"packaging_description",editable:!0,flex:.5,headerName:t.table.packaging_description}]}return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(z.a,{children:Object(g.jsx)(m.a,{ref:Te,sx:{display:"none"},labelPlacement:"top",control:Object(g.jsx)(I.a,{type:"file"}),label:Object(g.jsx)(Q,{fontSize:"large"}),onChange:function(e){f=null;var t=e.target.files;if(t&&t.length)for(var r=0;r<t.length;r++)return t[r].size>1e6?queryResult(!1,"\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc71M"):(f=t[r],Le(e))}})}),Object(g.jsx)(J,{onPhotoConfirm:function(e){var t=Object(n.a)(k),r=ae[0],a=Object(u.a)({},r),l=e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{key:e.id,value:e.url})}));a.imageArr=l,t[a.id]=a,console.log("onPhotoConfirm",t),_(t)},dialogOpen:oe,setDialogOpen:ie,langPack:t}),Object(g.jsx)(K,{onProductConfirm:function(e){var t=e[0];t&&function(e){Ae.apply(this,arguments)}({product_id:t.id})},dialogOpen:ve,setDialogOpen:fe,langPack:t}),Object(g.jsx)("div",{hidden:!xe,children:Object(g.jsx)(U.a,{id:"add-product-tempinfo",sx:{display:"inline"},multiple:!0,limitTags:9,disableCloseOnSelect:!0,onChange:function(e,t){return qe(t)},options:_e.length?_e.map((function(e){return e.name})):[],renderOption:function(e,t,r){var n=r.selected;return Object(g.jsxs)("li",Object(u.a)(Object(u.a)({},e),{},{children:[Object(g.jsx)(b.a,{style:{marginRight:8},checked:n}),t]}))},renderTags:function(e,t){return e.map((function(e,r){return Object(g.jsx)(w.a,Object(u.a)({variant:"outlined",label:e},t({index:r})))}))},renderInput:function(e){return Object(g.jsx)(V.a,Object(u.a)(Object(u.a)({},e),{},{label:Object(g.jsx)(d.a,{variant:"h3",children:t.steps.bulkUploadeTemplateDetails})}))}})}),Object(g.jsx)(R.a,{tableRows:k,tableColumns:y,page_size:X,page:F,total:ee,localization:r,langPack:t,columnVisibilityModel:C,setColumnVisibilityModel:q,handleChangePage:function(e){D(e)},handleChangeRowsPerPage:function(e){Y(e)},onRowClick:function(e,t){},productTableFn:Re,onTableSelection:function(e){console.log(e.length+" selected")},loadingProgress:A})]})},B=r(328),X={};t.default=function(){console.log("productDraft app running");var e=Object(v.c)((function(e){return e.localization})),t=Object(v.c)((function(e){return e.globalization})),r=Object(p.useState)(M.a[e.locale]),l=Object(s.a)(r,2),O=l[0],w=l[1],C=Object(p.useState)(t.baseData.loginData),q=Object(s.a)(C,1)[0],T=Object(f.f)(),P=new URLSearchParams(location.pathname.replace("/product/draft/","")),A=Object(p.useState)(Number(P.get("group_id"))),L=Object(s.a)(A,1)[0],H=Object(p.useState)(Number(P.get("referred_real_product_id"))),N=Object(s.a)(H,1)[0],D=Object(p.useState)(0),R=Object(s.a)(D,2),E=R[0],z=R[1],I=Object(p.useState)([]),U=Object(s.a)(I,2),V=U[0],G=U[1],Q=[],J=Object(p.useRef)(null),K=Object(p.useState)({menuLevel:void 0,menuValue:void 0,menuArr:[],anchorEl:null}),Y=Object(s.a)(K,2),Z=Y[0],$=Y[1],ee=Object(p.useState)({panel1:!1}),te=Object(s.a)(ee,2),re=te[0],ne=te[1],ae=Object(p.useState)(!1),ue=Object(s.a)(ae,2),le=ue[0],ce=ue[1];function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(i.a)(c.a.mark((function e(t){var r,n,a,u,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productCategoryQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent)&&n.response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,O.common.netFail+"\n"+n?n.response.result:""));case 6:if(a=ma.productCategoryCheck(n),u=a.response,l=u.status,o=u.result,l){e.next=10;break}return e.abrupt("return",queryResult(l,o));case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(i.a)(c.a.mark((function e(t){var r,n,a,u,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productCategoryAttributeQuery(t),e.next=3,fetchAPI(r);case 3:if((n=e.sent)&&n.response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,O.common.netFail+"\n"+n?n.response.result:""));case 6:if(a=ma.productCategoryAttributeCheck(n),u=a.response,l=u.status,o=u.result,l){e.next=10;break}return e.abrupt("return",queryResult(l,o));case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(i.a)(c.a.mark((function e(t,r){var a,u,l,o,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=11;break}return e.next=3,oe({cat_id:t});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return");case 6:return u=a.level,l=a.parent_ids,Q.length||(Q=new Array(u)),Q[u]=a,u>0&&l&&l.number?pe(l.number[0]):G(Q),e.abrupt("return");case 11:if(o=V[r-1].child_ids.number.find((function(e){return e.category_id===t}))){e.next=14;break}return e.abrupt("return");case 14:return i=o.child_ids,(s=Object(n.a)(V))[r]=o,r+1<s.length&&(s.length=r+1),i&&(s.push({category_id:0}),Q=s,de(s.length-1)),e.abrupt("return",G(s));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(p.useEffect)((function(){if(V.length){var e=V[V.length-1].category_id;z(e),e&&(!function(e){se.apply(this,arguments)}({cat_id:e}),X.category_id=e)}}),[V]),Object(p.useEffect)((function(){w(M.a[e.locale])}),[e.locale]),Object(p.useEffect)((function(){return console.log("I want product drafting"),q?(pe(153710),function(){X={},console.log("I leave product draft")}):T("/")}),[]);var fe,de=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,n,a,u,l,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Q.length?Q:V,n=r[t].category_id,a=r[t-1].child_ids.number,u=Object(o.a)(a),e.prev=4,u.s();case 6:if((l=u.n()).done){e.next=16;break}if("object"!==typeof(i=l.value)){e.next=10;break}return e.abrupt("break",16);case 10:return e.next=12,oe({cat_id:i});case 12:s=e.sent,a[a.indexOf(i)]=s;case 14:e.next=6;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),u.e(e.t0);case 21:return e.prev=21,u.f(),e.finish(21);case 24:$({menuLevel:t,menuValue:n,menuArr:a,anchorEl:J.current});case 25:case"end":return e.stop()}}),e,null,[[4,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return",queryResult(!1,O.steps.productCategoryNeeded));case 2:return queryResult(!0,O.common.success+"\n"+O.steps.redirecting),setTimeout((function(){var e="/product/category_id="+E+"&group_id="+L;le&&(e+="&product_type=1"),T(e)}),1e3),e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(S.a,{title:"Product Posting --\u4ea7\u54c1\u53d1\u5e03",children:[Object(g.jsxs)(d.a,{variant:"h3",children:[O.form.category," & ",O.form.productType]}),Object(g.jsx)(F,{localization:e,categories:V,menuRef:J,menuState:Z,showMenu:de,closeMenu:function(e){var t=Z.menuLevel;$({menuArr:[],anchorEl:null}),console.log(e),void 0!==e&&e!==E&&pe(e,t)}}),Object(g.jsx)(m.a,{sx:{paddingLeft:"7px",paddingTop:"7px"},control:Object(g.jsx)(b.a,{icon:Object(g.jsx)(k,{color:"primary"}),checkedIcon:Object(g.jsx)(k,{color:"error"}),onChange:function(e){return ce(e.target.checked)}}),label:le?O.form.rtsProduct:O.form.sourcingProduct}),Object(g.jsx)("div",{hidden:re.panel1,children:Object(g.jsx)(B.a,{langPack:O,productModified:X,showDetails:!1,modificationSubmission:me})}),Object(g.jsx)(h.a,{sx:{marginBottom:"20px"}}),Object(g.jsxs)(j.a,{expanded:re.panel1,onChange:(fe="panel1",function(e,t){ne((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(a.a)({},fe,t))}))}),children:[Object(g.jsxs)(y.a,{expandIcon:Object(g.jsx)(_.a,{}),children:[Object(g.jsx)(d.a,{variant:"h3",sx:{width:"28%",flexShrink:0},children:re.panel1?O.steps.bulkUploadGuide:O.steps.bulkUpload}),re.panel1?Object(g.jsx)(d.a,{sx:{fontWeight:"bold",color:"brown"},children:O.steps.bulkUploadProcesses}):null]}),Object(g.jsx)(x.a,{children:Object(g.jsx)("div",{style:{marginTop:"20px"},children:Object(g.jsx)(W,{langPack:O,localization:e,categoryId:E,groupId:L,rtsProduct:le,referredRealProductId:N})})})]})]})}}}]);
//# sourceMappingURL=19.4a3addf4.chunk.js.map