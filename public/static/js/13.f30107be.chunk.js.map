{"version":3,"sources":["views/product/Languages.js","views/product/component/Confirmation.js","views/product/component/EditStep.js","views/product/component/PhotoGallery.js","views/product/component/ProductSummary.js","views/product/component/ProductAttribute.js","views/product/component/ProductService.js","views/product/component/ProductDetail.js","views/product/ProductEdit.js","assets/images/editorBtn.png"],"names":["Languages","enUS","folder","currentFolder","needFolderName","addNewFolder","folderNull","dataNull","folderRequired","table","tableHeader","categoryName","productId","subject","status","display","id","is_rts","is_specific","owner_member_display_name","product_type","smart_edit","attributes","keywords","price","payment_methods","min_order_quantity","day","unit_type","gmt_create","gmt_modified","score","tag","customInfo","tableToolbar","menuHide","menuShow","productScore","productDisplayOn","productDisplayOff","productUpdate","productEdit","productCopy","form","KeyInformation","ProductAttributes","productService","category","attributeMissing","attributeDuplicated","pleaseSelect","selectOrInput","pieces","steps","first","second","finally","previous","next","complete","addProduct","uneditable","productIdError","categoryError","editPrice","editPeriod","editAll","editDone","nullNotAllowed","MOQError","PriceError","add","remove","cloud","selectFromCloud","choosePhotos","uploadPhotos","removePhotos","productDescriptionTip","mainPhotoRequired","descriptionOverflow","panel1","panel2","panel3","addAttributes","clearAttributes","modificationNull","addCustomInfo","clearCustomInfo","modificationDone","numberOnly","addSuccess","updateSuccess","duplicateSuccess","uploadSuccess","productScoreError","basic","potential","super","top","common","yes","no","success","netFail","zhCN","Confirmation","langPack","productModified","modificationSubmission","navigate","useNavigate","modifiedKeys","Object","keys","length","variant","map","key","align","startIcon","onClick","EditStep","activeStep","setActiveStep","useState","Stepper","label","Step","StepLabel","ButtonGroup","color","disableElevation","sx","flexDirection","pt","paddingBottom","Button","disabled","prevActiveStep","mr","Box","flex","Photo","Loadable","lazy","PhotoGallery","paymentMethodSaver","logisticsSaver","priceSaver","periodSaver","xmlSchema","onModified","photoCols","rowHeight","xmlGetField","imageObj","setImageObj","cloudImageArr","setCloudImageArr","dialogOpen","setDialogOpen","onImageChange","method","valueArr","newObj","imageArr","_values","newArr","queryResult","forEach","valueObj","filter","obj","value","index","replace","valueTagName","setter","valueTemplates","DOMParser","parseFromString","xml","outerHTML","firstChild","querySelectorAll","valueSaver","innerHTML","values","querySelector","newXml","append","useEffect","fieldObj","console","log","sort","a","b","Number","exec","getImageObj","onDialogClose","submit","url","ImageList","cols","marginTop","marginBottom","gap","ImageListItem","rows","src","alt","loading","ImageListItemBar","background","title","position","actionIcon","Tooltip","IconButton","onDoubleClick","StarBorder","actionPosition","right","size","deletedImage","splice","onPhotoReorder","SwitchLeft","style","justifyContent","height","CloudQueue","Dialog","onClose","open","DialogTitle","onPhotoSelected","App","attributeSaver","subjectObj","setSubjectObj","keywordObj","setKeywordObj","paymentMethodObj","setPaymentMethodObj","priceUnitObj","setPriceUnitObj","MOQObj","setMOQObj","priceObj","setPriceObj","priceEdit","setPriceEdit","ladderPeriodObj","setLadderPeriodObj","periodEdit","setPeriodEdit","portObj","setPortObj","logisticsModeObj","setLogisticsObj","onMOQChanged","getSubjectObj","join","getKeywordObj","getMoqObj","_options","options","displayName","getPaymentMethodObj","type","quantity","getPriceObj","getPriceUnitObj","getLadderPeriodObj","getPortObj","find","getLogisticsObj","onPriceSave","onPriceChange","mode","priceArr","pop","onPeriodSave","onPeriodChange","TextField","margin","fullWidth","Typography","name","defaultValue","onBlur","e","target","trim","split","keyword","Autocomplete","multiple","limitTags","disableCloseOnSelect","predefinedMethodTemplate","valueStr","onChange","getOptionLabel","option","isOptionEqualToValue","renderTags","getTagProps","Chip","renderOption","props","selected","Checkbox","marginRight","checked","renderInput","params","minWidth","placeholder","onPriceUnitChange","maxWidth","InputProps","endAdornment","InputAdornment","JSON","stringify","Table","TableHead","TableRow","TableCell","Check","lastPrice","prev","TableBody","border","alignItems","encodeHTMLEntity","component","scope","Add","Remove","lastObj","shadowObj","attributeObj","setAttributeObj","addAttribute","setAddAttribute","optionSelected","setOptionSelected","checkValues","checkOptions","getAttributeObj","arr","inputValue","undefined","str","newValues","push","optionObj","test","newOptions","saveAttribute","cleaner","invalidList","newField","subObj","elementValues","document","createElement","elementValue","setAttribute","innerText","String","i","onAttributeConfirm","mainAttributeObj","myOptions","subOptionObj","subOption","onAttributeChange","paddingTop","optionArr","newValueArr","newValue","Cancel","Divider","customSaver","customObj","setCustomObj","addCustom","setAddCustom","customSelected","setCustomSelected","customStatusObj","setCustomStatusObj","getCustomObj","getCustomStatusObj","onCustomOptionChange","onCustomConfirm","isNaN","onCustomStatusChange","freeSolo","onInputChange","optionFound","onCustomOptionConfirm","finalValue","onCustomChange","ProductDetail","editMode","productSchema","real_product_id","localization","finalDescription","descriptionObj","setDescriptionObj","descriptionTypeObj","setDescriptionTypeObj","onDescriptionChange","encodeNonASCII","children","onDescriptionTypeChange","getDescriptionObj","getDescriptionTypeObj","editor","useRef","config","language","locale","enter","defaultActionOnPaste","toolbarAdaptive","buttons","iconURL","tooltip","textNearby","html","htmlCodes","line","events","paste","items","clipboardData","beforePasteInsert","text","ref","tabIndex","newContent","useSelector","state","globalization","setLangPack","baseData","loginData","panel4","expanded","setExpanded","urlParams","URLSearchParams","location","pathname","product_id","get","category_Id_ext","setXmlSchema","productInfo","setProductInfo","setFinalDescription","finalCatId","setFinalCatId","useMediaQuery","useTheme","breakpoints","down","paramObj","ma","productDetailQuery","fetchAPI","msg","response","result","res","productDetailCheck","description","category_id","getProductId","productIdQuery","productIdCheck","makeProductExample","photoFile","photoUploadQuery","file_name","image_bytes","group_id","photoUploadCheck","productSchemaQuery","param_product_top_publish_request","productSchemaCheck","makeSchema","productSchemaRenderQuery","productSchemaRenderCheck","window","fields","schemaArr","Array","from","node","toObject","queryMethod","productSchemaAddQuery","checkMethod","productSchemaAddCheck","catId","productSchemaUpdateQuery","productSchemaUpdateCheck","cat_id","insideCheck","nodeArr","newSubArr","subArr","fieldCheck","optionNodes","valueNodes","resultObj","generalCheck","getProductInfo","makeProductInfo","handleAccordionChange","panel","event","isExpanded","MainCard","Accordion","AccordionSummary","expandIcon","ExpandMore","width","flexShrink","AccordionDetails","ProductSummary","ProductAttribute","ProductService","xmlArr","finalXmlStr","xmldom","submitProductSchema"],"mappings":"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","file":"static/js/13.f30107be.chunk.js","sourcesContent":["let Languages = {\r\n    enUS: {\r\n        folder: {\r\n            currentFolder: 'please select',\r\n            needFolderName: 'please input name for new folder',\r\n            addNewFolder: 'add new folder',\r\n            folderNull: 'folder not found',\r\n            dataNull: 'data not found',\r\n            folderRequired: 'please select a folder to continue'\r\n        },\r\n        table: {\r\n            tableHeader: 'Products',\r\n            categoryName: 'category name',\r\n            productId: 'product id',\r\n            subject: 'subject',\r\n            status: 'status',\r\n            display: 'display',\r\n            id: 'id',\r\n            is_rts: 'RTS',\r\n            is_specific: 'specific',\r\n            owner_member_display_name: 'owner',\r\n            product_type: 'type',\r\n            smart_edit: 'smart edit',\r\n            attributes: 'attributes',\r\n            keywords: 'keywords',\r\n            price: 'price',\r\n            payment_methods: 'payment methods',\r\n            min_order_quantity: 'MOQ(min. order quantity)',\r\n            day: 'day',\r\n            unit_type: 'unit type',\r\n            gmt_create: 'date create',\r\n            gmt_modified: 'date modified',\r\n            score: 'score',\r\n            tag: 'tag',\r\n            customInfo: 'custom info'\r\n        },\r\n        tableToolbar: {\r\n            menuHide: 'hide menu',\r\n            menuShow: 'show menu',\r\n            productScore: 'scores',\r\n            productDisplayOn: 'in-stock',\r\n            productDisplayOff: 'out-stock',\r\n            productUpdate: 'update',\r\n            productEdit: 'edit',\r\n            productCopy: 'copy'\r\n        },\r\n        form: {\r\n            KeyInformation: 'key information',\r\n            ProductAttributes: 'product attributes',\r\n            productService: 'product service',\r\n            subject: '128 letters max.',\r\n            category: 'click to change category',\r\n            keywords: '3 keywords max. Comma(,) separated',\r\n            price: 'set price (range)',\r\n            payment_methods: 'payment methods such as T/T, L/C, etc.',\r\n            min_order_quantity: 'optional',\r\n            attributes: 'add or delete',\r\n            attributeMissing: 'attribute missing',\r\n            attributeDuplicated: 'attribute duplicated',\r\n            pleaseSelect: 'please select',\r\n            selectOrInput: 'select or input',\r\n            pieces: 'pieces'\r\n        },\r\n        steps: {\r\n            first: 'Edit Attributes',\r\n            second: 'Edit Contents',\r\n            finally: 'Preview & Publish',\r\n            previous: 'Previous',\r\n            next: 'Next',\r\n            complete: 'Complete',\r\n            addProduct: 'Add Product',\r\n            uneditable: 'product is currently uneditable',\r\n            productIdError: 'product id error, pls go back & try again',\r\n            categoryError: 'category error, pls try again',\r\n            editPrice: 'Edit Price',\r\n            editPeriod: 'Edit Shipping Period',\r\n            editAll: 'Edit All',\r\n            editDone: 'Edit Done',\r\n            nullNotAllowed: 'empty value is not allowed',\r\n            MOQError: 'MOQ should be greater than the previous one',\r\n            PriceError: 'price should be smaller than the previous one',\r\n            add: 'Add',\r\n            remove: 'Remove',\r\n            cloud: 'Cloud',\r\n            selectFromCloud: 'Select from Cloud',\r\n            choosePhotos: 'Choose Photos',\r\n            uploadPhotos: 'Upload Photos',\r\n            removePhotos: 'double click to remove the photo',\r\n            productDescriptionTip:\r\n                'Tips: ① If it cannot be updated, please remove ALL contents and try again. ②Click the red button below 👇 to unlock photo resizing',\r\n            mainPhotoRequired: 'Need at least one photo',\r\n            descriptionOverflow: 'description length shall be smaller than 60k letters',\r\n            panel1: 'subject, keywords, price, MOQ...',\r\n            panel2: 'all kinds of attributes...',\r\n            panel3: 'additional information...',\r\n            addAttributes: 'Add Attributes',\r\n            clearAttributes: 'Clear Attributes',\r\n            modificationNull: 'No modification made',\r\n            addCustomInfo: 'Add Custom Info',\r\n            clearCustomInfo: 'Clear Custom Info',\r\n            modificationDone: 'Will submit the following modifications:',\r\n            numberOnly: 'Please input number only',\r\n            addSuccess: 'Product added successfully',\r\n            updateSuccess: 'Product updated successfully',\r\n            duplicateSuccess: 'product duplicated successfully',\r\n            uploadSuccess: 'Upload Success',\r\n            productScoreError: 'no score found'\r\n        },\r\n        productScore: {\r\n            basic: 'Basic',\r\n            potential: 'Potential',\r\n            super: 'Super',\r\n            top: 'Top'\r\n        },\r\n        common: {\r\n            yes: 'OK',\r\n            no: 'Cancel',\r\n            success: 'Success',\r\n            netFail: 'request failed'\r\n        }\r\n    },\r\n    zhCN: {\r\n        folder: {\r\n            currentFolder: '请选择',\r\n            needFolderName: '请填写文件夹名',\r\n            addNewFolder: '新建文件夹',\r\n            folderNull: '文件夹不存在',\r\n            dataNull: '数据不存在',\r\n            folderRequired: '请选择文件夹'\r\n        },\r\n        table: {\r\n            tableHeader: '产品',\r\n            categoryName: '类目',\r\n            productId: '产品 id',\r\n            subject: '标题',\r\n            status: '审核状态',\r\n            display: '上架状态',\r\n            id: 'id',\r\n            is_rts: 'RTS',\r\n            is_specific: '规格品',\r\n            owner_member_display_name: '负责人',\r\n            product_type: '商品类型',\r\n            smart_edit: '智能编辑',\r\n            attributes: '属性',\r\n            keywords: '关键词',\r\n            price: '价格',\r\n            payment_methods: '支付方式',\r\n            min_order_quantity: '最小起订量(MOQ)',\r\n            day: '天',\r\n            unit_type: '单位',\r\n            gmt_create: '创建日期',\r\n            gmt_modified: '修改日期',\r\n            score: '产品分',\r\n            tag: '标签',\r\n            customInfo: '定制信息'\r\n        },\r\n        tableToolbar: {\r\n            menuHide: '隐藏菜单',\r\n            menuShow: '显示菜单',\r\n            productScore: '产品分',\r\n            productDisplayOn: '上架',\r\n            productDisplayOff: '下架',\r\n            productUpdate: '更新',\r\n            productEdit: '编辑',\r\n            productCopy: '复制'\r\n        },\r\n        form: {\r\n            KeyInformation: '基本信息',\r\n            ProductAttributes: '产品属性',\r\n            productService: '产品服务',\r\n            subject: '128 字符以内',\r\n            category: '点击更换类目',\r\n            keywords: '最多三个关键词，用英文逗号(,)分隔',\r\n            price: '设置价格(区间)',\r\n            payment_methods: '支付方式，例如：T/T，L/C，等',\r\n            min_order_quantity: '选填',\r\n            attributes: '可增可减',\r\n            attributeMissing: '属性缺失',\r\n            attributeDuplicated: '属性重复',\r\n            pleaseSelect: '请选择',\r\n            selectOrInput: '选择或输入',\r\n            pieces: '件'\r\n        },\r\n        steps: {\r\n            first: '属性编辑',\r\n            second: '详情编辑',\r\n            finally: '预览&发布',\r\n            previous: '上一步',\r\n            next: '下一步',\r\n            complete: '完成',\r\n            addProduct: '发布产品',\r\n            uneditable: '当前产品不可编辑',\r\n            productIdError: '产品 id 错误，请返回重试',\r\n            categoryError: '类目有误，请重新选择',\r\n            editPrice: '编辑价格',\r\n            editPeriod: '编辑发货期',\r\n            editAll: '编辑全部',\r\n            editDone: '编辑完成',\r\n            nullNotAllowed: '不能为空',\r\n            MOQError: 'MOQ值须大于前一个值',\r\n            PriceError: '价格值须小于前一个值',\r\n            add: '添加',\r\n            remove: '删除',\r\n            cloud: '图库',\r\n            selectFromCloud: '从云端选择',\r\n            choosePhotos: '选择图片',\r\n            uploadPhotos: '上传图片',\r\n            removePhotos: '双击移除图片',\r\n            productDescriptionTip: '提示: ①若无法更新，请清除所有详情后重试 ②原先是智能编辑的情况下，须点击下方红色按钮解锁图片缩放👇',\r\n            mainPhotoRequired: '需要保留至少一张主图',\r\n            descriptionOverflow: '描述长度不能超过6万字符',\r\n            panel1: '标题，关键词，价格，MOQ...',\r\n            panel2: '各类属性...',\r\n            panel3: '附加信息...',\r\n            addAttributes: '添加属性',\r\n            clearAttributes: '移除空白属性',\r\n            addCustomInfo: '添加自定义信息',\r\n            clearCustomInfo: '清理自定义信息',\r\n            modificationNull: '没有任何修改',\r\n            modificationDone: '将提交如下内容:',\r\n            numberOnly: '请输入数字',\r\n            uploadSuccess: '上传成功',\r\n            addSuccess: '产品添加成功',\r\n            updateSuccess: '产品更新成功',\r\n            duplicateSuccess: '产品复制成功',\r\n            productScoreError: '产品分未查到'\r\n        },\r\n        productScore: {\r\n            basic: '低质品',\r\n            potential: '普通品',\r\n            super: '实力优品',\r\n            top: '精品'\r\n        },\r\n        common: {\r\n            yes: '确定',\r\n            no: '取消',\r\n            success: '操作成功',\r\n            netFail: '请求失败'\r\n        }\r\n    }\r\n};\r\n\r\nexport { Languages };\r\n","import { useNavigate } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Button, Divider, Typography, List, ListItem } from '@mui/material';\r\nimport { Check as CheckIcon, Cancel as CancelIcon } from '@mui/icons-material';\r\n\r\nfunction Confirmation({ langPack, productModified, modificationSubmission }) {\r\n    let navigate = useNavigate(); //react-router-dom\r\n    let modifiedKeys = Object.keys(productModified);\r\n    return (\r\n        <>\r\n            {modifiedKeys.length ? (\r\n                <>\r\n                    <Typography variant=\"h3\">{langPack.steps.modificationDone}</Typography>\r\n                    <List>\r\n                        {modifiedKeys.map((key) => (\r\n                            <ListItem key={key}>--{key}</ListItem>\r\n                        ))}\r\n                    </List>\r\n                </>\r\n            ) : (\r\n                <Typography variant=\"h3\">{langPack.steps.modificationNull}</Typography>\r\n            )}\r\n            <br />\r\n            <Divider />\r\n            <div align=\"right\">\r\n                <Button startIcon={<CheckIcon />} onClick={modificationSubmission}>\r\n                    {langPack.common.yes}\r\n                </Button>\r\n                <Button startIcon={<CancelIcon />} onClick={() => navigate(`/product`)}>\r\n                    {langPack.common.no}\r\n                </Button>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nConfirmation.propTypes = {\r\n    langPack: PropTypes.object,\r\n    productModified: PropTypes.object,\r\n    modificationSubmission: PropTypes.func\r\n};\r\n\r\nexport default Confirmation;\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Button, Box, Stepper, Step, StepLabel, ButtonGroup } from '@mui/material';\r\n\r\nfunction EditStep({ langPack, activeStep, setActiveStep }) {\r\n    const [steps] = useState([langPack.steps.first, langPack.steps.second, langPack.steps.finally]);\r\n    const handleNext = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Stepper activeStep={activeStep}>\r\n                {steps.map((label) => {\r\n                    return (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                    );\r\n                })}\r\n            </Stepper>\r\n            <ButtonGroup\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                disableElevation\r\n                sx={{ display: 'flex', flexDirection: 'row', pt: 2, paddingBottom: '10px' }}\r\n            >\r\n                <Button disabled={activeStep === 0} onClick={handleBack} sx={{ mr: 1 }}>\r\n                    {langPack.steps.previous}\r\n                </Button>\r\n                <Box sx={{ flex: '1 1 auto' }} />\r\n                <Button disabled={activeStep === 2} onClick={handleNext}>\r\n                    {activeStep === steps.length - 1 ? langPack.steps.complete : langPack.steps.next}\r\n                </Button>\r\n            </ButtonGroup>\r\n        </>\r\n    );\r\n}\r\n\r\nEditStep.propTypes = {\r\n    langPack: PropTypes.object,\r\n    activeStep: PropTypes.number,\r\n    setActiveStep: PropTypes.func\r\n};\r\n\r\nexport default EditStep;\r\n","import { useState, useEffect, lazy } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loadable from 'ui-component/Loadable';\r\nconst Photo = Loadable(lazy(() => import('views/photo')));\r\n\r\n// material-ui\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogTitle,\r\n    FormControlLabel,\r\n    ImageList,\r\n    ImageListItem,\r\n    ImageListItemBar,\r\n    Input,\r\n    IconButton,\r\n    Tooltip\r\n} from '@mui/material';\r\nimport { StarBorder as StarBorderIcon, SwitchLeft as SwitchLeftIcon, CloudQueue as CloudQueueIcon } from '@mui/icons-material';\r\n\r\nfunction PhotoGallery({ xmlSchema, onModified, photoCols, rowHeight, xmlGetField, langPack }) {\r\n    let [imageObj, setImageObj] = useState({}); //所有图片\r\n    let [cloudImageArr, setCloudImageArr] = useState([]); //导入的云图片\r\n    let [dialogOpen, setDialogOpen] = useState(false); //选择图片的对话框状态\r\n\r\n    useEffect(() => {\r\n        if (!xmlSchema) return;\r\n        getImageObj();\r\n        return;\r\n    }, [xmlSchema]);\r\n\r\n    function getImageObj() {\r\n        let fieldObj = xmlGetField('scImages');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = fieldObj.values\r\n                .map((obj) => {\r\n                    let key = obj.id;\r\n                    let value = obj.values[0].value.replace(/_.*/, ''); //换高清图\r\n                    return { key, value };\r\n                })\r\n                .sort((a, b) => Number(/\\d/.exec(a.key)[0]) - Number(/\\d/.exec(b.key)[0])); //数据内部处理\r\n        }\r\n        return setImageObj(fieldObj);\r\n    } //获取产品名称\r\n\r\n    function onImageChange(method, valueArr) {\r\n        if (!valueArr.length) return; //校验\r\n        let newObj = { ...imageObj };\r\n        let imageArr = newObj._values || [];\r\n        let newArr = [];\r\n        if (method === 'add') {\r\n            newArr = [...imageArr, ...valueArr];\r\n            if (newArr.length > 6) newArr.length = 6;\r\n        } else if (method === 'remove') {\r\n            if (imageArr.length <= 1) return queryResult(false, langPack.steps.mainPhotoRequired);\r\n            valueArr.forEach((valueObj) => {\r\n                newArr = imageArr.filter((obj) => obj.value !== valueObj.value);\r\n            });\r\n        } else if (method === 'reorder') {\r\n            newArr = valueArr;\r\n        }\r\n        newArr = newArr.map((obj, index) => {\r\n            return {\r\n                ...obj,\r\n                key: `scImages_${index}`,\r\n                value: obj.value.replace('https:', '')\r\n            };\r\n        }); //重新编号\r\n        newArr = newArr.filter((obj) => obj.id); // \"fileId必须填写;\" 否则报错\r\n        if (!newArr.length) setDialogOpen(true);\r\n        newObj._values = newArr;\r\n        let valueTagName = `complex-value`;\r\n        let setter = setImageObj;\r\n        let newField = new DOMParser().parseFromString(newObj.xml.outerHTML, 'text/xml').firstChild; //引入模板\r\n        let valueTemplates = newField.querySelectorAll('fields > field'); //引入填写模板\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        newArr.forEach((obj, index) => {\r\n            valueTemplates[index].innerHTML = `<value fileId=\"${obj.id}\">${obj.value}</value>`;\r\n            valueSaver += valueTemplates[index].outerHTML;\r\n        });\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('scImages', newObj); //通知父组件\r\n    } //产品名称修改\r\n\r\n    //Cloud-Photo组件 相关事件\r\n    let onDialogClose = (submit) => {\r\n        setDialogOpen(false);\r\n        if (submit) {\r\n            let valueArr = cloudImageArr.map((obj) => {\r\n                return { ...obj, key: obj.id, value: obj.url };\r\n            });\r\n            return onImageChange('add', valueArr);\r\n        }\r\n        return setCloudImageArr([]); //清除传入值\r\n    }; //对话框关闭\r\n    let onPhotoSelected = (value) => {\r\n        if (!value) return;\r\n        setCloudImageArr(value);\r\n    }; //选择了图片，则存到当前component里\r\n\r\n    let onPhotoReorder = (index) => {\r\n        let newObj = { ...imageObj };\r\n        let newArr = newObj._values;\r\n        let deletedImage = newArr.splice(index, 1);\r\n        newArr.splice(index - 1, 0, deletedImage[0]);\r\n        return onImageChange('reorder', newArr);\r\n    };\r\n\r\n    return (\r\n        <ImageList cols={photoCols} rowHeight={rowHeight} sx={{ marginTop: '10px', marginBottom: '10px' }} variant=\"quilted\" gap={2}>\r\n            {imageObj._values && imageObj._values.length ? (\r\n                imageObj._values.map((obj, index) => {\r\n                    return (\r\n                        <ImageListItem key={index} cols={1} rows={1}>\r\n                            <img src={`https:` + obj.value} alt={index + 1} loading=\"lazy\" />\r\n                            <ImageListItemBar\r\n                                sx={{\r\n                                    background:\r\n                                        'linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, ' + 'rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)'\r\n                                }}\r\n                                title={index + 1}\r\n                                position=\"top\"\r\n                                actionIcon={\r\n                                    <Tooltip title={langPack.steps.removePhotos}>\r\n                                        <IconButton\r\n                                            sx={{ color: index ? 'yellow' : 'white' }}\r\n                                            aria-label={`star ${index + 1}`}\r\n                                            onDoubleClick={() => onImageChange('remove', [obj])}\r\n                                        >\r\n                                            <StarBorderIcon />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                }\r\n                                actionPosition=\"left\"\r\n                            />\r\n                            {index && obj.id ? (\r\n                                <Button\r\n                                    sx={{ position: 'absolute', right: '0px', top: '5px' }}\r\n                                    size=\"large\"\r\n                                    color=\"warning\"\r\n                                    onClick={() => onPhotoReorder(index)}\r\n                                    startIcon={<SwitchLeftIcon />}\r\n                                />\r\n                            ) : null}\r\n                        </ImageListItem>\r\n                    );\r\n                })\r\n            ) : (\r\n                <></>\r\n            )}\r\n            {!imageObj._values || imageObj._values.length < 6 ? (\r\n                <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\r\n                    <Tooltip title={langPack.steps.selectFromCloud}>\r\n                        <Button sx={{ height: '100%' }} startIcon={<CloudQueueIcon />} onClick={() => setDialogOpen(true)}>\r\n                            {langPack.steps.cloud}\r\n                        </Button>\r\n                    </Tooltip>\r\n                    <Dialog onClose={() => onDialogClose(true)} open={dialogOpen}>\r\n                        <DialogTitle>{langPack.steps.selectFromCloud}</DialogTitle>\r\n                        <Photo onPhotoSelected={onPhotoSelected} />\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={() => onDialogClose(true)}>\r\n                            {langPack.common.yes}\r\n                        </Button>\r\n                        <Button variant=\"contained\" color=\"error\" onClick={() => onDialogClose()}>\r\n                            {langPack.common.no}\r\n                        </Button>\r\n                    </Dialog>\r\n                </div>\r\n            ) : null}\r\n        </ImageList>\r\n    );\r\n}\r\n\r\nPhotoGallery.propTypes = {\r\n    xmlSchema: PropTypes.object,\r\n    photoCols: PropTypes.number,\r\n    cols: PropTypes.number,\r\n    rowHeight: PropTypes.number,\r\n    onModified: PropTypes.func,\r\n    xmlGetField: PropTypes.func,\r\n    langPack: PropTypes.object\r\n};\r\n\r\nexport default PhotoGallery;\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport {\r\n    Typography,\r\n    Autocomplete,\r\n    Button,\r\n    Checkbox,\r\n    InputAdornment,\r\n    MenuItem,\r\n    TextField,\r\n    Divider,\r\n    Tooltip,\r\n    Chip,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow,\r\n    Paper\r\n} from '@mui/material';\r\nimport {\r\n    Add as AddIcon,\r\n    Remove as RemoveIcon,\r\n    Check as CheckIcon,\r\n    Cancel as CancelIcon,\r\n    ModeEdit as EditIcon,\r\n    Clear as ClearIcon,\r\n    DeleteOutline as DeleteIcon\r\n} from '@mui/icons-material';\r\n\r\nlet paymentMethodSaver; //付款方式暂存\r\nlet logisticsSaver; //物流方式暂存\r\nlet priceSaver; //阶梯价暂存\r\nlet periodSaver; //发货期暂存\r\nfunction App({ xmlSchema, langPack, xmlGetField, onModified }) {\r\n    console.log('core running');\r\n    //产品名称\r\n    let [subjectObj, setSubjectObj] = useState({});\r\n    //产品关键词\r\n    let [keywordObj, setKeywordObj] = useState({});\r\n    //付款方式\r\n    let [paymentMethodObj, setPaymentMethodObj] = useState({});\r\n    //计量单位\r\n    let [priceUnitObj, setPriceUnitObj] = useState({});\r\n    //最小起订量\r\n    let [MOQObj, setMOQObj] = useState({});\r\n    //阶梯价\r\n    let [priceObj, setPriceObj] = useState({});\r\n    let [priceEdit, setPriceEdit] = useState(false);\r\n    //发货期\r\n    let [ladderPeriodObj, setLadderPeriodObj] = useState({});\r\n    let [periodEdit, setPeriodEdit] = useState(false);\r\n    //海运港口\r\n    let [portObj, setPortObj] = useState({});\r\n    //物流模式\r\n    let [logisticsModeObj, setLogisticsObj] = useState({});\r\n\r\n    useEffect(() => {\r\n        if (!xmlSchema) return;\r\n        getSubjectObj();\r\n        getKeywordObj();\r\n        getMoqObj();\r\n        getPaymentMethodObj();\r\n        getPriceObj();\r\n        getPriceUnitObj();\r\n        getLadderPeriodObj();\r\n        getPortObj();\r\n        getLogisticsObj();\r\n        return;\r\n    }, [xmlSchema]);\r\n\r\n    function getSubjectObj() {\r\n        let fieldObj = xmlGetField('productTitle');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = { value: fieldObj.values[0].value }; //数据内部处理\r\n        }\r\n        return setSubjectObj(fieldObj);\r\n    } //获取产品名称\r\n    function onSubjectChange(e) {\r\n        let value = e.target.value;\r\n        if (!value || !value.trim()) return queryResult(false, '请输入产品名称'); //校验\r\n        let newObj = { ...subjectObj };\r\n        newObj._values = { value };\r\n        let valueTagName = `value`;\r\n        let setter = setSubjectObj;\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueSaver += value;\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('productTitle', newObj); //通知父组件\r\n    } //产品名称修改\r\n\r\n    function getKeywordObj() {\r\n        let fieldObj = xmlGetField('productKeywords');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = { value: fieldObj.values.map((obj) => obj.values[0].value).join(',') }; //数据内部处理\r\n        }\r\n        return setKeywordObj(fieldObj);\r\n    } //获取产品关键词\r\n    function onKeywordChange(e) {\r\n        let value = e.target.value;\r\n        if (!value || !value.trim()) return queryResult(false, '请输入关键词'); //校验\r\n        let newArr = value.split(',');\r\n        if (newArr.length > 3) {\r\n            newArr.length = 3;\r\n            queryResult(false, langPack.form.keywords);\r\n        }\r\n        value = newArr.join(',');\r\n        let newObj = { ...keywordObj };\r\n        newObj._values = { value };\r\n        let valueTagName = `complex-value`;\r\n        let setter = setKeywordObj;\r\n        let newField = new DOMParser().parseFromString(newObj.xml.outerHTML, 'text/xml').firstChild; //引入模板\r\n        let valueTemplates = newField.querySelectorAll('fields > field'); //引入填写模板\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        newArr.forEach((keyword, index) => {\r\n            valueTemplates[index].innerHTML = `<value>${keyword}</value>`;\r\n            valueSaver += valueTemplates[index].outerHTML;\r\n        });\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('productKeywords', newObj); //通知父组件\r\n    } //关键词修改\r\n\r\n    function getMoqObj() {\r\n        let fieldObj = xmlGetField('minOrderQuantity');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = { value: Number(fieldObj.values[0].value) }; //数据内部处理\r\n        }\r\n        return setMOQObj(fieldObj);\r\n    } //获取最低起订量\r\n    function onMOQChanged(value) {\r\n        if (!value) return queryResult(false, '请输入起订量'); //校验\r\n        let newObj = { ...MOQObj };\r\n        value = Number(value);\r\n        newObj._values = { value };\r\n        let valueTagName = `value`;\r\n        let setter = setMOQObj;\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueSaver += value;\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('minOrderQuantity', newObj); //通知父组件\r\n    } //最低起订量修改\r\n\r\n    function getPaymentMethodObj() {\r\n        let fieldObj = xmlGetField('paymentMethod');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = fieldObj.values[0].values.map((obj) => {\r\n                return { value: obj.value };\r\n            });\r\n        }\r\n        fieldObj._options = fieldObj.options\r\n            ? fieldObj.options[0].options.map((obj) => {\r\n                  return { key: obj.displayName, value: obj.value };\r\n              })\r\n            : []; //数据内部处理\r\n        return setPaymentMethodObj(fieldObj);\r\n    } //获取付款方式\r\n\r\n    function onPaymentMethodChange(newValue) {\r\n        paymentMethodSaver = newValue;\r\n    } //支付方式选择\r\n\r\n    function onPaymentMethodConfirm() {\r\n        if (!paymentMethodSaver) return;\r\n        if (!paymentMethodSaver.length) return queryResult(false, '请选择付款方式');\r\n        let newObj = { ...paymentMethodObj };\r\n        newObj = { ...newObj, _values: paymentMethodSaver };\r\n        let valueTagName = `complex-value`;\r\n        let setter = setPaymentMethodObj;\r\n        let newField = new DOMParser().parseFromString(newObj.xml.outerHTML, 'text/xml').firstChild; //引入模板\r\n        let valueTemplates = newField.querySelectorAll('fields > field'); //引入填写模板\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        let predefinedMethodTemplate = valueTemplates[0]; //id=\"predefined_method\"\r\n        let valueStr = '<values>';\r\n        paymentMethodSaver.forEach((obj) => {\r\n            valueStr += `<value>${obj.value}</value>`;\r\n        });\r\n        valueStr += `</values>`;\r\n        predefinedMethodTemplate.innerHTML = valueStr;\r\n        valueSaver += predefinedMethodTemplate.outerHTML;\r\n        paymentMethodSaver = '';\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('paymentMethod', newObj);\r\n    } //支付方式确认\r\n\r\n    const getPriceUnitObj = () => {\r\n        let fieldObj = xmlGetField('priceUnit');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        fieldObj._options = fieldObj.options\r\n            ? fieldObj.options.map((obj) => {\r\n                  return { key: obj.displayName, value: obj.value };\r\n              })\r\n            : []; //数据内部处理\r\n        if (fieldObj.values) {\r\n            fieldObj._values = { key: '', value: fieldObj.values[0].value };\r\n            fieldObj._values.key = fieldObj._options.find((obj) => obj.value === fieldObj._values.value).key;\r\n        }\r\n        return setPriceUnitObj(fieldObj);\r\n    }; //获取计量单位\r\n\r\n    const onPriceUnitChange = (valueObj) => {\r\n        if (!valueObj) return queryResult(false, '请输入计量单位'); //校验\r\n        let newObj = { ...priceUnitObj };\r\n        newObj._values = valueObj;\r\n        let valueTagName = `value`;\r\n        let setter = setPriceUnitObj;\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueSaver += valueObj.value;\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('priceUnit', newObj); //通知父组件\r\n    };\r\n\r\n    function getPortObj() {\r\n        let fieldObj = xmlGetField('port');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = { value: fieldObj.values[0].value }; //数据内部处理\r\n        }\r\n        return setPortObj(fieldObj);\r\n    } //获取海运港口\r\n    function onPortChange(e) {\r\n        let value = e.target.value;\r\n        if (!value || !value.trim()) return queryResult(false, '请输入海运港口'); //校验\r\n        let newObj = { ...portObj };\r\n        newObj._values = { value };\r\n        let valueTagName = `value`;\r\n        let setter = setPortObj;\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueSaver += value;\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('port', newObj); //通知父组件\r\n    } //海运港口修改\r\n\r\n    function getLogisticsObj() {\r\n        let fieldObj = xmlGetField('logisticsMode');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        fieldObj._options = fieldObj.options\r\n            ? fieldObj.options.map((obj) => {\r\n                  return { key: obj.displayName, value: obj.value };\r\n              })\r\n            : []; //数据内部处理\r\n        if (fieldObj.values) {\r\n            fieldObj._values = fieldObj.values.map((obj) => {\r\n                let { value } = obj;\r\n                let key = fieldObj._options.find((obj) => obj.value === value).key;\r\n                return { key, value };\r\n            });\r\n        }\r\n        return setLogisticsObj(fieldObj);\r\n    } //获取物流模式\r\n\r\n    function onLogisticsChange(newValue) {\r\n        logisticsSaver = newValue;\r\n    } //物流模式选择\r\n\r\n    function onLogisticsConfirm() {\r\n        if (!logisticsSaver) return;\r\n        if (!logisticsSaver.length) return queryResult(false, '请选择物流模式');\r\n        let newObj = { ...logisticsModeObj };\r\n        let valueTagName = `values`;\r\n        let setter = setLogisticsObj;\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: multiCheck\r\n        let valueStr = '';\r\n        logisticsSaver = logisticsSaver.map((key) => {\r\n            let value = newObj._options.find((obj) => obj.key === key).value;\r\n            return { key, value };\r\n        });\r\n        logisticsSaver.forEach((obj) => {\r\n            valueStr += `<value>${obj.value}</value>`;\r\n        });\r\n        valueSaver += valueStr + `</${valueTagName}>`;\r\n        newObj = { ...newObj, _values: logisticsSaver };\r\n        logisticsSaver = '';\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('logisticsMode', newObj);\r\n    } //物流模式确认\r\n\r\n    function getPriceObj() {\r\n        let fieldObj = xmlGetField('ladderPrice');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = fieldObj.values\r\n                .filter((obj) => obj.type === 'complex')\r\n                .map((obj) => {\r\n                    return { quantity: Number(obj.values[0].values[0].value), price: Number(obj.values[1].values[0].value) };\r\n                })\r\n                .sort((a, b) => a.quantity - b.quantity);\r\n        } else {\r\n            fieldObj._values = [{ quantity: 1, price: 0 }];\r\n        }\r\n        return setPriceObj(fieldObj);\r\n    } //获取阶梯价格\r\n\r\n    const onPriceEditMode = () => {\r\n        if (priceEdit) {\r\n            onPriceChange('edit');\r\n            //提交更改\r\n        } else {\r\n            //初始化\r\n            let priceArr = priceObj._values;\r\n            let lastPrice = priceArr[priceArr.length - 1];\r\n            priceSaver = { ...lastPrice };\r\n        }\r\n        setPriceEdit((prev) => !prev);\r\n        return;\r\n    }; //阶梯价格编辑模式\r\n\r\n    const onPriceSave = (key, value) => {\r\n        if (!priceSaver) priceSaver = {};\r\n        priceSaver[key] = Number(value);\r\n        return;\r\n    }; //阶梯价格暂存\r\n\r\n    const onPriceChange = (mode, index) => {\r\n        let newObj = { ...priceObj };\r\n        let priceArr = newObj._values;\r\n        if (mode === 'add') {\r\n            let lastPrice = priceArr[priceArr.length - 1];\r\n            if (!lastPrice.price || priceArr.length >= 4) return; //最多四组价格，且已经完成填写\r\n            priceArr = [...priceArr, { quantity: '', price: '' }]; //添加一组阶梯价格\r\n        } else if (mode === 'edit') {\r\n            if (!priceSaver) return;\r\n            if (!priceSaver.price || !priceSaver.quantity) return queryResult(false, langPack.steps.nullNotAllowed);\r\n            if (priceArr.length !== 1) {\r\n                if (priceSaver.quantity <= priceArr[priceArr.length - 2].quantity) return queryResult(false, langPack.steps.MOQError);\r\n                if (priceSaver.price >= priceArr[priceArr.length - 2].price) return queryResult(false, langPack.steps.PriceError);\r\n            }\r\n            //MOQ、价格与前一个值比对（规定就是这样） & 检查是否非空\r\n            priceArr.pop();\r\n            priceArr = [...priceArr, priceSaver]; //价格写入\r\n            priceSaver = '';\r\n        } else if (mode === 'remove') {\r\n            if (priceArr.length <= 1) return;\r\n            priceArr.splice(index, 1); //移除指定行\r\n        }\r\n        newObj._values = priceArr;\r\n        let setter = setPriceObj;\r\n        if (mode === 'add') return setter(newObj); //更新到JSX; （没有实质性更改，只是模板）\r\n        priceArr = priceArr.filter((obj) => obj.price);\r\n        if (!priceArr.length) return; //没有价格\r\n        let valueTagName = `complex-value`;\r\n        let newField = new DOMParser().parseFromString(newObj.xml.outerHTML, 'text/xml').firstChild; //引入模板\r\n        let valueTemplates = newField.querySelectorAll(`fields > field[type=complex]`); //引入填写模板\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        priceArr.forEach((obj, index) => {\r\n            valueTemplates[index].querySelector('fields > field#quantity').innerHTML = `<value>${obj.quantity}</value>`;\r\n            valueTemplates[index].querySelector('fields > field#price').innerHTML = `<value>${obj.price}</value>`;\r\n            valueSaver += valueTemplates[index].outerHTML;\r\n        });\r\n        valueSaver += `</${valueTagName}>`;\r\n        valueSaver = valueSaver.replace(/fields/g, valueTagName); //替换\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        onMOQChanged(priceArr[0].quantity); //同步到MOQ\r\n        return onModified('ladderPrice', newObj);\r\n    }; //阶梯价格修改 & 确认\r\n\r\n    function getLadderPeriodObj() {\r\n        let fieldObj = xmlGetField('ladderPeriod');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = fieldObj.values\r\n                .filter((obj) => obj.type === 'complex')\r\n                .map((obj) => {\r\n                    return { quantity: Number(obj.values[0].values[0].value), day: Number(obj.values[1].values[0].value) };\r\n                })\r\n                .sort((a, b) => a.quantity - b.quantity);\r\n        } else {\r\n            fieldObj._values = [{ quantity: 1, price: 0 }];\r\n        }\r\n        return setLadderPeriodObj(fieldObj);\r\n    } //获取发货期\r\n\r\n    const onPeriodEditMode = () => {\r\n        if (periodEdit) {\r\n            onPeriodChange('edit');\r\n            //提交更改\r\n        } else {\r\n            //初始化\r\n            let newArr = ladderPeriodObj._values;\r\n            let lastObj = newArr[newArr.length - 1];\r\n            periodSaver = { ...lastObj };\r\n        }\r\n        setPeriodEdit((prev) => !prev);\r\n        return;\r\n    }; //发货期编辑模式\r\n\r\n    const onPeriodSave = (key, value) => {\r\n        if (!periodSaver) periodSaver = {};\r\n        periodSaver[key] = Number(value);\r\n        return;\r\n    }; //发货期暂存\r\n\r\n    const onPeriodChange = (mode, index) => {\r\n        let newObj = { ...ladderPeriodObj };\r\n        let newArr = newObj._values;\r\n        if (mode === 'add') {\r\n            let lastObj = newArr[newArr.length - 1];\r\n            if (!lastObj.day || newArr.length >= 3) return; //最多四组价格，且已经完成填写\r\n            newArr = [...newArr, { quantity: '', day: '' }]; //添加一组发货期\r\n        } else if (mode === 'edit') {\r\n            if (!periodSaver) return;\r\n            if (!periodSaver.day || !periodSaver.quantity) return queryResult(false, langPack.steps.nullNotAllowed);\r\n            newArr.pop();\r\n            newArr = [...newArr, periodSaver]; //价格写入\r\n            periodSaver = '';\r\n        } else if (mode === 'remove') {\r\n            if (newArr.length <= 1) return;\r\n            newArr.splice(index, 1); //移除指定行\r\n        }\r\n        newObj._values = newArr;\r\n        let setter = setLadderPeriodObj;\r\n        if (mode === 'add') return setter(newObj); //更新到JSX; （没有实质性更改，只是模板）\r\n        newArr = newArr.filter((obj) => obj.day);\r\n        if (!newArr.length) return; //没有填写发货期\r\n        let valueTagName = `complex-value`;\r\n        let newField = new DOMParser().parseFromString(newObj.xml.outerHTML, 'text/xml').firstChild; //引入模板\r\n        let valueTemplates = newField.querySelectorAll(`fields > field[type=complex]`); //引入填写模板\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        newArr.forEach((obj, index) => {\r\n            valueTemplates[index].querySelector('fields > field#quantity').innerHTML = `<value>${obj.quantity}</value>`;\r\n            valueTemplates[index].querySelector('fields > field#day').innerHTML = `<value>${obj.day}</value>`;\r\n            valueSaver += valueTemplates[index].outerHTML;\r\n        });\r\n        valueSaver += `</${valueTagName}>`;\r\n        valueSaver = valueSaver.replace(/fields/g, valueTagName); //替换\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('ladderPeriod', newObj);\r\n    }; //发货期修改 & 确认\r\n\r\n    return (\r\n        <>\r\n            <Tooltip title={langPack.form.subject}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    fullWidth\r\n                    key={subjectObj._values}\r\n                    id=\"productTitle\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{subjectObj.name}</Typography>}\r\n                    defaultValue={subjectObj._values ? subjectObj._values.value : ''}\r\n                    onBlur={onSubjectChange}\r\n                />\r\n            </Tooltip>\r\n            <Tooltip title={langPack.form.keywords}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    fullWidth\r\n                    key={keywordObj._values}\r\n                    id=\"keywords\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{keywordObj.name}</Typography>}\r\n                    defaultValue={keywordObj._values ? keywordObj._values.value : ''}\r\n                    onBlur={onKeywordChange}\r\n                />\r\n            </Tooltip>\r\n            <Autocomplete\r\n                id=\"add-payment-method\"\r\n                key={paymentMethodObj._values}\r\n                sx={{ display: 'inline' }}\r\n                multiple\r\n                limitTags={1}\r\n                disableCloseOnSelect={true}\r\n                onBlur={onPaymentMethodConfirm}\r\n                onChange={(e, value) => onPaymentMethodChange(value)}\r\n                defaultValue={paymentMethodObj._values}\r\n                options={paymentMethodObj._options || []}\r\n                getOptionLabel={(option) => option.key}\r\n                isOptionEqualToValue={(option, value) => option.value === value.value}\r\n                renderTags={(options, getTagProps) =>\r\n                    options.map((option, index) => <Chip variant=\"outlined\" label={option.value} {...getTagProps({ index })} />)\r\n                }\r\n                renderOption={(props, option, { selected }) => (\r\n                    <li {...props}>\r\n                        <Checkbox style={{ marginRight: 8 }} checked={selected} />\r\n                        {option.value}\r\n                    </li>\r\n                )}\r\n                renderInput={(params) => (\r\n                    <TextField\r\n                        {...params}\r\n                        fullWidth={false}\r\n                        sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                        label={<Typography variant=\"h3\">{paymentMethodObj.name}</Typography>}\r\n                        placeholder={langPack.form.selectOrInput}\r\n                    />\r\n                )}\r\n            />\r\n            <Autocomplete\r\n                id=\"add-price-unit\"\r\n                key={priceUnitObj._values ? priceUnitObj._values.value : ''}\r\n                sx={{ display: 'inline' }}\r\n                onChange={(e, value) => onPriceUnitChange(value)}\r\n                defaultValue={priceUnitObj._values}\r\n                options={priceUnitObj._options || []}\r\n                getOptionLabel={(option) => option.key}\r\n                isOptionEqualToValue={(option, value) => option.value === value.value}\r\n                renderOption={(props, option, { selected }) => (\r\n                    <li {...props}>\r\n                        <Checkbox style={{ marginRight: 8 }} checked={selected} />\r\n                        {option.key}\r\n                    </li>\r\n                )}\r\n                renderInput={(params) => (\r\n                    <TextField\r\n                        {...params}\r\n                        fullWidth={false}\r\n                        sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                        label={<Typography variant=\"h3\">{priceUnitObj.name}</Typography>}\r\n                        placeholder={langPack.form.selectOrInput}\r\n                    />\r\n                )}\r\n            />\r\n            <Tooltip title={langPack.form.min_order_quantity}>\r\n                <TextField\r\n                    disabled\r\n                    type=\"number\"\r\n                    sx={{ maxWidth: '280px' }}\r\n                    margin=\"normal\"\r\n                    key={priceObj._values}\r\n                    id=\"min_order_quantity\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{MOQObj.name}</Typography>}\r\n                    value={priceObj._values ? priceObj._values[0].quantity : MOQObj._values ? MOQObj._values.value : ''}\r\n                    InputProps={{\r\n                        endAdornment: (\r\n                            <InputAdornment position=\"end\">\r\n                                {priceUnitObj._values ? priceUnitObj._values.key : langPack.form.pieces}\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                    onBlur={(e) => onMOQChanged(e.target.value)}\r\n                />\r\n            </Tooltip>\r\n            <br />\r\n            <Tooltip title={langPack.form.subject}>\r\n                <TextField\r\n                    margin=\"normal\"\r\n                    key={portObj._values}\r\n                    id=\"port\"\r\n                    variant=\"outlined\"\r\n                    label={<Typography variant=\"h3\">{portObj.name}</Typography>}\r\n                    defaultValue={portObj._values ? portObj._values.value : ''}\r\n                    onBlur={onPortChange}\r\n                />\r\n            </Tooltip>\r\n            <Autocomplete\r\n                id=\"change-logistics-mode\"\r\n                key={JSON.stringify(logisticsModeObj._values)}\r\n                multiple\r\n                disableCloseOnSelect={true}\r\n                sx={{ display: 'inline' }}\r\n                onBlur={onLogisticsConfirm}\r\n                onChange={(e, value) => onLogisticsChange(value)}\r\n                defaultValue={logisticsModeObj._values ? logisticsModeObj._values.map((obj) => obj.key) : []}\r\n                options={logisticsModeObj._options ? logisticsModeObj._options.map((obj) => obj.key) : []}\r\n                renderTags={(options, getTagProps) =>\r\n                    options.map((option, index) => <Chip variant=\"outlined\" label={option} {...getTagProps({ index })} />)\r\n                }\r\n                renderOption={(props, option, { selected }) => (\r\n                    <li {...props}>\r\n                        <Checkbox style={{ marginRight: 8 }} checked={selected} />\r\n                        {option}\r\n                    </li>\r\n                )}\r\n                renderInput={(params) => (\r\n                    <TextField\r\n                        {...params}\r\n                        fullWidth={false}\r\n                        sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                        label={<Typography variant=\"h3\">{logisticsModeObj.name}</Typography>}\r\n                        placeholder={langPack.form.selectOrInput}\r\n                    />\r\n                )}\r\n            />\r\n            <hr />\r\n            <Table size=\"small\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>{langPack.table.min_order_quantity}</TableCell>\r\n                        <TableCell>{langPack.table.price}</TableCell>\r\n                        <TableCell>\r\n                            <Button startIcon={priceEdit ? <CheckIcon /> : <EditIcon />} onClick={onPriceEditMode}>\r\n                                {priceEdit ? langPack.steps.editDone : langPack.steps.editPrice}\r\n                            </Button>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {priceObj && priceObj._values ? (\r\n                        priceObj._values.map((obj, index) => (\r\n                            <TableRow key={index} sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n                                <TableCell>\r\n                                    <div\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            flexDirection: 'row',\r\n                                            alignItems: 'center'\r\n                                        }}\r\n                                    >\r\n                                        <Typography sx={{ display: 'inline' }}>≤</Typography>\r\n                                        {priceEdit && index === priceObj._values.length - 1 ? (\r\n                                            <TextField\r\n                                                size=\"small\"\r\n                                                variant=\"outlined\"\r\n                                                type=\"number\"\r\n                                                defaultValue={obj.quantity}\r\n                                                onBlur={(e) => onPriceSave('quantity', e.target.value)}\r\n                                            />\r\n                                        ) : (\r\n                                            obj.quantity\r\n                                        )}\r\n                                        <Typography sx={{ display: 'inline' }}>\r\n                                            {`&nbsp;`.encodeHTMLEntity()} {priceUnitObj._values ? priceUnitObj._values.key : ''}\r\n                                        </Typography>\r\n                                    </div>\r\n                                </TableCell>\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    {priceEdit && index === priceObj._values.length - 1 ? (\r\n                                        <TextField\r\n                                            size=\"small\"\r\n                                            variant=\"outlined\"\r\n                                            type=\"number\"\r\n                                            defaultValue={obj.price}\r\n                                            onBlur={(e) => onPriceSave('price', e.target.value)}\r\n                                        />\r\n                                    ) : (\r\n                                        obj.price\r\n                                    )}\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    {index === 0 ? (\r\n                                        <Button startIcon={<AddIcon />} onClick={() => onPriceChange('add', index)}>\r\n                                            {langPack.steps.add}\r\n                                        </Button>\r\n                                    ) : (\r\n                                        <Button startIcon={<RemoveIcon />} onClick={() => onPriceChange('remove', index)}>\r\n                                            {langPack.steps.remove}\r\n                                        </Button>\r\n                                    )}\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))\r\n                    ) : (\r\n                        <></>\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n            <hr />\r\n            <Table size=\"small\">\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>{langPack.table.min_order_quantity}</TableCell>\r\n                        <TableCell>{langPack.table.day}</TableCell>\r\n                        <TableCell>\r\n                            <Button startIcon={periodEdit ? <CheckIcon /> : <EditIcon />} onClick={onPeriodEditMode}>\r\n                                {periodEdit ? langPack.steps.editDone : langPack.steps.editPeriod}\r\n                            </Button>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {ladderPeriodObj && ladderPeriodObj._values ? (\r\n                        ladderPeriodObj._values.map((obj, index) => (\r\n                            <TableRow key={index} sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n                                <TableCell>\r\n                                    <div\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            flexDirection: 'row',\r\n                                            alignItems: 'center'\r\n                                        }}\r\n                                    >\r\n                                        <Typography sx={{ display: 'inline' }}>≤</Typography>\r\n                                        {periodEdit && index === ladderPeriodObj._values.length - 1 ? (\r\n                                            <TextField\r\n                                                size=\"small\"\r\n                                                variant=\"outlined\"\r\n                                                type=\"number\"\r\n                                                defaultValue={obj.quantity}\r\n                                                onBlur={(e) => onPeriodSave('quantity', e.target.value)}\r\n                                            />\r\n                                        ) : (\r\n                                            obj.quantity\r\n                                        )}\r\n                                        <Typography sx={{ display: 'inline' }}>\r\n                                            {`&nbsp;`.encodeHTMLEntity()} {priceUnitObj._values ? priceUnitObj._values.key : ''}\r\n                                        </Typography>\r\n                                    </div>\r\n                                </TableCell>\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    {periodEdit && index === ladderPeriodObj._values.length - 1 ? (\r\n                                        <TextField\r\n                                            size=\"small\"\r\n                                            variant=\"outlined\"\r\n                                            type=\"number\"\r\n                                            defaultValue={obj.day}\r\n                                            onBlur={(e) => onPeriodSave('day', e.target.value)}\r\n                                        />\r\n                                    ) : (\r\n                                        obj.day\r\n                                    )}\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    {index === 0 ? (\r\n                                        <Button startIcon={<AddIcon />} onClick={() => onPeriodChange('add', index)}>\r\n                                            {langPack.steps.add}\r\n                                        </Button>\r\n                                    ) : (\r\n                                        <Button startIcon={<RemoveIcon />} onClick={() => onPeriodChange('remove', index)}>\r\n                                            {langPack.steps.remove}\r\n                                        </Button>\r\n                                    )}\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))\r\n                    ) : (\r\n                        <></>\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n        </>\r\n    );\r\n}\r\n\r\nApp.propTypes = {\r\n    xmlSchema: PropTypes.object,\r\n    langPack: PropTypes.object,\r\n    subject: PropTypes.string,\r\n    keywords: PropTypes.object,\r\n    xmlGetField: PropTypes.func,\r\n    onModified: PropTypes.func\r\n};\r\n\r\nexport default App;\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Typography, Autocomplete, Checkbox, Chip, Button, MenuItem, TextField, Divider, Tooltip } from '@mui/material';\r\nimport { Add as AddIcon, Check as CheckIcon, Cancel as CancelIcon, DeleteOutline as DeleteIcon } from '@mui/icons-material';\r\n\r\nlet attributeSaver;\r\nlet shadowObj = {};\r\nfunction App({ langPack, xmlSchema, xmlGetField, onModified }) {\r\n    console.log('attributes running');\r\n    //商品属性\r\n    let [attributeObj, setAttributeObj] = useState({}); //使用中的属性\r\n    let [addAttribute, setAddAttribute] = useState(false); //需要添加？\r\n    let [optionSelected, setOptionSelected] = useState(''); //当前选中项\r\n\r\n    useEffect(() => {\r\n        if (!xmlSchema) return;\r\n        if (shadowObj.attributeObj) setAttributeObj(shadowObj.attributeObj);\r\n        else getAttributeObj();\r\n        return;\r\n    }, [xmlSchema]);\r\n\r\n    let checkValues = (arr) => {\r\n        if (!arr || !arr.length) return arr;\r\n        let newArr = [];\r\n        arr.forEach((obj) => {\r\n            let newObj = { ...obj };\r\n            let { type, displayName, inputValue, value, values } = newObj;\r\n            if (value !== undefined) {\r\n                let valueObj = {};\r\n                if (displayName !== undefined) valueObj.key = displayName;\r\n                if (inputValue !== undefined) valueObj.key = inputValue;\r\n                if (value !== undefined) valueObj.value = value;\r\n                if (Object.keys(valueObj).length) newObj = { ...newObj, ...valueObj };\r\n            } else if (['input', 'singleCheck'].find((str) => str === type)) {\r\n                let valueObj = {};\r\n                if (values[0].inputValue !== undefined) valueObj.key = values[0].inputValue;\r\n                if (values[0].value !== undefined) valueObj.value = values[0].value;\r\n                if (Object.keys(valueObj).length) newObj._values = valueObj;\r\n            } else {\r\n                let newValues = checkValues(values);\r\n                if (newValues) newObj._values = newValues;\r\n            }\r\n            newArr.push(newObj);\r\n        });\r\n        return newArr;\r\n    };\r\n    let checkOptions = (arr) => {\r\n        if (!arr || !arr.length) return arr;\r\n        let newArr = [];\r\n        arr.forEach((obj) => {\r\n            let newObj = { ...obj };\r\n            let { type, options, displayName, inputValue, value } = newObj;\r\n            if (value !== undefined) {\r\n                let optionObj = {};\r\n                if (displayName !== undefined) optionObj.key = displayName;\r\n                if (inputValue !== undefined) optionObj.key = inputValue;\r\n                if (value !== undefined) optionObj.value = value;\r\n                if (Object.keys(optionObj).length) newObj = { ...newObj, ...optionObj };\r\n            } else if (/input/gi.test(type)) {\r\n                newObj._options = false;\r\n            } else {\r\n                let newOptions = checkOptions(options);\r\n                if (newOptions) {\r\n                    newObj._options = newOptions;\r\n                } else {\r\n                    let optionObj = {};\r\n                    if (options && options[0].displayName !== undefined) optionObj.key = options[0].displayName;\r\n                    //if (options && options[0].inputValue !== undefined) optionObj.key = options[0].inputValue;\r\n                    if (options && options[0].value !== undefined) optionObj.value = options[0].value;\r\n                    if (Object.keys(optionObj).length) newObj._options = [optionObj];\r\n                }\r\n            }\r\n            newArr.push(newObj);\r\n        });\r\n        return newArr;\r\n    };\r\n\r\n    function getAttributeObj() {\r\n        let fieldObj = xmlGetField('icbuCatProp');\r\n        if (!fieldObj || fieldObj._values || fieldObj._options) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = fieldObj.values.filter((obj) => obj.name).sort((a, b) => a.type.length - b.type.length);\r\n            fieldObj._values = checkValues(fieldObj._values);\r\n        }\r\n        if (fieldObj.options) {\r\n            fieldObj._options = fieldObj.options.filter((obj) => obj.name).sort((a, b) => a.type.length - b.type.length);\r\n            fieldObj._options = checkOptions(fieldObj._options);\r\n        }\r\n        console.log(fieldObj);\r\n        setAttributeObj(fieldObj);\r\n    } //在用的属性\r\n\r\n    function saveAttribute(newObj, cleaner) {\r\n        let valueArr = newObj._values;\r\n        let invalidList = []; //无效列表\r\n        let setter = setAttributeObj;\r\n        let valueTagName = `complex-value`;\r\n        let newField = new DOMParser().parseFromString(newObj.xml.outerHTML, 'text/xml').firstChild; //引入模板\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueArr.forEach((obj, index) => {\r\n            let { type, id, _values } = obj;\r\n            let valueTemplates = newField.querySelector(`fields > field#${id}`); //引入填写模板\r\n            if (valueTemplates) {\r\n                valueTemplates.innerHTML = ''; //清空模板\r\n                if (/multi(?!Complex)/.test(type)) {\r\n                    let valueStr = '';\r\n                    _values.forEach((subObj) => {\r\n                        let { key, value } = subObj;\r\n                        valueStr += `<value inputValue=\"${key}\">${value}</value>`;\r\n                    });\r\n                    let elementValues = document.createElement('values');\r\n                    elementValues.innerHTML = valueStr;\r\n                    if (valueStr) {\r\n                        valueTemplates.innerHTML = elementValues.outerHTML;\r\n                        valueSaver += valueTemplates.outerHTML;\r\n                    } else {\r\n                        invalidList.push(index);\r\n                    }\r\n                } else {\r\n                    let { key, value } = _values;\r\n                    let elementValue = document.createElement('value');\r\n                    elementValue.setAttribute('inputValue', key);\r\n                    elementValue.innerText = value;\r\n                    const checkContent = (str) => str !== undefined && String(str).trim() !== '' && str !== null; //检查内容是否为空\r\n                    if (checkContent(key)) {\r\n                        valueTemplates.innerHTML = elementValue.outerHTML;\r\n                        valueSaver += valueTemplates.outerHTML;\r\n                    } else {\r\n                        invalidList.push(index);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (invalidList.length && cleaner) newObj._values = valueArr.filter((obj, index) => !invalidList.find((i) => i === index));\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        shadowObj.attributeObj = newObj;\r\n        return onModified('icbuCatProp', newObj); //通知父组件\r\n    }\r\n\r\n    const onAttributeConfirm = () => {\r\n        console.log('confirming');\r\n        if (!attributeSaver) return console.log('未修改任何属性呢');\r\n        let [mainAttributeObj, value] = attributeSaver;\r\n        // need to find the main attribute option first (by id),\r\n        //and then map the data with options(if any),\r\n        //  and then update to the main attribute\r\n        let { id, type, _values } = mainAttributeObj; //multicheck, singlecheck, input\r\n        let newObj = { ...attributeObj }; //make a copy\r\n        let valueArr = newObj._values;\r\n        let myOptions = attributeObj._options.find((option) => option.id === id); //找到当前属性下的选项\r\n        if (/multi(?!Complex)/.test(type)) {\r\n            _values = [];\r\n            value.forEach((str) => {\r\n                if (myOptions._options) {\r\n                    let subOptionObj = myOptions._options.find((subOption) => subOption.key === str); //options are mapped with names\r\n                    if (subOptionObj) _values.push(subOptionObj);\r\n                    //find the mapping, and save the data\r\n                    else _values.push({ key: '', value: str }); //worst situation ( no matches found)\r\n                } else {\r\n                    _values.push({ key: '', value: str }); //worst situation ( no matches found)\r\n                }\r\n            }); //然后再映射属性选项\r\n        } else {\r\n            if (myOptions._options) {\r\n                let subOptionObj = myOptions._options.find((subOption) => subOption.key === value); //options are mapped with names\r\n                if (subOptionObj) _values = subOptionObj;\r\n                //find the mapping, and save the data\r\n                else _values = { key: value, value: '' }; //worst situation ( no matches found)\r\n            } else {\r\n                _values.key = value; //worst situation ( no matches found)\r\n            } //然后再映射属性选项\r\n        }\r\n        mainAttributeObj._values = _values;\r\n        valueArr = valueArr.filter((obj) => obj.id !== id); //过滤旧属性\r\n        valueArr.push(mainAttributeObj);\r\n        newObj._values = valueArr;\r\n        saveAttribute(newObj);\r\n        return;\r\n    };\r\n\r\n    const onAttributeChange = (mainAttributeObj, value) => {\r\n        attributeSaver = [mainAttributeObj, value];\r\n        return;\r\n    };\r\n\r\n    const onOptionChange = (values) => {\r\n        setOptionSelected(values);\r\n        return;\r\n    };\r\n\r\n    const onOptionConfirm = () => {\r\n        if (!optionSelected) return;\r\n        let optionArr = optionSelected.map((value) => attributeObj._options.find((obj) => obj.name === value));\r\n        let newObj = { ...attributeObj };\r\n        let newValueArr = newObj._values || [];\r\n        optionArr.forEach((optionObj) => {\r\n            if (!newValueArr.length || !newValueArr.find((valueObj) => valueObj.id === optionObj.id)) {\r\n                let { id, name, type } = optionObj;\r\n                let newValue = { id, name, type };\r\n                newValue._values = /multi(?!Complex)/.test(type) ? [] : {};\r\n                newValueArr.push(newValue);\r\n            } //避免属性重复\r\n        });\r\n        newObj._values = newValueArr;\r\n        setAttributeObj(newObj);\r\n        setOptionSelected('');\r\n        setAddAttribute((prev) => !prev);\r\n        return;\r\n    };\r\n\r\n    const onAttributeClear = () => {\r\n        console.log('clearing');\r\n        let newObj = { ...attributeObj };\r\n        return saveAttribute(newObj, true);\r\n    }; //清理空属性\r\n\r\n    return (\r\n        <>\r\n            <div style={{ paddingTop: '10px', paddingBottom: '20px' }}>\r\n                {addAttribute ? (\r\n                    <>\r\n                        {attributeObj._options && attributeObj._options.length ? (\r\n                            <span style={{ display: 'flex', flexDirection: 'row', alignItems: 'stretch' }}>\r\n                                <Autocomplete\r\n                                    id=\"attribute-options\"\r\n                                    key={attributeObj._options ? attributeObj._options : 'attribute-options'}\r\n                                    sx={{ display: 'inline' }}\r\n                                    multiple\r\n                                    disableCloseOnSelect={true}\r\n                                    onChange={(e, value) => onOptionChange(value)}\r\n                                    options={attributeObj._options.map((obj) => obj.name)}\r\n                                    renderOption={(props, option, { selected }) => (\r\n                                        <li {...props}>\r\n                                            <Checkbox style={{ marginRight: 8 }} checked={selected} />\r\n                                            {option}\r\n                                        </li>\r\n                                    )}\r\n                                    renderInput={(params) => (\r\n                                        <TextField\r\n                                            {...params}\r\n                                            fullWidth={false}\r\n                                            sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                                            label={<Typography variant=\"h3\">{attributeObj.name}</Typography>}\r\n                                            placeholder={langPack.form.selectOrInput}\r\n                                        />\r\n                                    )}\r\n                                />\r\n                                <Button startIcon={<CheckIcon />} onClick={onOptionConfirm}>\r\n                                    {langPack.common.yes}\r\n                                </Button>\r\n                                <Button startIcon={<CancelIcon />} onClick={() => setAddAttribute((prev) => !prev)}>\r\n                                    {langPack.common.no}\r\n                                </Button>\r\n                            </span>\r\n                        ) : (\r\n                            <Typography variant=\"body1\">{langPack.form.attributeMissing}</Typography>\r\n                        )}\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <Tooltip title={langPack.steps.addAttributes}>\r\n                            <Button startIcon={<AddIcon />} onClick={() => setAddAttribute((prev) => !prev)}>\r\n                                {langPack.steps.addAttributes}\r\n                            </Button>\r\n                        </Tooltip>\r\n                        <Tooltip title={langPack.steps.clearAttributes}>\r\n                            <Button startIcon={<DeleteIcon />} onClick={onAttributeClear}>\r\n                                {langPack.steps.clearAttributes}\r\n                            </Button>\r\n                        </Tooltip>\r\n                    </>\r\n                )}\r\n            </div>\r\n            <Divider />\r\n            <br />\r\n            {attributeObj._values && attributeObj._values.length ? (\r\n                attributeObj._values.map((obj) => {\r\n                    return !/input/gi.test(obj.type) ? (\r\n                        /multi(?!Complex)/.test(obj.type) ? ( //multiComplex的值需要发起额外的API请求才能获取\r\n                            <Autocomplete\r\n                                id=\"current-attributes-multiple\"\r\n                                key={obj.id + JSON.stringify(obj._values)}\r\n                                sx={{ display: 'inline' }}\r\n                                limitTags={1}\r\n                                multiple\r\n                                disableCloseOnSelect={true}\r\n                                onBlur={onAttributeConfirm}\r\n                                onChange={(e, value) => onAttributeChange(obj, value)}\r\n                                options={attributeObj._options.find((option) => option.id === obj.id)._options.map((obj) => obj.key)}\r\n                                defaultValue={obj._values.map((obj) => obj.key)}\r\n                                renderTags={(options, getTagProps) =>\r\n                                    options.map((option, index) => <Chip variant=\"outlined\" label={option} {...getTagProps({ index })} />)\r\n                                }\r\n                                renderOption={(props, option, { selected }) => (\r\n                                    <li {...props}>\r\n                                        <Checkbox style={{ marginRight: 8 }} checked={selected} />\r\n                                        {option}\r\n                                    </li>\r\n                                )}\r\n                                renderInput={(params) => (\r\n                                    <TextField\r\n                                        {...params}\r\n                                        fullWidth={false}\r\n                                        sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                                        label={<Typography variant=\"h3\">{obj.name + ' _ ' + obj.type}</Typography>}\r\n                                        placeholder={langPack.form.selectOrInput}\r\n                                    />\r\n                                )}\r\n                            />\r\n                        ) : (\r\n                            <Autocomplete\r\n                                id=\"current-attributes-single\"\r\n                                key={obj.id + JSON.stringify(obj._values)}\r\n                                sx={{ display: 'inline' }}\r\n                                onBlur={onAttributeConfirm}\r\n                                onChange={(e, value) => onAttributeChange(obj, value)}\r\n                                defaultValue={obj._values.key}\r\n                                options={attributeObj._options.find((option) => option.id === obj.id)._options.map((obj) => obj.key)}\r\n                                renderInput={(params) => (\r\n                                    <TextField\r\n                                        {...params}\r\n                                        fullWidth={false}\r\n                                        sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                                        label={<Typography variant=\"h3\">{obj.name + ' _ ' + obj.type}</Typography>}\r\n                                        placeholder={langPack.form.selectOrInput}\r\n                                    />\r\n                                )}\r\n                            />\r\n                        )\r\n                    ) : (\r\n                        <TextField\r\n                            key={obj.id + JSON.stringify(obj._values)}\r\n                            id=\"current-attributes-input-only\"\r\n                            fullWidth={false}\r\n                            defaultValue={obj._values.key || ''}\r\n                            onBlur={onAttributeConfirm}\r\n                            onChange={(e) => onAttributeChange(obj, e.target.value)}\r\n                            sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                            label={<Typography variant=\"h3\">{obj.name + ' _ ' + obj.type}</Typography>}\r\n                            placeholder={langPack.form.selectOrInput}\r\n                        />\r\n                    );\r\n                })\r\n            ) : (\r\n                <></>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nApp.propTypes = {\r\n    langPack: PropTypes.object,\r\n    xmlSchema: PropTypes.object,\r\n    xmlGetField: PropTypes.func,\r\n    onModified: PropTypes.func\r\n};\r\n\r\nexport default App;\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Typography, Autocomplete, Button, Checkbox, InputAdornment, MenuItem, TextField, Divider, Tooltip, Chip } from '@mui/material';\r\nimport { Add as AddIcon, Check as CheckIcon, Cancel as CancelIcon, DeleteOutline as DeleteIcon } from '@mui/icons-material';\r\n\r\nfunction App({ langPack, onModified, xmlSchema, xmlGetField }) {\r\n    console.log('service running');\r\n    let customSaver = '';\r\n    let [customObj, setCustomObj] = useState({}); //定制信息\r\n    let [addCustom, setAddCustom] = useState(false); //是否添加\r\n    let [customSelected, setCustomSelected] = useState(''); //当前选中项\r\n    let [customStatusObj, setCustomStatusObj] = useState({}); //定制状态\r\n\r\n    useEffect(() => {\r\n        if (!xmlSchema) return;\r\n        getCustomObj();\r\n        getCustomStatusObj();\r\n        return;\r\n    }, [xmlSchema]);\r\n\r\n    function getCustomStatusObj() {\r\n        let fieldObj = xmlGetField('productLightCustom');\r\n        console.log(fieldObj);\r\n        if (!fieldObj) return;\r\n        fieldObj._options = fieldObj.options\r\n            ? fieldObj.options.map((obj) => {\r\n                  return { key: obj.displayName, value: obj.value };\r\n              })\r\n            : []; //数据内部处理\r\n        if (fieldObj.values) {\r\n            fieldObj._values = { value: fieldObj.values[0].value }; //数据内部处理\r\n            fieldObj._values.key = fieldObj._options.find((obj) => obj.value === fieldObj._values.value).key;\r\n        } else {\r\n            fieldObj._values = {};\r\n        }\r\n        return setCustomStatusObj(fieldObj);\r\n    } //获取产品名称\r\n    function onCustomStatusChange(value) {\r\n        if (!value || !value.trim()) return queryResult(false, '请输入定制类型'); //校验\r\n        let newObj = { ...customStatusObj };\r\n        if (newObj._values.value == value) return; //未修改\r\n        newObj._values.value ? (newObj._values.value = value) : (newObj._values = { value });\r\n        let valueTagName = `value`;\r\n        let setter = setCustomStatusObj;\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueSaver += value;\r\n        valueSaver += `</${valueTagName}>`;\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        return onModified('productLightCustom', newObj); //通知父组件\r\n    } //定制服务支持状态修改\r\n\r\n    function getCustomObj() {\r\n        let fieldObj = xmlGetField('customizedServices');\r\n        if (!fieldObj) return;\r\n        if (fieldObj.values) {\r\n            fieldObj._values = fieldObj.values\r\n                .filter((obj) => obj.type === 'complex')\r\n                .map((obj) => {\r\n                    return { key: obj.values[1].values[0].value, value: Number(obj.values[0].values[0].value) };\r\n                });\r\n        }\r\n        let optionArr = fieldObj.options.filter((obj) => obj.type === 'complex');\r\n        if (optionArr.length) {\r\n            fieldObj._options = optionArr[0].options[1].options\r\n                .filter((obj) => obj.value !== '-1') //排除 displayName: \"other\" 不太用;\r\n                .map((obj) => {\r\n                    return { ...obj, key: obj.displayName, value: obj.value };\r\n                });\r\n        } //数据内部处理\r\n        console.log(fieldObj);\r\n        return setCustomObj(fieldObj);\r\n    } //获取定制内容\r\n\r\n    const onCustomOptionChange = (value) => {\r\n        setCustomSelected(value);\r\n        return;\r\n    }; //选择选项\r\n\r\n    const onCustomOptionConfirm = () => {\r\n        if (!customSelected || !customSelected.trim()) return;\r\n        let newObj = { ...customObj };\r\n        let optionFound = newObj._options.find((obj) => obj.key === customSelected);\r\n        let key = optionFound ? optionFound.value : customSelected;\r\n        if (!newObj._values) newObj._values = []; //初始化\r\n        let valueArr = newObj._values.filter((obj) => obj.key !== key);\r\n        if (valueArr.length >= 5) return queryResult(false, '最多只能添加5个定制内容');\r\n        valueArr.push({ key, value: 0 });\r\n        newObj._values = valueArr;\r\n        setCustomObj(newObj);\r\n        console.log(newObj);\r\n        setCustomSelected('');\r\n        setAddCustom((prev) => !prev);\r\n        return;\r\n    }; //确认选项\r\n\r\n    const onCustomChange = (obj) => {\r\n        if (!customSaver) customSaver = {};\r\n        let finalValue = Number(obj.value);\r\n        if (isNaN(finalValue)) {\r\n            queryResult(false, '请输入数字');\r\n            return;\r\n        }\r\n        customSaver = { key: obj.key, value: finalValue };\r\n        return;\r\n    }; //定制项变化\r\n\r\n    const onCustomConfirm = () => {\r\n        if (!customSaver) return;\r\n        let newObj = { ...customObj };\r\n        let valueArr = newObj._values.filter((obj) => obj.key !== customSaver.key);\r\n        valueArr = valueArr.filter((obj) => obj.value);\r\n        valueArr = valueArr.filter((obj) => !isNaN(obj.value));\r\n        valueArr.push(customSaver);\r\n        customSaver = '';\r\n        newObj._values = valueArr;\r\n        let setter = setCustomObj;\r\n        let valueTagName = `complex-value`;\r\n        let newField = new DOMParser().parseFromString(newObj.xml.outerHTML, 'text/xml').firstChild; //引入模板\r\n        let valueTemplates = newField.querySelectorAll(`fields > field[type=complex]`); //引入填写模板\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueArr.forEach((obj, index) => {\r\n            valueTemplates[index].querySelector('fields > field#custom_type').innerHTML = `<value>${obj.key}</value>`;\r\n            valueTemplates[index].querySelector('fields > field#quantity').innerHTML = `<value>${obj.value}</value>`;\r\n            valueSaver += valueTemplates[index].outerHTML;\r\n        });\r\n        valueSaver += `</${valueTagName}>`;\r\n        valueSaver = valueSaver.replace(/fields/g, valueTagName); //替换\r\n        if (newObj.values) newObj.xml.querySelector(valueTagName).remove(); //删除前值\r\n        let newXml = new DOMParser().parseFromString(valueSaver, 'text/xml').firstChild; //合并\r\n        newObj.xml.append(newXml); //替换\r\n        setter(newObj); //更新到JSX\r\n        onModified('customizedServices', newObj);\r\n        onCustomStatusChange('1'); //同步到支持定制选项\r\n        return;\r\n    }; //确认定制项\r\n\r\n    const onCustomClear = () => {\r\n        let newObj = { ...customObj };\r\n        newObj._values = newObj._values.filter((obj) => obj.value);\r\n        setCustomObj(newObj);\r\n        return;\r\n    }; //清除无效的定制项\r\n\r\n    return (\r\n        <>\r\n            <div style={{ paddingTop: '10px', paddingBottom: '20px' }}>\r\n                {!addCustom ? (\r\n                    <>\r\n                        <Tooltip title={langPack.steps.addCustomInfo}>\r\n                            <Button startIcon={<AddIcon />} onClick={() => setAddCustom((prev) => !prev)}>\r\n                                {langPack.steps.addCustomInfo}\r\n                            </Button>\r\n                        </Tooltip>\r\n                        <Tooltip title={langPack.steps.clearCustomInfo}>\r\n                            <Button startIcon={<DeleteIcon />} onClick={onCustomClear}>\r\n                                {langPack.steps.clearCustomInfo}\r\n                            </Button>\r\n                        </Tooltip>\r\n                    </>\r\n                ) : (\r\n                    <span style={{ display: 'flex', flexDirection: 'row', alignItems: 'stretch' }}>\r\n                        {customObj._options && customObj._options.length ? (\r\n                            <Autocomplete\r\n                                id=\"add-custom\"\r\n                                freeSolo\r\n                                key={customObj._options || 'options'}\r\n                                sx={{ display: 'inline' }}\r\n                                onChange={(e, value) => onCustomOptionChange(value)}\r\n                                onInputChange={(e, value) => onCustomOptionChange(value)}\r\n                                options={customObj._options.map((obj) => obj.key)}\r\n                                renderInput={(params) => (\r\n                                    <TextField\r\n                                        {...params}\r\n                                        fullWidth={false}\r\n                                        sx={{ marginTop: '13px', minWidth: '220px' }}\r\n                                        label={<Typography variant=\"h3\">{customObj.name}</Typography>}\r\n                                        placeholder={langPack.form.selectOrInput}\r\n                                    />\r\n                                )}\r\n                            />\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                        <Button startIcon={<CheckIcon />} onClick={() => onCustomOptionConfirm()}>\r\n                            {langPack.common.yes}\r\n                        </Button>\r\n                        <Button startIcon={<CancelIcon />} onClick={() => setAddCustom((prev) => !prev)}>\r\n                            {langPack.common.no}\r\n                        </Button>\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <Divider />\r\n            <br />\r\n            {customObj._values && customObj._values.length ? (\r\n                customObj._values.map((obj) => (\r\n                    <TextField\r\n                        key={obj.key}\r\n                        fullWidth={false}\r\n                        defaultValue={obj.value}\r\n                        onChange={(e) => {\r\n                            onCustomChange({ key: obj.key, value: e.target.value });\r\n                        }}\r\n                        onBlur={onCustomConfirm}\r\n                        label={<Typography variant=\"h3\">{obj.key}</Typography>}\r\n                        placeholder={langPack.form.selectOrInput}\r\n                    />\r\n                ))\r\n            ) : (\r\n                <></>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nApp.propTypes = {\r\n    langPack: PropTypes.object,\r\n    xmlSchema: PropTypes.object,\r\n    xmlGetField: PropTypes.func,\r\n    onModified: PropTypes.func\r\n};\r\n\r\nexport default App;\r\n","/* eslint-disable jsx-a11y/tabindex-no-positive */\r\nimport { useState, useEffect, useRef, lazy } from 'react';\r\nimport JoditEditor from 'jodit-react';\r\nimport PropTypes from 'prop-types';\r\nimport editorBtn from 'assets/images/editorBtn.png';\r\nimport Loadable from 'ui-component/Loadable';\r\nconst Photo = Loadable(lazy(() => import('views/photo')));\r\n\r\n// material-ui\r\nimport { Typography, Tooltip, Button, Dialog, DialogTitle } from '@mui/material';\r\nimport { CloudQueue as CloudQueueIcon } from '@mui/icons-material';\r\n\r\nlet shadowObj = {};\r\nfunction ProductDetail({ localization, finalDescription, onModified, xmlSchema, xmlGetField, langPack }) {\r\n    let [descriptionObj, setDescriptionObj] = useState({});\r\n    let [descriptionTypeObj, setDescriptionTypeObj] = useState({});\r\n    let [cloudImageArr, setCloudImageArr] = useState([]); //导入的云图片\r\n    let [dialogOpen, setDialogOpen] = useState(false); //选择图片的对话框状态\r\n\r\n    useEffect(() => {\r\n        if (!xmlSchema || finalDescription === undefined) return;\r\n        if (shadowObj.descriptionObj) setDescriptionObj(shadowObj.descriptionObj);\r\n        else getDescriptionObj();\r\n        getDescriptionTypeObj();\r\n        return;\r\n    }, [xmlSchema, finalDescription]);\r\n\r\n    function getDescriptionObj() {\r\n        let fieldObj = xmlGetField('superText');\r\n        fieldObj._values = { value: finalDescription };\r\n        return setDescriptionObj(fieldObj);\r\n    } //获取产品详情\r\n    function onDescriptionChange(value) {\r\n        if (!value || !value.trim()) return queryResult(false, '请输入产品详情'); //校验\r\n        if (value === descriptionObj._values.value) return console.log('未修改'); //未修改\r\n        value = value.replace(/\\n/g, '').trim();\r\n        let newObj = { ...descriptionObj };\r\n        newObj._values = { value };\r\n        let setter = setDescriptionObj;\r\n        let valueSaver = value.trim().encodeNonASCII();\r\n        if (valueSaver.length > 50000) return queryResult(false, langPack.form.descriptionOverflow);\r\n        newObj.xml.innerHTML = ''; //删除前值\r\n        newObj.xml.append(document.createElement('value'));\r\n        newObj.xml.children[0].innerText = valueSaver;\r\n        setter(newObj); //更新到JSX\r\n        onDescriptionTypeChange('2'); //同步更新到类型(目前只支持\"普通编辑\")\r\n        shadowObj.descriptionObj = newObj;\r\n        return onModified('superText', newObj); //通知父组件\r\n    } //产品名称修改\r\n\r\n    function getDescriptionTypeObj() {\r\n        let fieldObj = xmlGetField('productDescType');\r\n        fieldObj._options = fieldObj.options\r\n            ? fieldObj.options.map((obj) => {\r\n                  return { key: obj.displayName, value: obj.value };\r\n              })\r\n            : []; //数据内部处理\r\n        let value = fieldObj.values ? fieldObj.values[0].value : '2';\r\n        if (fieldObj._options.find((obj) => obj.value === value)) {\r\n            let key = fieldObj._options.find((obj) => obj.value === value).key;\r\n            fieldObj._values = { key, value };\r\n        }\r\n        console.log(fieldObj);\r\n        return setDescriptionTypeObj(fieldObj);\r\n    } //获取产品详情描述类型\r\n    function onDescriptionTypeChange(value) {\r\n        let newObj = { ...descriptionTypeObj };\r\n        if (newObj._options.find((obj) => obj.value === value)) {\r\n            newObj._values = { key: newObj._options.find((obj) => obj.value === value).key, value };\r\n        }\r\n        let valueTagName = `value`;\r\n        let setter = setDescriptionTypeObj;\r\n        let valueSaver = `<${valueTagName}>`; //引入填值区域(因类型而异) //type: input\r\n        valueSaver += value;\r\n        valueSaver += `</${valueTagName}>`;\r\n        newObj.xml.innerHTML = valueSaver.trim().encodeHTMLEntity(); //删除前值\r\n        setter(newObj); //更新到JSX\r\n        return onModified('productDescType', newObj); //通知父组件\r\n    } //产品名称修改\r\n\r\n    //Cloud-Photo组件 相关事件\r\n    let onDialogClose = (submit) => {\r\n        setDialogOpen(false);\r\n        if (submit) {\r\n            let valueArr = cloudImageArr.map((obj) => {\r\n                return { ...obj, key: obj.id, value: obj.url };\r\n            });\r\n            return onImageChange('add', valueArr);\r\n        }\r\n        return setCloudImageArr([]); //清除传入值\r\n    }; //对话框关闭\r\n    let onPhotoSelected = (value) => {\r\n        if (!value) return;\r\n        setCloudImageArr(value);\r\n    }; //选择了图片，则存到当前component里\r\n\r\n    const editor = useRef(null);\r\n    const config = {\r\n        //全局变量\r\n        language: localization.locale === 'zhCN' ? 'zh_cn' : 'en_us',\r\n        enter: 'DIV',\r\n        defaultActionOnPaste: 'insert_clear_html',\r\n        toolbarAdaptive: false,\r\n        buttons: [\r\n            'source',\r\n            'bold',\r\n            'italic',\r\n            'underline',\r\n            'eraser',\r\n            'ul',\r\n            'ol',\r\n            'left',\r\n            'font',\r\n            'fontsize',\r\n            'brush',\r\n            'image',\r\n            'copyformat',\r\n            'copy',\r\n            'paste',\r\n            'table',\r\n            'link',\r\n            {\r\n                iconURL: editorBtn,\r\n                tooltip: 'Clear Image style',\r\n                exec: function (editor, textNearby, obj) {\r\n                    let html = editor.value;\r\n                    html = html.replace(/\\n/gi, ''); //inline\r\n                    html = html.replace(/>/gi, '>\\n'); //按照tag 换行\r\n                    let htmlCodes = html.split('\\n');\r\n                    htmlCodes = htmlCodes.map((line) => {\r\n                        if (!/<img src/gi.test(line)) return line;\r\n                        line = / class=\"magic-(\\d{1,3})x000\"/gi.test(line)\r\n                            ? line.replace(/x000/gi, '')\r\n                            : line.replace(/ class=\"magic-(\\d{1,3})\"/gi, ` class=\"magic-$1` + `x000\"`);\r\n                        return line;\r\n                    }); //去除smart editing 对图片的限制\r\n                    html = htmlCodes.join('');\r\n                    editor.value = html;\r\n                }\r\n            } /* ,\r\n            {\r\n                iconURL:\r\n                    'data:image/png;base64,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',\r\n                tooltip: '插入模板变量',\r\n                exec: function (editor, textNearby, obj) {\r\n                    let varSelected = obj.control.text || '客户姓名';\r\n                    let varObj = {\r\n                        贵司: '${company_name}',\r\n                        客户姓名: '${contacts}',\r\n                        客户邮箱: '${email}',\r\n                        销售姓名: '${salesManager}'\r\n                    };\r\n                    let myVar = varObj[varSelected];\r\n                    editor.selection.removeMarkers();\r\n                    const text = editor.createInside.element('span');\r\n                    text.innerHTML = myVar;\r\n                    editor.selection.insertNode(text);\r\n                    editor.setEditorValue(); // for syncronize value between source textarea and editor\r\n                },\r\n                list: {\r\n                    '${company_name}': '贵司',\r\n                    '${contacts}': '客户姓名',\r\n                    '${email}': '客户邮箱',\r\n                    '${salesManager}': '销售姓名'\r\n                }\r\n            } */\r\n        ],\r\n        events: {\r\n            paste: (e) => {\r\n                //粘贴动作发生时\r\n                console.log('粘贴...', e); //本地图片\r\n                let items = e.clipboardData && e.clipboardData.items;\r\n                if (!items || !items.length) return;\r\n                return console.log(items);\r\n                for (let i = 0; i < items.length; i++) {\r\n                    let item = items[i];\r\n                    if (item == null || item.type.match('image') == null) continue;\r\n                    let file = item.getAsFile();\r\n                    console.log(file);\r\n                    if (file == null) return console.log('无法获取图片');\r\n                    if (file.size > 10 * 1000 * 1000) return boots.queryResult(false, '图片文件大小不能超过10M');\r\n                    let fileObj = {\r\n                        name: file.name,\r\n                        size: file.size,\r\n                        url: URL.createObjectURL(file) //本地 blob url\r\n                    };\r\n                    thisInstance.uploadPic(fileObj); //'this' is not referred\r\n                } // 此时file就是剪切板中的图片文件\r\n            },\r\n            beforePasteInsert: (text) => {\r\n                console.log('粘贴内容植入前...'); //网络图片\r\n                return;\r\n                setTimeout(() => {\r\n                    editor.value = thisInstance.emailAddFilter(editor.value);\r\n                    console.log('过滤 & 替换');\r\n                    let imgs = document.images;\r\n                    for (let i = 0; i < imgs.length; i++) {\r\n                        let src = imgs[i].src;\r\n                        if (src.match(/^https:\\/\\/mail.ali/i) == null) continue;\r\n                        console.log(src);\r\n                        let fileObj = {\r\n                            name: 'image.png',\r\n                            size: '',\r\n                            url: src\r\n                        };\r\n                        thisInstance.uploadPic(fileObj);\r\n                    }\r\n                }, 200);\r\n            } //粘贴到文本框时\r\n        }\r\n    };\r\n    return (\r\n        <>\r\n            <Typography variant=\"h4\" sx={{ paddingTop: '6px', paddingBottom: '6px', color: 'orangered' }}>\r\n                {langPack.steps.productDescriptionTip}\r\n            </Typography>\r\n            <div style={{ display: 'none', flexDirection: 'column', justifyContent: 'center' }}>\r\n                <Tooltip title={langPack.steps.selectFromCloud}>\r\n                    <Button sx={{ height: '100%' }} startIcon={<CloudQueueIcon />} onClick={() => setDialogOpen(true)}>\r\n                        {langPack.steps.cloud}\r\n                    </Button>\r\n                </Tooltip>\r\n                <Dialog onClose={() => onDialogClose(true)} open={dialogOpen}>\r\n                    <DialogTitle>{langPack.steps.selectFromCloud}</DialogTitle>\r\n                    <Photo onPhotoSelected={onPhotoSelected} />\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={() => onDialogClose(true)}>\r\n                        {langPack.common.yes}\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"error\" onClick={() => onDialogClose()}>\r\n                        {langPack.common.no}\r\n                    </Button>\r\n                </Dialog>\r\n            </div>\r\n            <JoditEditor\r\n                ref={editor}\r\n                value={descriptionObj._values ? descriptionObj._values.value : ''}\r\n                config={config}\r\n                tabIndex={1} // tabIndex of textarea\r\n                onBlur={(newContent) => onDescriptionChange(newContent)} // preferred to use only this option to update the content for performance reasons\r\n                onChange={(newContent) => {}}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nProductDetail.propTypes = {\r\n    finalDescription: PropTypes.string,\r\n    localization: PropTypes.object,\r\n    xmlSchema: PropTypes.object,\r\n    onModified: PropTypes.func,\r\n    xmlGetField: PropTypes.func,\r\n    langPack: PropTypes.object\r\n};\r\n\r\nexport default ProductDetail;\r\n","/* eslint-disable jsx-a11y/tabindex-no-positive */\r\nimport { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// material-ui\r\nimport { useMediaQuery, Typography, Accordion, AccordionDetails, AccordionSummary } from '@mui/material';\r\nimport { ExpandMore as ExpandMoreIcon } from '@mui/icons-material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport { Languages } from './Languages';\r\nimport EditStep from './component/EditStep';\r\nimport PhotoGallery from './component/PhotoGallery';\r\nimport ProductSummary from './component/ProductSummary';\r\nimport ProductAttribute from './component/ProductAttribute';\r\nimport ProductService from './component/ProductService';\r\nimport ProductDetail from './component/ProductDetail';\r\nimport Confirmation from './component/Confirmation';\r\n\r\n// ==============================|| SINGLE PAGE APPLICATION ||============================== //\r\nlet productModified = {};\r\nlet editMode; //编辑模式 ? 更新 ： 新建\r\nlet productSchema; //产品编辑模板\r\nlet real_product_id; //产品id\r\n\r\nconst App = () => {\r\n    //全局数据\r\n    console.log('productEdit app running');\r\n    let localization = useSelector((state) => state.localization); //多语言相关\r\n    let globalization = useSelector((state) => state.globalization); //全局数据\r\n    let [langPack, setLangPack] = useState(Languages[localization.locale]); //currentLanguage\r\n    let [loginData] = useState(globalization.baseData.loginData);\r\n    let navigate = useNavigate(); //react-router-dom\r\n    //编辑步骤提示 & 菜单折叠\r\n    let [activeStep, setActiveStep] = useState(0);\r\n    //控制.面板\r\n    let [expanded, setExpanded] = useState({ panel1: true, panel2: true, panel3: true, panel4: true });\r\n    //产品信息汇总\r\n    let urlParams = new URLSearchParams(location.pathname.replace('/product/', ''));\r\n    let product_id = urlParams.get('product_id'); //产品id\r\n    let category_Id_ext = urlParams.get('category_id'); //产品分类id\r\n    editMode = product_id ? 'update' : 'add';\r\n    let [xmlSchema, setXmlSchema] = useState(null);\r\n    let [productInfo, setProductInfo] = useState({}); //产品信息\r\n    let [finalDescription, setFinalDescription] = useState(''); //在用的产品详情\r\n    let [finalCatId, setFinalCatId] = useState(0); //当前产品类目id\r\n    //产品主图相关\r\n    let photoCols = useMediaQuery(useTheme().breakpoints.down('md')) ? 3 : 6;\r\n\r\n    useEffect(() => {\r\n        console.log('description changed ');\r\n        if (finalDescription) {\r\n            if (!productInfo.description) return; //待初始化\r\n            if (finalDescription.length > 60000) return queryResult(false, langPack.form.descriptionOverflow);\r\n            if (finalDescription === productInfo.description) return; //未修改\r\n            productModified.description = finalDescription.replace(/\\n/g, '').trim();\r\n        }\r\n        return; //编辑器内容改变时\r\n    }, [finalDescription]);\r\n\r\n    useEffect(() => {\r\n        setLangPack(Languages[localization.locale]);\r\n        return; //语言切换\r\n    }, [localization.locale]);\r\n\r\n    useEffect(() => {\r\n        console.log('I want product editing');\r\n        if (!loginData) return navigate('/');\r\n        if (!editMode) return queryResult(false, langPack.steps.productIdError);\r\n        editMode === 'update' ? getProductInfo({ product_id }) : makeProductInfo({ cat_id: category_Id_ext });\r\n        return () => {\r\n            console.log('I leave product edit');\r\n            productModified = {};\r\n        }; //载入 & 清理\r\n    }, []);\r\n\r\n    //____________一些函数_______________________________________________\r\n    async function getProductInfo(obj) {\r\n        let paramObj = ma.productDetailQuery(obj);\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productDetailCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        console.log(result);\r\n        let { description, category_id } = result;\r\n        if (description) {\r\n            setFinalDescription(description);\r\n        }\r\n        if (category_id) {\r\n            setFinalCatId(category_id);\r\n        }\r\n        if (product_id) {\r\n            getProductId({ product_id });\r\n        }\r\n        setProductInfo(result);\r\n    } //获取产品信息\r\n\r\n    async function getProductId(obj) {\r\n        let paramObj = ma.productIdQuery(obj);\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productIdCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        real_product_id = result;\r\n        makeProductExample({ product_id: real_product_id });\r\n        return console.log(result);\r\n    } //获取类目信息\r\n\r\n    async function uploadPhotos(photoFile) {\r\n        let currentFolder = -1;\r\n        let paramObj = ma.photoUploadQuery({ file_name: photoFile.name, image_bytes: photoFile, group_id: currentFolder });\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.yes);\r\n        let res = ma.photoUploadCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(false, result);\r\n        queryResult(true, langPack.steps.uploadSuccess);\r\n        return result;\r\n    }\r\n\r\n    async function makeProductInfo(obj) {\r\n        let paramObj = ma.productSchemaQuery({\r\n            param_product_top_publish_request: JSON.stringify({\r\n                ...obj,\r\n                language: 'zh'\r\n                //language: localization.locale === 'enUS' ? 'en_US' : 'zh'\r\n            })\r\n        });\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productSchemaCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        return makeSchema(result);\r\n    } //获取新产品 编辑模板\r\n    //👆二选一👇\r\n    async function makeProductExample(obj) {\r\n        let paramObj = ma.productSchemaRenderQuery({\r\n            param_product_top_publish_request: JSON.stringify({\r\n                ...obj,\r\n                language: 'zh'\r\n                //language: localization.locale === 'enUS' ? 'en_US' : 'zh'\r\n            })\r\n        });\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = ma.productSchemaRenderCheck(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        return makeSchema(result);\r\n    } //获取 现有产品信息  &  编辑模板\r\n\r\n    function makeSchema(xml) {\r\n        productSchema = new DOMParser().parseFromString(xml, 'text/xml');\r\n        console.log(productSchema);\r\n        setXmlSchema(productSchema);\r\n        window.productSchema = productSchema;\r\n        const errorNode = productSchema.querySelector('parsererror');\r\n        if (errorNode) return queryResult(false, langPack.steps.uneditable);\r\n        let fields = productSchema.children[0];\r\n        let schemaArr = Array.from(fields.children).map((node) => {\r\n            return node.toObject();\r\n        });\r\n        console.log(schemaArr);\r\n        return;\r\n    } //构造编辑框架\r\n\r\n    async function submitProductSchema(xml) {\r\n        let queryMethod;\r\n        let checkMethod;\r\n        let productId;\r\n        let catId;\r\n        if (editMode === 'add') {\r\n            queryMethod = ma.productSchemaAddQuery;\r\n            checkMethod = ma.productSchemaAddCheck;\r\n            catId = category_Id_ext;\r\n        } else {\r\n            queryMethod = ma.productSchemaUpdateQuery;\r\n            checkMethod = ma.productSchemaUpdateCheck;\r\n            productId = real_product_id;\r\n            catId = finalCatId;\r\n        }\r\n        /* let xmldom = new DOMParser().parseFromString(xml, 'text/xml');\r\n        Array.from(xmldom.querySelectorAll('itemSchema > field > rules, options, label-group, fields')).forEach((node) => node.remove());\r\n        Array.from(xmldom.children[0].children).forEach((node) => (!node.children.length ? node.remove() : ''));\r\n        xml = xmldom.children[0].outerHTML; */\r\n        let params = {\r\n            xml,\r\n            cat_id: Number(catId),\r\n            language: 'zh'\r\n            //language: localization.locale === 'enUS' ? 'en_US' : 'zh'\r\n        };\r\n        if (productId) params.product_id = productId;\r\n        let paramObj = queryMethod({\r\n            param_product_top_publish_request: JSON.stringify(params)\r\n        });\r\n        let msg = await fetchAPI(paramObj);\r\n        if (!msg.response.status) return queryResult(false, langPack.common.netFail + '\\n' + msg.response.result);\r\n        let res = checkMethod(msg);\r\n        let { status, result } = res.response;\r\n        if (!status) return queryResult(status, result);\r\n        queryResult(true, editMode === 'add' ? langPack.steps.addSuccess : langPack.steps.updateSuccess);\r\n        return;\r\n    } //发品（添加/修改）\r\n\r\n    function xmlGetField(id) {\r\n        if (!xmlSchema) return;\r\n        let node = xmlSchema.querySelector(`itemSchema > field[id=\"${id}\"]`);\r\n        if (!node) return;\r\n        return insideCheck([node])[0];\r\n    } //获取单个字段信息\r\n\r\n    function insideCheck(nodeArr) {\r\n        let newSubArr = [];\r\n        let subArr = Array.from(nodeArr);\r\n        for (let index = 0; index < subArr.length; index++) {\r\n            let xml = subArr[index];\r\n            let subObj = fieldCheck(xml);\r\n            if (!subObj) subObj = {};\r\n            subObj.xml = xml;\r\n            if (subObj.options && subObj.options.length) subObj.options = insideCheck(subObj.options);\r\n            if (subObj.values && subObj.values.length) subObj.values = insideCheck(subObj.values);\r\n            if (xml.innerHTML && !xml.children.length) subObj.value = xml.innerHTML;\r\n            newSubArr.push(subObj);\r\n        }\r\n        return newSubArr;\r\n    } //获取内部数据\r\n\r\n    function generalCheck(node) {\r\n        let attributeObj = node.getAttributeObj();\r\n        if (!attributeObj) attributeObj = {};\r\n        let resultObj = { ...attributeObj, xml: node };\r\n        return resultObj;\r\n    } //获取基本信息\r\n\r\n    function fieldCheck(node) {\r\n        let resultObj = generalCheck(node);\r\n        let { type } = resultObj;\r\n        if (!type) return resultObj;\r\n        let optionNodes;\r\n        let valueNodes;\r\n        if (type === 'multiComplex') {\r\n            optionNodes = node.querySelectorAll('fields > field');\r\n            valueNodes = node.querySelectorAll('complex-values > field');\r\n        } else if (type === 'complex') {\r\n            optionNodes = node.querySelectorAll('fields > field');\r\n            valueNodes = node.querySelectorAll('complex-value > field');\r\n        } else if (type === 'multiCheck') {\r\n            optionNodes = node.querySelectorAll('options > option');\r\n            valueNodes = node.querySelectorAll('values > value');\r\n        } else if (type === 'multiInput') {\r\n            valueNodes = node.querySelectorAll('values > value');\r\n        } else if (type === 'singleCheck') {\r\n            optionNodes = node.querySelectorAll('options > option');\r\n            valueNodes = node.querySelectorAll('value');\r\n        } else if (type === 'input') {\r\n            valueNodes = node.querySelectorAll('value');\r\n        }\r\n        if (optionNodes && optionNodes.length) resultObj.options = optionNodes;\r\n        if (valueNodes && valueNodes.length) resultObj.values = valueNodes;\r\n        return resultObj;\r\n    } //获取选项和值\r\n\r\n    const onModified = (key, value) => {\r\n        console.log('modified', key, value);\r\n        //console.log(value.xml);\r\n        productModified[key] = value;\r\n    }; //更新产品信息\r\n\r\n    const modificationSubmission = () => {\r\n        let modifiedKeys = Object.keys(productModified);\r\n        if (!modifiedKeys.length) return queryResult(false, langPack.steps.modificationNull);\r\n        console.log(productModified);\r\n        let xmlArr = Object.values(productModified).map((obj) => obj.xml);\r\n        let finalXmlStr = '<itemSchema>';\r\n        xmlArr.forEach((xml) => (finalXmlStr += xml.outerHTML));\r\n        finalXmlStr += '</itemSchema>';\r\n        let xmldom = new DOMParser().parseFromString(finalXmlStr, 'text/xml').firstChild; //创建XML副本\r\n        //Array.from(xmldom.querySelectorAll('field > :not(value, values, complex-value, complex-values)')).forEach((node) => node.remove());\r\n        finalXmlStr = xmldom.outerHTML.replace(/ xmlns=\"http:\\/\\/www.w3.org\\/1999\\/xhtml\"/gi, '');\r\n        finalXmlStr = finalXmlStr.replace(/inputvalue/g, 'inputValue');\r\n        finalXmlStr = finalXmlStr.encodeNonASCII(); //非ASCII字符须编码\r\n        submitProductSchema(finalXmlStr);\r\n    };\r\n\r\n    const handleAccordionChange = (panel) => (event, isExpanded) => {\r\n        setExpanded((prev) => {\r\n            return { ...prev, [panel]: isExpanded };\r\n        });\r\n    }; //面板展开、收起\r\n    //____________Functions return JSX_______________________________________________\r\n\r\n    return (\r\n        <MainCard title=\"Product Edit --产品编辑\">\r\n            <EditStep langPack={langPack} activeStep={activeStep} setActiveStep={setActiveStep} />\r\n            {activeStep === 0 ? (\r\n                <>\r\n                    <PhotoGallery\r\n                        xmlSchema={xmlSchema}\r\n                        localization={localization}\r\n                        photoCols={photoCols}\r\n                        rowHeight={200}\r\n                        uploadPhotos={uploadPhotos}\r\n                        xmlGetField={xmlGetField}\r\n                        onModified={onModified}\r\n                        langPack={langPack}\r\n                    />\r\n                    <Accordion expanded={expanded['panel1']} onChange={handleAccordionChange('panel1')}>\r\n                        <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography variant=\"h2\" sx={{ width: '33%', flexShrink: 0, color: 'coral' }}>\r\n                                {langPack.form.KeyInformation}\r\n                            </Typography>\r\n                            <Typography sx={{ color: 'text.secondary' }}>{langPack.steps.panel1}</Typography>\r\n                        </AccordionSummary>\r\n                        <AccordionDetails sx={{ border: '1px groove' }}>\r\n                            <>\r\n                                <ProductSummary\r\n                                    xmlSchema={xmlSchema}\r\n                                    langPack={langPack}\r\n                                    xmlGetField={xmlGetField}\r\n                                    onModified={onModified}\r\n                                />\r\n                            </>\r\n                        </AccordionDetails>\r\n                    </Accordion>\r\n                    <Accordion expanded={expanded['panel2']} onChange={handleAccordionChange('panel2')}>\r\n                        <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography variant=\"h2\" sx={{ width: '33%', flexShrink: 0, color: 'red' }}>\r\n                                {langPack.form.ProductAttributes}\r\n                            </Typography>\r\n                            <Typography sx={{ color: 'text.secondary' }}>{langPack.steps.panel2}</Typography>\r\n                        </AccordionSummary>\r\n                        <AccordionDetails sx={{ border: '1px groove' }}>\r\n                            <>\r\n                                <ProductAttribute\r\n                                    {...productInfo}\r\n                                    xmlSchema={xmlSchema}\r\n                                    langPack={langPack}\r\n                                    xmlGetField={xmlGetField}\r\n                                    onModified={onModified}\r\n                                />\r\n                            </>\r\n                        </AccordionDetails>\r\n                    </Accordion>\r\n                    <Accordion expanded={expanded['panel3']} onChange={handleAccordionChange('panel3')}>\r\n                        <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography variant=\"h2\" sx={{ width: '33%', flexShrink: 0, color: 'orangered' }}>\r\n                                {langPack.form.productService}\r\n                            </Typography>\r\n                            <Typography sx={{ color: 'text.secondary' }}>{langPack.steps.panel3}</Typography>\r\n                        </AccordionSummary>\r\n                        <AccordionDetails sx={{ border: '1px groove' }}>\r\n                            <>\r\n                                <ProductService\r\n                                    xmlSchema={xmlSchema}\r\n                                    langPack={langPack}\r\n                                    xmlGetField={xmlGetField}\r\n                                    onModified={onModified}\r\n                                />\r\n                            </>\r\n                        </AccordionDetails>\r\n                    </Accordion>\r\n                    <br />\r\n                </>\r\n            ) : activeStep === 1 ? (\r\n                <>\r\n                    <ProductDetail\r\n                        localization={localization}\r\n                        finalDescription={finalDescription}\r\n                        xmlGetField={xmlGetField}\r\n                        onModified={onModified}\r\n                        xmlSchema={xmlSchema}\r\n                        langPack={langPack}\r\n                    />\r\n                </>\r\n            ) : activeStep === 2 ? (\r\n                <>\r\n                    <Confirmation langPack={langPack} productModified={productModified} modificationSubmission={modificationSubmission} />\r\n                </>\r\n            ) : (\r\n                <></>\r\n            )}\r\n        </MainCard>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAK/SURBVHhe7ZvhTcMwEIXZAEZgA9gANigbwAaMABuUDegGjAAbMAIjMIK5JxIp5OyzL02I3bxPej9aXdLzp8RO0/QsEBcU5oTCnFCYEwpzQmFOKMzJ/wj7+Kgnn59dU9NYTtjhEMLlpXyCfESNubsL4f29a7Yc2XIBHh50g7Xm9bVrugzZYmaennRTtcdxpEn1jHx/62ZayG7XDSCPVM8IDu9YQy2kkPLKElKn49VVCDc3deT8PN5j4eoplTOSEjZhNVoMSDuiR6mcEQpzQmFOKMzJ5oV9fYXw/KyTujrevDDsJLZzfGgMCqOwMVJpQGEKqTSgMIVUGlCYQioNKEwhlQYUppBKAwpTSKUBhSmk0oDCFFJpQGEKqTSgMIVUGlCYQioNaheGuyleNisMsi4uQtjvuzcK2aQw/P55fT1t/yclDI8YQEaO8aMIONJKT8+TEfb4+FsLGRY4Bcf7R3DElXASwt7e/tanboGn+umTkw2aF9ZP3sN6vB7/Eh2riyX3NE7zwoaT9zB4v5/PxpN8LtbP/k0L6+etVPpTbDzJ54IjMbV4NCtsPG+lgicFY+/nkloEmhRWOh8dm9gi0KQwz3x0bMaLQHPCMABs/58Zzmd4nevRQCoNlhC2NhTmpAlhLy/xPxmskdT8uYqw1Pe8FlKIXekVhivsWH3twUPLhUi1gVcYSM0RNSf3/XOAVBtMEYaL0tSj3TXm/r5rvAzZwmCKMABpLRxpWKScyFYGU4X1YE7DQoDGagpOwZI7uxFk9AbHCjtBZPQGFKaQ0RtQmEJGb0BhChm9AYUpZPQGqSt33Py7va07jotRDzL6DDFhLQSXDwsge86Av/fGGqo9qwlLzWO1ZzVhAPNBrKmas6owgCOtpdNzdWFDsHpCYM3BDYAFmCZsw1CYEwpzQmFOKMwJhTmhMCcU5oTCXITwA9i8QLpYTlc4AAAAAElFTkSuQmCC\""],"sourceRoot":""}