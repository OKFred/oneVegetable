(this["webpackJsonperp-dashboard"]=this["webpackJsonperp-dashboard"]||[]).push([[11],{323:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={enUS:{folder:{currentFolder:"please select",needFolderName:"please input name for new folder",addNewFolder:"add new folder",folderNull:"folder not found",dataNull:"data not found"},table:{tableHeader:"Products",categoryName:"category name",productId:"product id",subject:"subject",status:"status",display:"display",attributes:"attributes",keywords:"keywords",price:"price (range)",min_order_quantity:"min order quantity(MOQ)",unit_type:"unit type",gmt_create:"date create",gmt_modified:"date modified"},tableToolbar:{menuHide:"hide menu",menuShow:"show menu",productDisplayOn:"in-stock",productDisplayOff:"out-stock",productEdit:"edit"},form:{KeyInformation:"key information",ProductAttributes:"product attributes",subject:"128 letters max.",category:"click to change category",keywords:"3 keywords max. Comma(,) separated",price:"set price (range)",min_order_quantity:"optional",attributes:"add or delete",attributeMissing:"attribute missing",attributeDuplicated:"attribute duplicated",pieces:"pieces"},steps:{first:"Edit Attributes",second:"Edit Contents",finally:"Preview & Publish",previous:"Previous",next:"Next",complete:"Complete",editPrice:"Edit Price",choosePhotos:"Choose Photos",uploadPhotos:"Upload Photos",removePhotos:"double click to remove the photo",mainPhotoRequired:"Need at least one photo",descriptionOverflow:"description length shall be smaller than 60k letters",addAttributes:"Add Attributes",removeAttributes:"Remove Attributes",modificationNull:"No modification made",modificationDone:"Will submit the following modifications:"},common:{yes:"OK",no:"Cancel",netFail:"request failed"}},zhCN:{folder:{currentFolder:"\u8bf7\u9009\u62e9",needFolderName:"\u8bf7\u586b\u5199\u6587\u4ef6\u5939\u540d",addNewFolder:"\u65b0\u5efa\u6587\u4ef6\u5939",folderNull:"\u6587\u4ef6\u5939\u4e0d\u5b58\u5728",dataNull:"\u6570\u636e\u4e0d\u5b58\u5728"},table:{tableHeader:"\u4ea7\u54c1",categoryName:"\u7c7b\u76ee",productId:"\u4ea7\u54c1 id",subject:"\u6807\u9898",status:"\u5ba1\u6838\u72b6\u6001",display:"\u4e0a\u67b6\u72b6\u6001",attributes:"\u5c5e\u6027",keywords:"\u5173\u952e\u8bcd",price:"\u4ef7\u683c(\u533a\u95f4)",min_order_quantity:"\u6700\u5c0f\u8d77\u8ba2\u91cf(MOQ)",unit_type:"\u5355\u4f4d",gmt_create:"\u521b\u5efa\u65e5\u671f",gmt_modified:"\u4fee\u6539\u65e5\u671f"},tableToolbar:{menuHide:"\u9690\u85cf\u83dc\u5355",menuShow:"\u663e\u793a\u83dc\u5355",productDisplayOn:"\u4e0a\u67b6",productDisplayOff:"\u4e0b\u67b6",productEdit:"\u7f16\u8f91"},form:{KeyInformation:"\u57fa\u672c\u4fe1\u606f",ProductAttributes:"\u4ea7\u54c1\u5c5e\u6027",subject:"128 \u5b57\u7b26\u4ee5\u5185",category:"\u70b9\u51fb\u66f4\u6362\u7c7b\u76ee",keywords:"\u6700\u591a\u4e09\u4e2a\u5173\u952e\u8bcd\uff0c\u7528\u82f1\u6587\u9017\u53f7(,)\u5206\u9694",price:"\u8bbe\u7f6e\u4ef7\u683c(\u533a\u95f4)",min_order_quantity:"\u9009\u586b",attributes:"\u53ef\u589e\u53ef\u51cf",attributeMissing:"\u5c5e\u6027\u7f3a\u5931",attributeDuplicated:"\u5c5e\u6027\u91cd\u590d",pieces:"\u4ef6"},steps:{first:"\u5c5e\u6027\u7f16\u8f91",second:"\u8be6\u60c5\u7f16\u8f91",finally:"\u9884\u89c8&\u53d1\u5e03",previous:"\u4e0a\u4e00\u6b65",next:"\u4e0b\u4e00\u6b65",complete:"\u5b8c\u6210",editPrice:"\u7f16\u8f91\u4ef7\u683c",choosePhotos:"\u9009\u62e9\u56fe\u7247",uploadPhotos:"\u4e0a\u4f20\u56fe\u7247",removePhotos:"\u53cc\u51fb\u79fb\u9664\u56fe\u7247",mainPhotoRequired:"\u9700\u8981\u4fdd\u7559\u81f3\u5c11\u4e00\u5f20\u4e3b\u56fe",descriptionOverflow:"\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc76\u4e07\u5b57\u7b26",addAttributes:"\u6dfb\u52a0\u5c5e\u6027",removeAttributes:"\u79fb\u9664\u7a7a\u767d\u5c5e\u6027",modificationNull:"\u6ca1\u6709\u4efb\u4f55\u4fee\u6539",modificationDone:"\u5c06\u63d0\u4ea4\u5982\u4e0b\u5185\u5bb9:"},common:{yes:"\u786e\u5b9a",no:"\u53d6\u6d88",netFail:"\u8bf7\u6c42\u5931\u8d25"}}}},410:function(e,t,r){"use strict";r.r(t);var a=r(35),n=r.n(a),o=r(18),c=r(53),i=r(9),u=r(12),s=r(0),l=r(16),d=r(23),p=r(26),b=r(86),f=r(323),h=r(85),j=r(407),m=r(274),g=r(411),O=r(359),x=r(290),y=r(266),k=r(385),_=r(386),w=r(387),v=r(388),P=r(389),C=r(347),F=r(348),R=r(1);var N=function(e){var t=e.folderArr,r=e.currentFolder,a=e.addFolder,o=e.setCurrentFolder,i=e.langPack,l=Object(s.useState)(!1),d=Object(u.a)(l,2),p=d[0],b=d[1],f=Object(s.useState)(!1),N=Object(u.a)(f,2),A=N[0],D=N[1];function S(){return(S=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return",queryResult(!1,i.folder.needFolderName));case 2:return e.next=4,a({group_name:p});case 4:return e.sent&&(o(""),q()),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){b(""),D(!1)}return t&&t.length?Object(R.jsx)("div",{style:{marginBottom:"20px"},children:A?Object(R.jsx)(R.Fragment,{children:"add"===A?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(y.a,{sx:{height:"30px",marginRight:"10px"},variant:"outlined",color:"secondary",type:"text",placeholder:i.folder.addNewFolder,onChange:function(e){return b(e.target.value.trim())}}),Object(R.jsx)(x.a,{startIcon:Object(R.jsx)(C.a,{}),onClick:function(){return S.apply(this,arguments)},children:i.common.yes}),Object(R.jsx)(x.a,{startIcon:Object(R.jsx)(F.a,{}),onClick:function(){return D(!1)},children:i.common.no})]}):""}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(j.a,{"aria-label":"breadcrumb",sx:{display:"inline-block",marginRight:"5px"},children:[Object(R.jsx)(k.a,{}),Object(R.jsxs)(m.a,{sx:{height:"30px",minWidth:"100px"},autoWidth:!0,value:r,onChange:function(e){return o(e.target.value)},children:[Object(R.jsx)(g.a,{value:i.folder.currentFolder,disabled:!0,children:i.folder.currentFolder}),t.map((function(e,t){return Object(R.jsx)(g.a,{value:e.group_id,children:e.group_name},t)}))]})]}),Object(R.jsxs)(O.a,{variant:"",children:[Object(R.jsx)(x.a,{onClick:function(){return D("add")},children:Object(R.jsx)(_.a,{})}),Object(R.jsx)(x.a,{onClick:function(){return D("edit")},disabled:!0,children:Object(R.jsx)(w.a,{})}),Object(R.jsx)(x.a,{onClick:function(){return D("delete")},disabled:!0,children:Object(R.jsx)(v.a,{})}),Object(R.jsx)(x.a,{onClick:function(){return D("upload")},disabled:!0,children:Object(R.jsx)(P.a,{})})]})]})}):Object(R.jsx)(h.a,{variant:"body2",children:i.folder.folderNull})},A=r(394),D=r(395),S=r(400),q=r(416),I=r(390),z=r(391),E=r(392),T=r(393),G=r(417),H=[];var M=function(e){var t=e.tableRows,r=e.tableColumns,a=e.page_size,n=e.page,o=e.localization,c=e.langPack,i=e.changeProductDisplay,d=e.handleChangePage,p=e.handleChangeRowsPerPage,b=e.onRowClick,f=(Object(l.f)(),Object(s.useState)(!0)),h=Object(u.a)(f,1)[0];return Object(R.jsx)("div",{style:{height:600,width:"100%"},children:Object(R.jsx)(S.a,{checkboxSelection:h,localeText:"zhCN"===o.locale?q.a.components.MuiDataGrid.defaultProps.localeText:{},components:{Toolbar:function(){return Object(R.jsxs)(I.a,{children:[Object(R.jsx)(z.a,{}),Object(R.jsx)(E.a,{}),Object(R.jsx)(T.a,{}),Object(R.jsx)(G.a,{}),Object(R.jsxs)("span",{hidden:!H.length,children:[Object(R.jsx)(x.a,{sx:{padding:"4px 5px"},startIcon:Object(R.jsx)(A.a,{}),onClick:function(){var e=H.map((function(e){return e.product_id})).join(",");i({new_display:"on",product_id_list:e})},children:c.tableToolbar.productDisplayOn}),Object(R.jsx)(x.a,{sx:{padding:"4px 5px"},startIcon:Object(R.jsx)(D.a,{}),onClick:function(){var e=H.map((function(e){return e.product_id})).join(",");i({new_display:"off",product_id_list:e})},children:c.tableToolbar.productDisplayOff})]})]})}},onRowClick:b,onStateChange:function(e,r){var a=e.selection;a.length!==H.length&&(H=a.map((function(e){return t.find((function(t){return t.id===e}))})),console.log(H.length+" selected"))},page:n,pageSize:a,rowCount:9999,columns:r,getRowHeight:function(){return 88},rows:t,rowsPerPageOptions:[10,25,100],disableSelectionOnClick:!0,paginationMode:"server",onPageChange:d,onPageSizeChange:p})})};function Q(e,t,r,a,n){var o=/\.(\w{3,4})$/.exec(e)[0];return{src:"".concat(e,"_").concat(t*n,"x").concat(r*a).concat(o),srcSet:"".concat(e,"_").concat(t*n*2,"x").concat(r*a*2).concat(o," 2x")}}t.default=function(){console.log("product app running");var e=Object(d.b)(),t=Object(d.c)((function(e){return e.localization})),r=Object(s.useState)(f.a[t.locale]),a=Object(u.a)(r,2),h=a[0],j=a[1],m=Object(l.f)(),g=Object(d.c)((function(e){return e.globalization})),O=Object(s.useState)(g.baseData.loginData),x=Object(u.a)(O,1)[0],y=Object(s.useState)(g.appData),k=Object(u.a)(y,2),_=k[0],w=k[1],v=[],P=Object(s.useState)([]),C=Object(u.a)(P,2),F=C[0],A=C[1],D=Object(s.useState)(h.folder.currentFolder),S=Object(u.a)(D,2),q=S[0],I=S[1],z=Object(s.useState)([]),E=Object(u.a)(z,2),T=E[0],G=E[1],H=Object(s.useState)([]),W=Object(u.a)(H,2),K=W[0],L=W[1],U=Object(s.useState)(0),J=Object(u.a)(U,2),B=J[0],$=J[1],V=Object(s.useState)(10),X=Object(u.a)(V,2),Y=X[0],Z=X[1];function ee(){return(ee=Object(c.a)(n.a.mark((function e(t){var r,a,c,i,u,s,l,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ma.productGroupAddQuery(t),e.next=3,fetchAPI(r);case 3:if((a=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,h.common.netFail+" >> "+a.response.result));case 6:if(c=ma.productGroupAddCheck(a),i=c.response,u=i.status,s=i.result,u){e.next=10;break}return e.abrupt("return",queryResult(u,s));case 10:l=s.group_id,d=s.group_name,A([].concat(Object(o.a)(F),[{group_id:l,group_name:d}]));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return re.apply(this,arguments)}function re(){return(re=Object(c.a)(n.a.mark((function e(t,r){var a,o,c,i,u,s,l,d,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ma.productGroupQuery(t),e.next=3,fetchAPI(a);case 3:if((o=e.sent).response.status){e.next=6;break}return e.abrupt("return",queryResult(!1,h.common.netFail+" >> "+o.response.result));case 6:if(c=ma.productGroupCheck(o),i=c.response,u=i.status,s=i.result,u){e.next=10;break}return e.abrupt("return",queryResult(!1,s));case 10:if(t){e.next=18;break}if(v=[],(l=s.children_id_list.number)&&l.length){e.next=15;break}return e.abrupt("return");case 15:l.forEach((function(e){return te({group_id:e},l.length)})),e.next=21;break;case 18:d=s.group_id,p=s.group_name,v.push({group_id:d,group_name:p}),v.length===r&&A(v);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(c.a)(n.a.mark((function e(t){var r,a,o,c,i,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t={}),q&&q!==h.folder.currentFolder&&(t.group_id1=q),r=ma.productListQuery(t),e.next=5,fetchAPI(r);case 5:if((a=e.sent).response.status){e.next=8;break}return e.abrupt("return",queryResult(!1,h.common.netFail+" >> "+a.response.result));case 8:if(o=ma.productListCheck(a),c=o.response,i=c.status,u=c.result,i){e.next=12;break}return e.abrupt("return",queryResult(!1,u));case 12:if(!u.products){e.next=15;break}return L(u.products.alibaba_product_brief_response),e.abrupt("return");case 15:return L([]),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(c.a)(n.a.mark((function e(t){var r,a,o,c,i,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return r=ma.productDisplayQuery(t),e.next=5,fetchAPI(r);case 5:if((a=e.sent).response.status){e.next=8;break}return e.abrupt("return",queryResult(!1,h.common.netFail+" >> "+a.response.result));case 8:if(o=ma.productDisplayCheck(a),c=o.response,i=c.status,u=c.result,i){e.next=12;break}return e.abrupt("return",queryResult(!1,u));case 12:return setTimeout(ae,2e3),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){var e=[{field:"imgWithURL",headerName:h.table.tableHeader,minWidth:50,valueGetter:function(e){return e.row},renderCell:function(e){return Object(R.jsx)("a",{href:e.value.pc_detail_url,target:"_blank",children:Object(R.jsx)("img",Object(i.a)(Object(i.a)({},Q(e.value.main_image.images.string[0],100,100,1,1)),{},{alt:"mainPic"}))})}},{field:"subject",minWidth:500,headerName:h.table.subject},{field:"status",headerName:h.table.status},{field:"display",headerName:h.table.display},{field:"gmt_create",headerName:h.table.gmt_create,sortable:!1,width:160},{field:"gmt_modified",headerName:h.table.gmt_modified,sortable:!1,width:160}];G(e)}Object(s.useEffect)((function(){e({type:p.b,appData:_})}),[e,_]),Object(s.useEffect)((function(){return F.length&&K.length&&w(Object(i.a)(Object(i.a)({},g.appData),{},{appProduct:{folderArr:F,tableRows:K,currentFolder:q}})),function(){}}),[F,K]),Object(s.useEffect)((function(){q&&q!==h.folder.currentFolder&&(ae(),$(0),ce())}),[q]),Object(s.useEffect)((function(){j(f.a[t.locale])}),[t.locale]),Object(s.useEffect)((function(){return function(){}}),[g.appData]),Object(s.useEffect)((function(){if(console.log("I want products"),!x)return m("/");var e=g.appData.appProduct;return e?(e.folderArr&&e.folderArr.length?A(e.folderArr):te(),e.tableRows&&e.tableRows.length?L(e.tableRows):ae(),I(e.currentFolder)):(te(),ae()),ce(),function(){console.log("I leave products")}}),[]);return Object(R.jsxs)(b.a,{title:"Products --\u4ea7\u54c1",children:[Object(R.jsx)(N,{folderArr:F,currentFolder:q,addFolder:function(e){return ee.apply(this,arguments)},setCurrentFolder:I,langPack:h}),Object(R.jsx)(M,{tableRows:K,tableColumns:T,page_size:Y,page:B,localization:t,langPack:h,changeProductDisplay:function(e){return oe.apply(this,arguments)},handleChangePage:function(e){$(e),ae({current_page:e+1,page_size:Y})},handleChangeRowsPerPage:function(e){Z(e),ae({current_page:B+1,page_size:e})},onRowClick:function(e,t){}})]})}}}]);
//# sourceMappingURL=11.371f2948.chunk.js.map